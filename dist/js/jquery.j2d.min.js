/**
 * J2D (jQuery plugin of the fork j2Ds)
 *
 * @authors Skaner, DeVinterX
 * @license BSD, zlib
 * @version 0.1.6
 */

if (global === undefined) var global = window;
if (typeof define !== 'function' || define.amd) global.J2D = {};

!function(t,e){"function"==typeof define&&define.amd?define("jquery.j2d",["jquery","j2d.webGL2d","j2d.frame","j2d.scene","j2d.layers"],e):e(t.jQuery,t.WebGL2D,t.FrameManager,t.Scene,t.LayersManager)}(global,function(t,e,n,i,o){if(void 0===a)var a;var s={id:void 0,io:void 0,deltaTime:0,pause:!1,ready:!1,frameLimit:60,smoothing:!0,window:global,webGL:!1};return a=function(t,n,a){this.id=t,this.element=n,this.options=a,this.options.id=this.id,this.layers=new o(this,e),this.scene=new i(this)},a.prototype.getInfo=function(){return{name:"jquery.j2d",version:"0.1.6",site:"https://github.com/fsggs/jquery.j2d",info:"jquery.j2d - jQuery plugin of the fork j2ds.",author:"DeVinterX, Skaner(j2Ds)"}},a.prototype.getIO=function(){return this.options.io},a.prototype.IOHandler=function(t){return this.options.io=t},a.prototype.setWindow=function(t){this.window=t?t:global},a.prototype.start=function(t,e){var i=this;t=t||function(){i.element.html("Please init game engine function!"),console.warn("Please init game engine function for "+i.id+"!")},n.start(i.id,t,{j2d:i,frameLimit:e}),i.options.frameLimit=e,i.element.trigger("start")},a.prototype.stop=function(){n.stop(this.id),this.element.trigger("stop")},a.prototype.pause=function(){this.options.io&&this.options.io.flush(),this.options.pause=!0,this.element.addClass("pause"),this.element.trigger("pause")},a.prototype.resume=function(){this.element.removeClass("pause").focus(),this.options.pause=!1,this.options.io&&this.options.io.flush(),this.element.trigger("resume")},a.prototype.isPlay=function(){return!this.options.pause},a.prototype.enableWebGL=function(){this.options.webGL=!0,this.element.addClass("WebGL")},a.prototype.setSmoothing=function(t){this.options.smoothing=!!t},a.prototype.disableWebGL=function(){this.options.webGL=!1,this.element.removeClass("WebGL")},a.prototype.setActiveEngine=function(t){var e=this;t=t||function(){e.element.html("Please set game engine function!"),console.warn("Please set game engine function for "+e.id+"!")},n.stop(e.id),n.start(e.id,t,{j2d:e,frameLimit:e.options.frameLimit})},a.prototype.getDevice=function(){return this.device},a.prototype.device={width:parseInt(t(document).width())<parseInt(screen.width)?parseInt(t(document).width()):parseInt(screen.width),height:parseInt(t(document).height())<parseInt(screen.height)?parseInt(t(document).height()):parseInt(screen.height),resize:function(){this.width=global.innerWidth,this.height=global.innerHeight}},a.prototype.vector={vec2df:function(t,e){return{x:t,y:e}},vec2di:function(t,e){return{x:t>>0,y:e>>0}}},a.math={toInt:function(t){return t>>0},randomColor:function(t,e,n){return"rgba("+a.math.random(t,e)+", "+a.math.random(t,e)+", "+a.math.random(t,e)+", "+n+")"},random:function(t,e,n){var i=Math.floor(Math.random()*(e-t+1)+t);return n&&0==i?a.math.random(t,e,n):i},rad:function(t){return t*(Math.PI/180)}},a.prototype.math=a.math,a.util={disableSmoothing:function(t){var e=global.navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./),n=e?parseInt(e[2],10):!1;t.imageSmoothingEnabled=!1,t.mozImageSmoothingEnabled=!1,t.oImageSmoothingEnabled=!1,n&&29>=n&&(t.webkitImageSmoothingEnabled=!1),t.msImageSmoothingEnabled=!1}},a.prototype.util=a.util,a.prototype.getLayers=function(){return this.layers},a.prototype.getScene=function(){return this.scene},a.initJQueryPlugin=function(){if(void 0!==global.j2dPlugin)return null;global.j2dPlugin={pluginInit:!0},t.fn.j2d=function(e){this.filter("div.canvas:not([guid])").each(function(){var e=t.extend(!0,{},s,e),n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"==t?e:3&e|8;return n.toString(16)});t(this).attr("guid",n);var i=t(this).attr("id");("undefined"==typeof i||i===!1)&&t(this).attr("id",n);var o=t(this).attr("tabindex");("undefined"==typeof o||o===!1)&&t(this).attr("tabindex","-1"),t(this).data("j2d",new a(n,t(this),e)).addClass("j2d"),t(this).click().focus()});var n=[];return this.filter("div.canvas[guid]").each(function(){n.push(t(this).data("j2d"))}),1===n.length?t(this).data("j2d"):n};var e=function(){return!!(document.webkitFullscreenElement||document.webkitCurrentFullScreenElement||document.mozFullScreenElement||document.msFullscreenElement)};t(document).on("fullscreenchange webkitfullscreenchange mozfullscreenchange MSFullscreenChange",function(n){var i=e();i||(t("div.canvas[guid].active").data("j2d").scene.resizeToFullPage(i),t("div.canvas[guid]:not(.active)").toggle(!i))}),t(document).on("click","div.canvas[guid].pause",function(){t(this).data("j2d").resume();var e=this;t("div.canvas[guid]:not(.pause-disable):not(:focus)").each(function(){e!==this&&t(this).removeClass("active").data("j2d").pause()}),t("div.canvas[guid].active.pause-disable:not(:focus)").each(function(){e!==this&&t(this).removeClass("active")})}),t(document).on("click touch mouseenter","div.canvas[guid]:not(.resume-by-click):not(:focus)",function(e){t(this).addClass("active").focus().data("j2d").resume();var n=this;t("div.canvas[guid]:not(.pause-disable):not(:focus)").each(function(){n!==this&&t(this).removeClass("active").data("j2d").pause()}),t("div.canvas[guid].active.pause-disable:not(:focus)").each(function(){n!==this&&t(this).removeClass("active")})}),t(global).on("focus",function(){t("div.canvas[guid].active").each(function(){t(this).data("j2d").resume()})}).on("blur",function(){t("div.canvas[guid]").each(function(){t(this).data("j2d").pause()})}),t(global).on("resize",function(){t("div.canvas[guid]").each(function(){t(this).data("j2d").device.resize()});var n=e();n&&t("div.canvas[guid].active").data("j2d").scene.resizeToFullPage(n)}),n.pulse()},void 0!==global.J2D&&(global.J2D=a),a});
//# sourceMappingURL=jquery.j2d.min.map
