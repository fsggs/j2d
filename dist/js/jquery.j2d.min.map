{"version":3,"sources":["jquery.j2d.js"],"names":["root","factory","define","amd","jQuery","WebGL2D","FrameManager","Scene","LayersManager","global","$","undefined","J2D","defaults","id","io","deltaTime","pause","ready","frameLimit","smoothing","window","webGL","element","options","this","layers","scene","prototype","getInfo","name","version","site","info","author","getIO","IOHandler","handler","setWindow","customWindow","start","engine","j2d","html","console","warn","trigger","stop","flush","addClass","resume","removeClass","focus","isPlay","enableWebGL","setSmoothing","value","disableWebGL","setActiveEngine","getDevice","device","getDeviceManager","width","parseInt","document","screen","height","resize","innerWidth","innerHeight","vector","v2f","x","y","v2i","math","toInt","number","randomColor","min","max","opacity","random","omitZero","Math","floor","rad","PI","util","disableSmoothing","context","chrome","navigator","userAgent","match","getLayers","getLayerManager","getScene","getSceneManager","initJQueryPlugin","j2dPlugin","pluginInit","fn","filter","each","extend","guid","replace","c","r","v","toString","attr","tabIndex","data","click","$array","push","length","isFullScreen","webkitFullscreenElement","webkitCurrentFullScreenElement","mozFullScreenElement","msFullscreenElement","on","e","fullScreen","resizeToFullPage","toggle","current","pulse"],"mappings":"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","file":"jquery.j2d.js","sourcesContent":["/**\r\n * J2D (jQuery plugin of the fork j2Ds)\r\n *\r\n * @authors Skaner, likerRr, DeVinterX\r\n * @license BSD, zlib\r\n * @version 0.1.8-dev\r\n * @see https://github.com/SkanerSoft/J2ds/commit/fa7474a338f040ecdf439390ab69f9e4b7052f4d\r\n */\r\n\r\n!function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('jquery.j2d', ['jquery', 'j2d.webGL2d', 'j2d.frame', 'j2d.scene', 'j2d.layers'], factory);\r\n    } else {\r\n        factory(root.jQuery, root.WebGL2D, root.FrameManager, root.Scene, root.LayersManager);\r\n    }\r\n}(global, function ($, WebGL2D, FrameManager, Scene, LayersManager) {\r\n    if (J2D === undefined) var J2D;\r\n    'use strict';\r\n\r\n    var defaults = {\r\n        id: undefined,\r\n        io: undefined,\r\n        deltaTime: 0,\r\n        pause: false,\r\n        ready: false,\r\n\r\n        frameLimit: 60,\r\n        smoothing: true,\r\n\r\n        window: global,\r\n\r\n        webGL: false\r\n    };\r\n\r\n    J2D = function J2D(id, element, options) {\r\n        this.id = id;\r\n        this.element = element;\r\n        this.options = options;\r\n\r\n        this.options.id = this.id;\r\n\r\n        this.layers = new LayersManager(this, WebGL2D);\r\n        this.scene = new Scene(this);\r\n    };\r\n\r\n    /** +links getters **/\r\n    J2D.prototype.getInfo = function () {\r\n        return {\r\n            'name': 'jquery.j2d',\r\n            'version': '0.1.8',\r\n            'site': 'https://github.com/fsggs/jquery.j2d',\r\n            'info': 'jquery.j2d - jQuery plugin of the fork j2ds.',\r\n            'author': 'DeVinterX, Skaner(j2Ds)'\r\n        };\r\n    };\r\n\r\n    J2D.prototype.getIO = function () {\r\n        return this.options.io;\r\n    };\r\n    /** -links getters **/\r\n\r\n    /** +GameEngine **/\r\n    J2D.prototype.IOHandler = function (handler) {\r\n        return this.options.io = handler;\r\n    };\r\n\r\n    J2D.prototype.setWindow = function (customWindow) {\r\n        this.window = customWindow ? customWindow : global;\r\n    };\r\n\r\n    // старт игры\r\n    J2D.prototype.start = function (engine, frameLimit) {\r\n        var j2d = this;\r\n\r\n        engine = engine || function () {\r\n            j2d.element.html('Please init game engine function!');\r\n            console.warn('Please init game engine function for ' + j2d.id + '!');\r\n        };\r\n\r\n        FrameManager.start(j2d.id, engine, {\r\n            j2d: j2d,\r\n            frameLimit: frameLimit\r\n        });\r\n\r\n        j2d.options.frameLimit = frameLimit;\r\n\r\n        j2d.element.trigger('start');\r\n    };\r\n\r\n    J2D.prototype.stop = function () {\r\n        //if(this.options.io) this.options.io.disable();\r\n        FrameManager.stop(this.id);\r\n        this.element.trigger('stop');\r\n    };\r\n\r\n    J2D.prototype.pause = function () {\r\n        if (this.options.io) this.options.io.flush();\r\n        this.options.pause = true;\r\n        this.element.addClass('pause');\r\n        this.element.trigger('pause');\r\n    };\r\n\r\n    J2D.prototype.resume = function () {\r\n        this.element.removeClass('pause').focus();\r\n        this.options.pause = false;\r\n        if (this.options.io) this.options.io.flush();\r\n        this.element.trigger('resume');\r\n    };\r\n\r\n    J2D.prototype.isPlay = function () {\r\n        return !this.options.pause;\r\n    };\r\n\r\n    J2D.prototype.enableWebGL = function () {\r\n        this.options.webGL = true;\r\n        this.element.addClass('WebGL');\r\n    };\r\n\r\n    J2D.prototype.setSmoothing = function (value) {\r\n        this.options.smoothing = !!value;\r\n    };\r\n\r\n    J2D.prototype.disableWebGL = function () {\r\n        this.options.webGL = false;\r\n        this.element.removeClass('WebGL');\r\n    };\r\n\r\n    J2D.prototype.setActiveEngine = function (engine) {\r\n        var j2d = this;\r\n\r\n        engine = engine || function () {\r\n            j2d.element.html('Please set game engine function!');\r\n            console.warn('Please set game engine function for ' + j2d.id + '!');\r\n        };\r\n\r\n        FrameManager.stop(j2d.id);\r\n\r\n        FrameManager.start(j2d.id, engine, {\r\n            j2d: j2d,\r\n            frameLimit: j2d.options.frameLimit\r\n        });\r\n    };\r\n    /** -GameEngine **/\r\n\r\n    /** Device **/\r\n    J2D.prototype.getDevice = function () {\r\n        return this.device;\r\n    };\r\n    J2D.prototype.getDeviceManager = J2D.prototype.getDevice;\r\n\r\n    J2D.prototype.device = {\r\n        width: parseInt($(document).width()) < parseInt(screen.width) ? parseInt($(document).width()) : parseInt(screen.width),\r\n        height: parseInt($(document).height()) < parseInt(screen.height) ? parseInt($(document).height()) : parseInt(screen.height),\r\n\r\n        resize: function () {\r\n            this.width = global.innerWidth;\r\n            this.height = global.innerHeight;\r\n        }\r\n    };\r\n\r\n    /** Vector **/\r\n    J2D.prototype.vector = {\r\n        v2f: function (x, y) {\r\n            return {x: x, y: y};\r\n        },\r\n        v2i: function (x, y) {\r\n            return {x: (x >> 0), y: (y >> 0)};\r\n        }\r\n    };\r\n\r\n    /** Math **/\r\n    J2D.math = {\r\n        toInt: function (number) {\r\n            return number >> 0;\r\n        },\r\n        randomColor: function (min, max, opacity) {\r\n            return 'rgba('\r\n                + J2D.math.random(min, max) + ', '\r\n                + J2D.math.random(min, max) + ', '\r\n                + J2D.math.random(min, max) + ', '\r\n                + opacity + ')';\r\n        },\r\n        random: function (min, max, omitZero) {\r\n            var random = (Math.floor(Math.random() * (max - min + 1) + min));\r\n            return (omitZero && random == 0)\r\n                ? J2D.math.random(min, max, omitZero)\r\n                : random;\r\n        },\r\n        rad: function (number) {\r\n            return number * (Math.PI / 180);\r\n        }\r\n    };\r\n\r\n    J2D.prototype.math = J2D.math;\r\n\r\n    /** Utils **/\r\n    J2D.util = {\r\n        disableSmoothing: function (context) {\r\n            var chrome = global.navigator.userAgent.match(/Chrom(e|ium)\\/([0-9]+)\\./);\r\n            var version = chrome ? parseInt(chrome[2], 10) : false;\r\n\r\n            context['imageSmoothingEnabled'] = false;\r\n            context['mozImageSmoothingEnabled'] = false;\r\n            context['oImageSmoothingEnabled'] = false;\r\n            if (version && version <= 29) {\r\n                context['webkitImageSmoothingEnabled'] = false;\r\n            }\r\n            context['msImageSmoothingEnabled'] = false;\r\n        }\r\n    };\r\n    J2D.prototype.util = J2D.util;\r\n\r\n    /** +Layers **/\r\n    J2D.prototype.getLayers = function () {\r\n        return this.layers;\r\n    };\r\n    J2D.prototype.getLayerManager = J2D.prototype.getLayers;\r\n    /** -Layers **/\r\n\r\n    /** +Scene **/\r\n    J2D.prototype.getScene = function () {\r\n        return this.scene;\r\n    };\r\n    J2D.prototype.getSceneManager = J2D.prototype.getScene;\r\n    /** -Scene **/\r\n\r\n    J2D.initJQueryPlugin = function () {\r\n        if (global.j2dPlugin !== undefined) return null;\r\n        global.j2dPlugin = {pluginInit: true};\r\n\r\n        $.fn.j2d = function (options) {\r\n            this.filter('div.canvas:not([guid])').each(function () {\r\n                var options = $.extend(true, {}, defaults, options);\r\n\r\n                var guid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n                    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\r\n                    return v.toString(16);\r\n                });\r\n                $(this).attr('guid', guid);\r\n                var id = $(this).attr('id');\r\n                if (typeof id === typeof undefined || id === false) {\r\n                    $(this).attr('id', guid);\r\n                }\r\n                var tabIndex = $(this).attr('tabindex');\r\n                if (typeof tabIndex === typeof undefined || tabIndex === false) {\r\n                    $(this).attr('tabindex', '-1');\r\n                }\r\n                $(this).data('j2d', new J2D(guid, $(this), options)).addClass('j2d');\r\n                $(this).click().focus();\r\n            });\r\n\r\n            var $array = [];\r\n            this.filter('div.canvas[guid]').each(function () {\r\n                $array.push($(this).data('j2d'));\r\n            });\r\n\r\n            if (1 === $array.length) {\r\n                return $(this).data('j2d');\r\n            } else {\r\n                return $array;\r\n            }\r\n        };\r\n\r\n        var isFullScreen = function () {\r\n            return !!(document.webkitFullscreenElement\r\n            || document.webkitCurrentFullScreenElement\r\n            || document.mozFullScreenElement\r\n            || document.msFullscreenElement\r\n            );\r\n        };\r\n\r\n        $(document).on('fullscreenchange webkitfullscreenchange mozfullscreenchange MSFullscreenChange', function (e) {\r\n            var fullScreen = isFullScreen();\r\n            if (!fullScreen) {\r\n                $('div.canvas[guid].active').data('j2d').scene.resizeToFullPage(fullScreen);\r\n                $('div.canvas[guid]:not(.active)').toggle(!fullScreen);\r\n            }\r\n        });\r\n\r\n        $(document).on('click', 'div.canvas[guid].pause', function () {\r\n            $(this).data('j2d').resume();\r\n\r\n            var current = this;\r\n            $('div.canvas[guid]:not(.pause-disable):not(:focus)').each(function () {\r\n                if (current !== this) $(this).removeClass('active').data('j2d').pause();\r\n            });\r\n            $('div.canvas[guid].active.pause-disable:not(:focus)').each(function () {\r\n                if (current !== this) $(this).removeClass('active');\r\n            });\r\n        });\r\n\r\n        $(document).on('click touch mouseenter', 'div.canvas[guid]:not(.resume-by-click):not(:focus)', function (e) {\r\n            $(this).addClass('active').focus().data('j2d').resume();\r\n\r\n            var current = this;\r\n            $('div.canvas[guid]:not(.pause-disable):not(:focus)').each(function () {\r\n                if (current !== this) $(this).removeClass('active').data('j2d').pause();\r\n            });\r\n            $('div.canvas[guid].active.pause-disable:not(:focus)').each(function () {\r\n                if (current !== this) $(this).removeClass('active');\r\n            });\r\n        });\r\n\r\n        $(global).on('focus', function () {\r\n            $('div.canvas[guid].active').each(function () {\r\n                $(this).data('j2d').resume();\r\n            });\r\n        }).on('blur', function () {\r\n            $('div.canvas[guid]').each(function () {\r\n                $(this).data('j2d').pause();\r\n            });\r\n        });\r\n\r\n        $(global).on('resize', function () {\r\n            $('div.canvas[guid]').each(function () {\r\n                $(this).data('j2d').device.resize();\r\n            });\r\n            var fullScreen = isFullScreen();\r\n            if (fullScreen) {\r\n                $('div.canvas[guid].active').data('j2d').scene.resizeToFullPage(fullScreen);\r\n            }\r\n        });\r\n\r\n        FrameManager.pulse();\r\n    };\r\n\r\n    if (global.J2D !== undefined) global.J2D = J2D;\r\n    return J2D;\r\n});\r\n"],"sourceRoot":"/source/"}