{"version":3,"sources":["jquery.j2d.js","exceptions/BadFunctionCallException.js","exceptions/BadMethodCallException.js","exceptions/Exception.js","exceptions/InvalidArgumentException.js","exceptions/LengthException.js","exceptions/LogicException.js","exceptions/OutOfBoundsException.js","exceptions/OutOfRangeException.js","exceptions/RangeException.js","exceptions/RuntimeException.js","exceptions/UnexpectedValueException.js","io/InputManager.js","io/MediaManager.js","core/FrameManager.js","core/LayersManager.js","core/SceneManager.js","core/ViewportManager.js","core/WebGL2D.js","media/Audio.js","media/Sound.js","media/Video.js","utils/ArrayMap.js","utils/DeviceUtil.js","utils/Events.js","utils/MathUtil.js","utils/UUID.js","utils/Vector2d.js","utils/Vector2dInteger.js","nodes/BaseNode.js","nodes/CameraNode.js","nodes/CollectionNode.js","nodes/RectNode.js"],"names":["root","factory","define","amd","module","exports","require","jQuery","SceneManager","MediaManager","DeviceUtil","window","global","$","J2D","element","data","j2d","this","device","scene","Object","defineProperty","get","webGL","set","value","addClass","removeClass","smoothing","io","media","pause","defaults","id","deltaTime","ready","frameLimit","prototype","start","trigger","stop","flush","resume","focus","getSceneManager","getLayersManager","layersManager","getFrameManager","frameManager","getViewportManager","viewportManager","on","once","off","util","disableSmoothing","context","chrome","navigator","userAgent","match","version","parseInt","initPlugin","undefined","j2dPlugin","pluginInit","fn","options","filter","each","extend","guid","replace","c","r","Math","random","v","toString","attr","tabIndex","click","$array","push","length","isFullScreen","document","webkitFullscreenElement","webkitCurrentFullScreenElement","mozFullScreenElement","msFullscreenElement","fullScreen","resizeToFullPage","toggle","current","onResize","Exception","BadFunctionCallException","message","call","create","constructor","BadMethodCallException","Error","InvalidArgumentException","LengthException","LogicException","OutOfBoundsException","OutOfRangeException","RangeException","RuntimeException","UnexpectedValueException","ArrayMap","getKey","object","keys","key","InputManager","mouse","startPosition","x","y","currentPosition","previousDistance","distance","viewport","position","enabled","enableAdditionalData","keysPressed","writeMode","timePressed","preventAll","cursor","image","keyMap","FULLSCREEN","KEY_CTRL","KEY_F11","checkKeyMap","e","enableCallback","manager","keyCode","which","index","hasOwnProperty","isArray","eval","equals","events","onMouseClick","isPlay","hasClass","event","inArray","pageX","pageY","timeStamp","preventDefault","splice","indexOf","onMouseWheel","originalEvent","wheelDelta","fixMouseWheel","mouseWheelCancel","onMouseMove","sqrt","pow","toFixed","onKeyboardPress","char","String","fromCharCode","onTouchTap","touch","touches","changedTouches","onTouchMove","bindEvents","selector","unbindEvents","init","update","dX","canvas","offsetWidth","width","dY","offsetHeight","height","offset","left","top","clear","keyPressed","SCROLL_MOUSE_UP","SCROLL_MOUSE_DOWN","enable","disable","load","newKeyMap","oldKeyMap","JSON","stringify","parse","save","setKeys","mapObject","getPressData","keyList","time","Date","now","getMouseMoveDistance","previous","checkPressedKeyList","isNaN","checkPressedKeyMap","setWriteMode","mode","isWriteMode","setCursorImage","css","toggleCursor","isCursorVisible","KEY_MOUSE_LEFT","KEY_MOUSE_MIDDLE","KEY_MOUSE_RIGHT","KEY_BACKSPACE","KEY_TAB","KEY_ENTER","KEY_SHIFT","KEY_ALT","KEY_PAUSE","KEY_BREAK","KEY_CAPS_LOCK","KEY_ESCAPE","KEY_SPACE_BAR","KEY_PAGE_UP","KEY_PAGE_DOWN","KEY_END","KEY_HOME","KEY_LEFT_ARROW","KEY_UP_ARROW","KEY_RIGHT_ARROW","KEY_DOWN_ARROW","KEY_INSERT","KEY_DELETE","KEY_0","KEY_1","KEY_2","KEY_3","KEY_4","KEY_5","KEY_6","KEY_7","KEY_8","KEY_9","KEY_A","KEY_B","KEY_C","KEY_D","KEY_E","KEY_F","KEY_G","KEY_H","KEY_I","KEY_J","KEY_K","KEY_L","KEY_M","KEY_N","KEY_O","KEY_P","KEY_Q","KEY_R","KEY_S","KEY_T","KEY_U","KEY_V","KEY_W","KEY_X","KEY_Y","KEY_Z","KEY_LEFT_WINDOW_KEY","KEY_RIGHT_WINDOW_KEY","KEY_SELECT_KEY","KEY_NUMPAD_0","KEY_NUMPAD_1","KEY_NUMPAD_2","KEY_NUMPAD_3","KEY_NUMPAD_4","KEY_NUMPAD_5","KEY_NUMPAD_6","KEY_NUMPAD_7","KEY_NUMPAD_8","KEY_NUMPAD_9","KEY_MULTIPLY","KEY_ADD","KEY_SUBTRACT","KEY_DECIMAL_POINT","KEY_DIVIDE","KEY_F1","KEY_F2","KEY_F3","KEY_F4","KEY_F5","KEY_F6","KEY_F7","KEY_F8","KEY_F9","KEY_F10","KEY_F12","KEY_NUM_LOCK","KEY_SCROLL_LOCK","KEY_SEMI_COLON","KEY_EQUAL_SIGN","KEY_COMMA","KEY_DASH","KEY_PERIOD","KEY_FORWARD_SLASH","KEY_GRAVE_ACCENT","KEY_OPEN_BRACKET","KEY_BACK_SLASH","KEY_CLOSE_BRACKET","KEY_SINGLE_QUOTE","KEY_LEFT_COMMAND","KEY_RIGHT_COMMAND","Events","Audio","Sound","AudioNode","audioContext","html5Audio","AudioContext","webkitAudioContext","console","warn","masterGain","createGain","createGainNode","gain","connect","destination","soundManager","add","volume","iOSEnabled","test","codecs","mp3","canPlayType","opus","ogg","wav","aac","m4a","mp4","weba","parseFloat","sounds","webAudio","i","audioNode","muted","iOSAutoEnable","unlock","buffer","createBuffer","source","createBufferSource","noteOn","setTimeout","playbackState","PLAYING_STATE","FINISHED_STATE","removeEventListener","addEventListener","getAudioContext","getMasterGain","mute","unMute","isSupportCodec","fileExtension","addSound","addAudio","addVideo","sound","audio","video","removeSound","contains","remove","removeAudio","removeVideo","instance","engineStack","dataStack","timestamp","frameRun","breakAnimationFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","Number","MAX_SAFE_INTEGER","bind","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","oCancelAnimationFrame","msCancelAnimationFrame","FrameManager","name","engine","params","lastTime","sceneStartTime","sceneSkipTime","asyncUpdate","asyncRender","interval","pulse","runMainLoop","render","setDefaultFrameLimit","Init","instanceFrameManager","BaseNode","CollectionNode","LayersManager","globalCollection","layers","addLayer","zIndex","node","removeLayer","getLayer","has","setZIndex","WebGL2D","ViewportManager","sceneManager","initLayers","backgroundColor","fillStyle","fillRect","opacity","style","visible","display","originalWidth","originalHeight","originalMargin","enableFullScreen","gameState","fixGameStateRender","fillBackground","initCanvas","setScreen","setDefaultViewport","size","scale","angle","createElement","getContext","shadowColor","append","pos","clearRect","resize","restore","setGameState","async","fullscreen","getElementById","requestFullscreen","webkitRequestFullscreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen","exitFullscreen","webkitExitFullscreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen","enableFullscreen","setOffset","toggleFullScreen","getSceneLayer","forEach","getViewport","registerCamera","addCamera","updateNoCamerasViewport","setViewport","Vector2d","updateViewport","CameraNode","calculateScale","screen","offsetX","offsetY","cameras","camera","Array","removeCamera","getCameraViewport","getVector","isPOT","Transform","mat","clearStack","mat3","identity","multiply","m1","m2","m10","m11","m12","m13","m14","m15","m16","m17","m18","m20","m21","m22","m23","m24","m25","m26","m27","m28","vec2_multiply","mOut","transpose","m","STACK_DEPTH_LIMIT","init_mat","m_stack","m_cache","c_stack","valid","result","getIdentity","setIdentity","getResult","pushMatrix","popMatrix","translateMatrix","translate","trMatrix","tr","a","b","d","f","scaleMatrix","rotateMatrix","rotate","ang","sAng","cAng","sin","cos","gl","fs","vs","shaderProgram","transform","shaderPool","maxTextureSize","gl2d","$getContext","force","initShaders","initBuffers","initCanvas2DAPI","BLEND","blendFuncSeparate","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","ONE","getParameter","MAX_TEXTURE_SIZE","postInit","shaderMask","texture","crop","path","getFragmentShaderSource","sMask","fsSource","join","getVertexShaderSource","stackDepth","vsSource","transformStackDepth","storedShader","useProgram","createShader","FRAGMENT_SHADER","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","VERTEX_SHADER","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","vertexPositionAttribute","getAttribLocation","enableVertexAttribArray","uColor","getUniformLocation","uSampler","uCropSource","pMatrix","uTransforms","uniformMatrix4fv","rectVerts","Float32Array","rectVertexPositionBuffer","rectVertexColorBuffer","pathVertexPositionBuffer","pathVertexColorBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","instances","hue2rgb","p","q","t","HSLAToRGBA","h","s","l","g","colorStringToVec4","channel","isPercent","hasAlpha","alphaChannel","sameType","reRGBAColor","exec","reHSLAColor","reHex6Color","colorInt","reHex3Color","hexString","toLowerCase","colorKeywords","colorVecToString","vec4","saveDrawState","bakedDrawState","drawState","strokeStyle","globalAlpha","globalCompositeOperation","lineCap","lineJoin","lineWidth","miterLimit","shadowBlur","shadowOffsetX","shadowOffsetY","textAlign","font","textBaseline","imageSmoothingEnabled","drawStateStack","restoreDrawState","pop","sendTransformStack","sp","stack","maxI","uniformMatrix3fv","SubPath","closed","verts","fillSubPath","subPath","subPaths","vertexAttribPointer","FLOAT","uniform4f","drawArrays","TRIANGLE_FAN","strokeSubPath","LINE_LOOP","LINE_STRIP","Texture","obj","createTexture","textureCache","imageCache","ctx","drawImage","GL_FUNCTION","LINEAR","GL_MIPMAP_FUNCTION","LINEAR_MIPMAP_LINEAR","NEAREST","LINEAR_MIPMAP_NEAREST","bindTexture","TEXTURE_2D","texImage2D","RGBA","UNSIGNED_BYTE","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MAG_FILTER","TEXTURE_MIN_FILTER","generateMipmap","textCanvas","textCtx","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","drawStyle","$lineWidth","fillText","text","strokeText","measureText","tempCanvas","tempCtx","createImageData","getImageData","Uint8Array","readPixels","w","j","maxJ","index1","index2","putImageData","imageData","dx","dy","setTransform","apply","arguments","strokeRect","beginPath","closePath","prevPath","startX","startY","newPath","moveTo","lineTo","quadraticApproximateCount","quadraticCurveTo","hx","hy","tx","ty","fromx","fromy","bezierApproximateCount","bezierCurveTo","h1x","h1y","h2x","h2y","arcTo","rect","arcApproximateCount","arc","cx","cy","radius","startAngle","endAngle","anticlockwise","PI","count","fixed","fill","stroke","clip","isPointInPath","drawFocusRing","doCrop","cacheIndex","activeTexture","TEXTURE0","uniform1i","configurable","enumerable","writable","UUID","cache","generate","src","format","autoPlay","duration","loop","sprite","pos3d","loaded","onEndTimer","_load","error","type","code","preload","listener","ceil","getOwnPropertyNames","default","play","url","extension","isSupportAudio","extractFormat","split","_unload","unload","nodes","paused","clearTimeout","timer","audios","_inactiveNode","timerId","soundId","round","rate","readyState","isCocoonJS","currentTime","_clearEndTimer","playSprite","newNode","_pause","activeNode","_nodeById","_activeNode","_stop","_mute","_unMute","_volume","vol","_position","_pos3d","zsaz","z","_drainPool","listenerEvent","inactive","createMasterGain","_setupAudioNode","iOSEnable","model","loadBuffer","soundNode","disconnect","loopStart","loopEnd","refreshBuffer","playStart","bufferSource","noteGrainOn","noteOff","panner","setPosition","panningModel","createPanner","loadSound","atob","dataView","charCodeAt","decodeAudioData","xhr","XMLHttpRequest","open","responseType","onload","response","onerror","gainNode","send","arraybuffer","playbackRate","Video","args","last","array","Vector2dInteger","innerWidth","innerHeight","getWidth","getHeight","getSize","eventName","MathUtil","number2Integer","number","isInteger","isFinite","floor","randomColor","min","max","omitZero","degree2Radian","degree","radian2Degree","radian","getX","getY","toArray","fromArray","baseNode","enabledCache","getPosition","setSize","getOffset","collection","inViewport","calculate","collectionNode","RectNode","color","getColor","setColor","draw","log","tempOpacity"],"mappings":"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","file":"jquery.j2d.js","sourcesContent":["/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n/*\r\n * TODO:: Events System\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('jquery.j2d', [\r\n            'jquery',\r\n            'core/SceneManager',\r\n            'io/MediaManager',\r\n            'utils/DeviceUtil'\r\n        ], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(\r\n            require('jquery'),\r\n            require('core/SceneManager'),\r\n            require('io/MediaManager'),\r\n            require('utils/DeviceUtil')\r\n        );\r\n    } else {\r\n        factory(\r\n            root.jQuery,\r\n            root.SceneManager,\r\n            root.MediaManager,\r\n            root.DeviceUtil\r\n        );\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function ($, SceneManager, MediaManager, DeviceUtil) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * @param {Element|jQuery} element\r\n     * @param {J2D.defaults} data\r\n     *\r\n     * @constructor\r\n     * @property {boolean} WebGL\r\n     * @property {boolean} smoothing\r\n     * @property {InputManager|null} io\r\n     * @property {boolean} isPlay\r\n     */\r\n    var J2D = function J2D(element, data) {\r\n        var j2d = this;\r\n\r\n        /** @type {Element|jQuery} */\r\n        this.element = element;\r\n\r\n        /** @type J2D.defaults */\r\n        this.data = data;\r\n\r\n        /** @type DeviceUtil */\r\n        this.device = new DeviceUtil();\r\n\r\n        /** @type SceneManager */\r\n        this.scene = new SceneManager(this);\r\n\r\n        Object.defineProperty(this, 'WebGL', {\r\n            get: function () {\r\n                return j2d.data.webGL;\r\n            },\r\n            set: function (value) {\r\n                j2d.data.webGL = !!value;\r\n                if (!!value && !j2d.data.webGL) {\r\n                    j2d.element.addClass('WebGL');\r\n                } else if (!value && j2d.data.webGL) {\r\n                    j2d.element.removeClass('WebGL');\r\n                }\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(this, 'smoothing', {\r\n            get: function () {\r\n                return j2d.data.smoothing;\r\n            },\r\n            set: function (value) {\r\n                j2d.data.smoothing = !!value;\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(this, 'io', {\r\n            get: function () {\r\n                return j2d.data.io;\r\n            },\r\n            set: function (value) {\r\n                return j2d.data.io = value\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(this, 'media', {\r\n            get: function () {\r\n                return j2d.data.media;\r\n            },\r\n            set: function (value) {\r\n                return j2d.data.media = value\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(this, 'isPlay', {\r\n            get: function () {\r\n                return !j2d.data.pause;\r\n            },\r\n            set: function () {\r\n            }\r\n        });\r\n    };\r\n\r\n    J2D.defaults = {\r\n        /** @type string|null */\r\n        id: null,\r\n        io: null,\r\n        media: null,\r\n        deltaTime: 0,\r\n        pause: false,\r\n        ready: false,\r\n\r\n        frameLimit: 60,\r\n        smoothing: true,\r\n\r\n        webGL: false\r\n    };\r\n\r\n    /** +GameEngine **/\r\n    J2D.prototype.start = function () {\r\n        this.scene.start();\r\n        this.trigger('start');\r\n    };\r\n\r\n    J2D.prototype.stop = function () {\r\n        this.scene.stop();\r\n        this.trigger('stop');\r\n    };\r\n\r\n    // TODO:: add MediaManager\r\n    J2D.prototype.pause = function () {\r\n        if (this.data.io) this.data.io.flush();\r\n        this.data.pause = true;\r\n        this.element.addClass('pause');\r\n        this.trigger('pause');\r\n    };\r\n\r\n    // TODO:: add MediaManager\r\n    J2D.prototype.resume = function () {\r\n        this.element.removeClass('pause').focus();\r\n        this.data.pause = false;\r\n        if (this.data.io) this.data.io.flush();\r\n        this.trigger('resume');\r\n    };\r\n    /** -GameEngine **/\r\n\r\n    /** @returns {SceneManager} */\r\n    J2D.prototype.getSceneManager = function () {\r\n        return this.scene;\r\n    };\r\n\r\n    /** @returns {LayersManager} */\r\n    J2D.prototype.getLayersManager = function () {\r\n        return this.scene.layersManager;\r\n    };\r\n\r\n    /** @returns {FrameManager} */\r\n    J2D.prototype.getFrameManager = function () {\r\n        return this.scene.frameManager;\r\n    };\r\n\r\n    /** @returns {ViewportManager} */\r\n    J2D.prototype.getViewportManager = function () {\r\n        return this.scene.viewportManager;\r\n    };\r\n\r\n    J2D.prototype.on = function () {\r\n    };\r\n    J2D.prototype.once = function () {\r\n    };\r\n    J2D.prototype.off = function () {\r\n    };\r\n    J2D.prototype.trigger = function () {\r\n    };\r\n\r\n    /** Utils **/\r\n    J2D.util = {\r\n        /**\r\n         * @param {CanvasRenderingContext2D} context\r\n         */\r\n        disableSmoothing: function (context) {\r\n            var chrome = global.navigator.userAgent.match(/Chrom(e|ium)\\/([0-9]+)\\./);\r\n            var version = chrome ? parseInt(chrome[2], 10) : false;\r\n\r\n            context['imageSmoothingEnabled'] = false;\r\n            context['mozImageSmoothingEnabled'] = false;\r\n            context['oImageSmoothingEnabled'] = false;\r\n            if (version && version <= 29) {\r\n                context['webkitImageSmoothingEnabled'] = false;\r\n            }\r\n            context['msImageSmoothingEnabled'] = false;\r\n        }\r\n    };\r\n    J2D.prototype.util = J2D.util;\r\n\r\n    /* ------------------------------ Plugin ------------------------------ */\r\n\r\n    (J2D.initPlugin = function () {\r\n        if (window.j2dPlugin !== undefined) return null;\r\n        window.j2dPlugin = {pluginInit: true};\r\n\r\n        /**\r\n         * @param {J2D.defaults} [options]\r\n         * @returns {J2D|J2D[]|Array.<J2D>}\r\n         */\r\n        $.fn.j2d = function (options) {\r\n            this.filter('div.canvas:not([guid])').each(function () {\r\n                var options = $.extend(true, {}, J2D.defaults, options);\r\n\r\n                var guid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n                    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\r\n                    return v.toString(16);\r\n                });\r\n                options.id = guid;\r\n\r\n                $(this).attr('guid', guid);\r\n                var id = $(this).attr('id');\r\n                if (typeof id === 'undefined' || id === false) {\r\n                    $(this).attr('id', guid);\r\n                }\r\n                var tabIndex = $(this).attr('tabindex');\r\n                if (typeof tabIndex === 'undefined' || tabIndex === false) {\r\n                    $(this).attr('tabindex', '-1');\r\n                }\r\n                $(this).data('j2d', new J2D($(this), options)).addClass('j2d');\r\n                $(this).click().focus();\r\n            });\r\n\r\n            var $array = [];\r\n            this.filter('div.canvas[guid]').each(function () {\r\n                $array.push($(this).data('j2d'));\r\n            });\r\n\r\n            return (1 === $array.length) ? $(this).data('j2d') : $array;\r\n        };\r\n\r\n        var isFullScreen = function () {\r\n            //noinspection JSUnresolvedVariable\r\n            return !!(document.webkitFullscreenElement\r\n                || document.webkitCurrentFullScreenElement\r\n                || document.mozFullScreenElement\r\n                || document.msFullscreenElement\r\n            );\r\n        };\r\n\r\n        $(document).on('fullscreenchange webkitfullscreenchange mozfullscreenchange MSFullscreenChange', function () {\r\n            var fullScreen = isFullScreen();\r\n            if (!fullScreen) {\r\n                $('div.canvas[guid].active').data('j2d').scene.resizeToFullPage(fullScreen);\r\n                $('div.canvas[guid]:not(.active)').toggle(!fullScreen);\r\n            }\r\n        });\r\n\r\n        $(document).on('click', 'div.canvas[guid].pause', function () {\r\n            $(this).data('j2d').resume();\r\n\r\n            var current = this;\r\n            $('div.canvas[guid]:not(.pause-disable):not(:focus)').each(function () {\r\n                if (current !== this) $(this).removeClass('active').data('j2d').pause();\r\n            });\r\n            $('div.canvas[guid].active.pause-disable:not(:focus)').each(function () {\r\n                if (current !== this) $(this).removeClass('active');\r\n            });\r\n        });\r\n\r\n        $(document).on('click touch mouseenter', 'div.canvas[guid]:not(.resume-by-click):not(:focus)', function () {\r\n            $(this).addClass('active').focus().data('j2d').resume();\r\n\r\n            var current = this;\r\n            $('div.canvas[guid]:not(.pause-disable):not(:focus)').each(function () {\r\n                if (current !== this) $(this).removeClass('active').data('j2d').pause();\r\n            });\r\n            $('div.canvas[guid].active.pause-disable:not(:focus)').each(function () {\r\n                if (current !== this) $(this).removeClass('active');\r\n            });\r\n        });\r\n\r\n        $(window).on('focus', function () {\r\n            $('div.canvas[guid].active').each(function () {\r\n                $(this).data('j2d').resume();\r\n            });\r\n        }).on('blur', function () {\r\n            $('div.canvas[guid]').each(function () {\r\n                $(this).data('j2d').pause();\r\n            });\r\n        });\r\n\r\n        $(window).on('resize', function () {\r\n            $('div.canvas[guid]').each(function () {\r\n                $(this).data('j2d').device.onResize();\r\n            });\r\n            var fullScreen = isFullScreen();\r\n            if (fullScreen) {\r\n                $('div.canvas[guid].active').data('j2d').scene.resizeToFullPage(fullScreen);\r\n            }\r\n        });\r\n    })();\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.J2D = J2D;\r\n    if (global.J2D === undefined) global.J2D = J2D;\r\n    return J2D;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('exceptions/BadFunctionCallException', ['exceptions/Exception'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(require('exceptions/Exception'));\r\n    } else {\r\n        factory(root.Exception);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function (Exception) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * BadFunctionCallException\r\n     * Create custom exception with message\r\n     *\r\n     * @param {string} message\r\n     * @property {string} message\r\n     */\r\n    var BadFunctionCallException = function (message) {\r\n        Exception.call(this, message);\r\n\r\n        /**\r\n         * Convert exception to String\r\n         * @returns {string}\r\n         */\r\n        this.toString = function () {\r\n            return this.message;\r\n        }\r\n    };\r\n\r\n    BadFunctionCallException.prototype = Object.create(Exception.prototype);\r\n    BadFunctionCallException.prototype.constructor = BadFunctionCallException;\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.BadFunctionCallException = BadFunctionCallException;\r\n    if (typeof define !== 'function' || !define.amd) global.BadFunctionCallException = BadFunctionCallException;\r\n    return BadFunctionCallException;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('exceptions/BadMethodCallException', ['exceptions/Exception'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(require('exceptions/Exception'));\r\n    } else {\r\n        factory(root.Exception);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function (Exception) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * BadMethodCallException\r\n     * Create custom exception with message\r\n     *\r\n     * @param {string} message\r\n     * @property {string} message\r\n     */\r\n    var BadMethodCallException = function (message) {\r\n        Exception.call(this, message);\r\n\r\n        /**\r\n         * Convert exception to String\r\n         * @returns {string}\r\n         */\r\n        this.toString = function () {\r\n            return this.message;\r\n        }\r\n    };\r\n\r\n    BadMethodCallException.prototype = Object.create(Exception.prototype);\r\n    BadMethodCallException.prototype.constructor = BadMethodCallException;\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.BadMethodCallException = BadMethodCallException;\r\n    if (typeof define !== 'function' || !define.amd) global.BadMethodCallException = BadMethodCallException;\r\n    return BadMethodCallException;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('exceptions/Exception', [], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory();\r\n    } else {\r\n        factory();\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function () {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * Default Exception\r\n     * Create custom exception with message\r\n     *\r\n     * @param {string} message\r\n     * @property {string} message\r\n     */\r\n    var Exception = function (message) {\r\n        Error.call(this, message);\r\n        this.message = message;\r\n\r\n        /**\r\n         * Convert exception to String\r\n         * @returns {string}\r\n         */\r\n        this.toString = function () {\r\n            return this.message;\r\n        }\r\n    };\r\n\r\n    Exception.prototype = Object.create(Error.prototype);\r\n    Exception.prototype.constructor = Exception;\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.Exception = Exception;\r\n    if (typeof define !== 'function' || !define.amd) global.Exception = Exception;\r\n    return Exception;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('exceptions/InvalidArgumentException', ['exceptions/Exception'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(require('exceptions/Exception'));\r\n    } else {\r\n        factory(root.Exception);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function (Exception) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * InvalidArgumentException\r\n     * Create custom exception with message\r\n     *\r\n     * @param {string} message\r\n     * @property {string} message\r\n     */\r\n    var InvalidArgumentException = function (message) {\r\n        Exception.call(this, message);\r\n\r\n        /**\r\n         * Convert exception to String\r\n         * @returns {string}\r\n         */\r\n        this.toString = function () {\r\n            return this.message;\r\n        }\r\n    };\r\n\r\n    InvalidArgumentException.prototype = Object.create(Exception.prototype);\r\n    InvalidArgumentException.prototype.constructor = InvalidArgumentException;\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.InvalidArgumentException = InvalidArgumentException;\r\n    if (typeof define !== 'function' || !define.amd) global.InvalidArgumentException = InvalidArgumentException;\r\n    return InvalidArgumentException;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('exceptions/LengthException', ['exceptions/Exception'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(require('exceptions/Exception'));\r\n    } else {\r\n        factory(root.Exception);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function (Exception) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * LengthException\r\n     * Create custom exception with message\r\n     *\r\n     * @param {string} message\r\n     * @property {string} message\r\n     */\r\n    var LengthException = function (message) {\r\n        Exception.call(this, message);\r\n\r\n        /**\r\n         * Convert exception to String\r\n         * @returns {string}\r\n         */\r\n        this.toString = function () {\r\n            return this.message;\r\n        }\r\n    };\r\n\r\n    LengthException.prototype = Object.create(Exception.prototype);\r\n    LengthException.prototype.constructor = LengthException;\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.LengthException = LengthException;\r\n    if (typeof define !== 'function' || !define.amd) global.LengthException = LengthException;\r\n    return LengthException;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('exceptions/LogicException', ['exceptions/Exception'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(require('exceptions/Exception'));\r\n    } else {\r\n        factory(root.Exception);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function (Exception) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * LogicException\r\n     * Create custom exception with message\r\n     *\r\n     * @param {string} message\r\n     * @property {string} message\r\n     */\r\n    var LogicException = function (message) {\r\n        Exception.call(this, message);\r\n\r\n        /**\r\n         * Convert exception to String\r\n         * @returns {string}\r\n         */\r\n        this.toString = function () {\r\n            return this.message;\r\n        }\r\n    };\r\n\r\n    LogicException.prototype = Object.create(Exception.prototype);\r\n    LogicException.prototype.constructor = LogicException;\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.LogicException = LogicException;\r\n    if (typeof define !== 'function' || !define.amd) global.LogicException = LogicException;\r\n    return LogicException;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('exceptions/OutOfBoundsException', ['exceptions/Exception'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(require('exceptions/Exception'));\r\n    } else {\r\n        factory(root.Exception);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function (Exception) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * OutOfBoundsException\r\n     * Create custom exception with message\r\n     *\r\n     * @param {string} message\r\n     * @property {string} message\r\n     */\r\n    var OutOfBoundsException = function (message) {\r\n        Exception.call(this, message);\r\n\r\n        /**\r\n         * Convert exception to String\r\n         * @returns {string}\r\n         */\r\n        this.toString = function () {\r\n            return this.message;\r\n        }\r\n    };\r\n\r\n    OutOfBoundsException.prototype = Object.create(Exception.prototype);\r\n    OutOfBoundsException.prototype.constructor = OutOfBoundsException;\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.OutOfBoundsException = OutOfBoundsException;\r\n    if (typeof define !== 'function' || !define.amd) global.OutOfBoundsException = OutOfBoundsException;\r\n    return OutOfBoundsException;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('exceptions/OutOfRangeException', ['exceptions/Exception'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(require('exceptions/Exception'));\r\n    } else {\r\n        factory(root.Exception);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function (Exception) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * OutOfRangeException\r\n     * Create custom exception with message\r\n     *\r\n     * @param {string} message\r\n     * @property {string} message\r\n     */\r\n    var OutOfRangeException = function (message) {\r\n        Exception.call(this, message);\r\n\r\n        /**\r\n         * Convert exception to String\r\n         * @returns {string}\r\n         */\r\n        this.toString = function () {\r\n            return this.message;\r\n        }\r\n    };\r\n\r\n    OutOfRangeException.prototype = Object.create(Exception.prototype);\r\n    OutOfRangeException.prototype.constructor = OutOfRangeException;\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.OutOfRangeException = OutOfRangeException;\r\n    if (typeof define !== 'function' || !define.amd) global.OutOfRangeException = OutOfRangeException;\r\n    return OutOfRangeException;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('exceptions/RangeException', ['exceptions/Exception'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(require('exceptions/Exception'));\r\n    } else {\r\n        factory(root.Exception);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function (Exception) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * RangeException\r\n     * Create custom exception with message\r\n     *\r\n     * @param {string} message\r\n     * @property {string} message\r\n     */\r\n    var RangeException = function (message) {\r\n        Exception.call(this, message);\r\n\r\n        /**\r\n         * Convert exception to String\r\n         * @returns {string}\r\n         */\r\n        this.toString = function () {\r\n            return this.message;\r\n        }\r\n    };\r\n\r\n    RangeException.prototype = Object.create(Exception.prototype);\r\n    RangeException.prototype.constructor = RangeException;\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.RangeException = RangeException;\r\n    if (typeof define !== 'function' || !define.amd) global.RangeException = RangeException;\r\n    return RangeException;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('exceptions/RuntimeException', ['exceptions/Exception'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(require('exceptions/Exception'));\r\n    } else {\r\n        factory(root.Exception);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function (Exception) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * RuntimeException\r\n     * Create custom exception with message\r\n     *\r\n     * @param {string} message\r\n     * @property {string} message\r\n     */\r\n    var RuntimeException = function (message) {\r\n        Exception.call(this, message);\r\n\r\n        /**\r\n         * Convert exception to String\r\n         * @returns {string}\r\n         */\r\n        this.toString = function () {\r\n            return this.message;\r\n        }\r\n    };\r\n\r\n    RuntimeException.prototype = Object.create(Exception.prototype);\r\n    RuntimeException.prototype.constructor = RuntimeException;\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.RuntimeException = RuntimeException;\r\n    if (typeof define !== 'function' || !define.amd) global.RuntimeException = RuntimeException;\r\n    return RuntimeException;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('exceptions/UnexpectedValueException', ['exceptions/Exception'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(require('exceptions/Exception'));\r\n    } else {\r\n        factory(root.Exception);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function (Exception) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * UnexpectedValueException\r\n     * Create custom exception with message\r\n     *\r\n     * @param {string} message\r\n     * @property {string} message\r\n     */\r\n    var UnexpectedValueException = function (message) {\r\n        Exception.call(this, message);\r\n\r\n        /**\r\n         * Convert exception to String\r\n         * @returns {string}\r\n         */\r\n        this.toString = function () {\r\n            return this.message;\r\n        }\r\n    };\r\n\r\n    UnexpectedValueException.prototype = Object.create(Exception.prototype);\r\n    UnexpectedValueException.prototype.constructor = UnexpectedValueException;\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.UnexpectedValueException = UnexpectedValueException;\r\n    if (typeof define !== 'function' || !define.amd) global.UnexpectedValueException = UnexpectedValueException;\r\n    return UnexpectedValueException;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('io/InputManager', ['jquery', 'utils/ArrayMap'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(require('jquery'), require('utils/ArrayMap'));\r\n    } else {\r\n        factory(root.jQuery, root.ArrayMap);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function ($, ArrayMap) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * @param {J2D} j2d\r\n     * @constructor\r\n     */\r\n    var InputManager = function (j2d) {\r\n        this.j2d = j2d;\r\n\r\n        /** @type string */\r\n        this.id = j2d.data.id;\r\n\r\n        /** @type Element|jQuery */\r\n        this.element = j2d.element;\r\n\r\n        this.data = {\r\n            mouse: {\r\n                startPosition: {\r\n                    x: 0,\r\n                    y: 0\r\n                },\r\n                currentPosition: {\r\n                    x: 0,\r\n                    y: 0\r\n                },\r\n                previousDistance: 0,\r\n                distance: 0\r\n            },\r\n            viewport: {\r\n                position: {\r\n                    x: 0,\r\n                    y: 0\r\n                }\r\n            },\r\n            enabled: false,\r\n            enableAdditionalData: false,\r\n            keysPressed: new ArrayMap(),\r\n            writeMode: false,\r\n            timePressed: 0,\r\n            preventAll: false,\r\n\r\n            cursor: {\r\n                enabled: false,\r\n                image: 'auto'\r\n            }\r\n        };\r\n\r\n        this.keyMap = {\r\n            //DEBUG_INFO: [[InputManager.key.KEY_CTRL, InputManager.key.KEY_F1], 'j2d.debug.toggleScreen', {}],\r\n            FULLSCREEN: [[InputManager.key.KEY_CTRL, InputManager.key.KEY_F11], 'j2d.scene.toggleFullScreen', {}]\r\n        };\r\n    };\r\n\r\n    /**\r\n     * @param e\r\n     * @param {boolean} [enableCallback]\r\n     * @returns {boolean}\r\n     */\r\n    var checkKeyMap = function (e, enableCallback) {\r\n        if (enableCallback === undefined) enableCallback = true;\r\n\r\n        var j2d = e.data.manager.j2d,\r\n            manager = e.data.manager,\r\n            keyCode = e.which,\r\n            keyMap = e.data.manager.keyMap;\r\n\r\n        for (var index in keyMap) {\r\n            if (keyMap.hasOwnProperty(index)) {\r\n                var value = keyMap[index];\r\n                if (!$.isArray(value[0]) && value[0] === keyCode && !!value[1]) {\r\n                    if (typeof value[1] === 'string') {\r\n                        value[1] = eval('(' + value[1] + ')');\r\n                    }\r\n                    if ((typeof value[1] === 'function') && enableCallback) {\r\n                        value[1](j2d, value[2]);\r\n                    }\r\n                    return true;\r\n                } else if ($.isArray(value[0])\r\n                    && manager.data.keysPressed.equals(value[0]) && !!value[1]\r\n                ) {\r\n                    if (typeof value[1] === 'string') {\r\n                        value[1] = eval('(' + value[1] + ')');\r\n                    }\r\n                    if (typeof value[1] === 'function' && enableCallback) {\r\n                        value[1](j2d, value[2]);\r\n                    }\r\n                    return true\r\n                }\r\n            }\r\n        }\r\n        return false\r\n    };\r\n    var events = {\r\n        onMouseClick: function (e) {\r\n            var manager = e.data.manager;\r\n            if (!manager.data.enabled || !manager.j2d.isPlay || !manager.j2d.element.hasClass('active')) return true;\r\n            var keysPressed = manager.data.keysPressed;\r\n            var keyCode = getKey(InputManager.key, e.which) || 'KEY_UNKNOWN_' + e.which;\r\n            var mouse = manager.data.mouse;\r\n\r\n            if (e.data.event !== 2) {\r\n                if (e.data.event === 0) {\r\n                    if (-1 === $.inArray(InputManager.key[keyCode], keysPressed)) {\r\n                        keysPressed.push(InputManager.key[keyCode]);\r\n\r\n                        if (manager.data.enableAdditionalData) {\r\n                            mouse.startPosition.x = e.pageX;\r\n                            mouse.startPosition.y = e.pageY;\r\n                            mouse.distance = 0;\r\n\r\n                            manager.data.timePressed = e.timeStamp;\r\n                        }\r\n                    }\r\n                    if (checkKeyMap(e, false) || manager.data.preventAll) {\r\n                        e.preventDefault();\r\n                    }\r\n                } else {\r\n                    if (checkKeyMap(e) || manager.data.preventAll) {\r\n                        e.preventDefault();\r\n                    }\r\n                    if (manager.data.enableAdditionalData) {\r\n                        mouse.previousDistance = mouse.distance;\r\n                        mouse.startPosition.x = 0;\r\n                        mouse.startPosition.y = 0;\r\n                    }\r\n\r\n                    keysPressed.splice(\r\n                        keysPressed.indexOf(InputManager.key[keyCode]), 1\r\n                    );\r\n                }\r\n                manager.element.trigger(e.data.event === 0 ?\r\n                    'mouseKeyDown' : 'mouseKeyUp', {keyCode: keyCode}\r\n                );\r\n            } else {\r\n                if (checkKeyMap(e, false)) {\r\n                    e.preventDefault();\r\n                }\r\n            }\r\n        },\r\n\r\n        onMouseWheel: function (e) {\r\n            var manager = e.data.manager;\r\n            if (!manager.data.enabled || !manager.j2d.isPlay || !manager.j2d.element.hasClass('active')) return true;\r\n            var keysPressed = manager.data.keysPressed;\r\n            var keyCode = (e.originalEvent.wheelDelta / 120 > 0) ?\r\n                getKey(InputManager.key, 4) : getKey(InputManager.key, 5);\r\n\r\n            e.which = (e.originalEvent.wheelDelta / 120 > 0) ? 4 : 5;\r\n\r\n            if (-1 === $.inArray(InputManager.key[keyCode], keysPressed)) {\r\n                keysPressed.push(InputManager.key[keyCode]);\r\n            }\r\n\r\n            if (checkKeyMap(e) || manager.data.preventAll) {\r\n                e.preventDefault();\r\n                manager.fixMouseWheel();\r\n            }\r\n\r\n            manager.element.trigger('mouseWheel', {keyCode: keyCode});\r\n        },\r\n\r\n        mouseWheelCancel: function (keysPressed, keyCode) {\r\n            keysPressed.splice(\r\n                keysPressed.indexOf(InputManager.key[keyCode]), 1\r\n            );\r\n        },\r\n\r\n        onMouseMove: function (e) {\r\n            var manager = e.data.manager;\r\n            var mouse = e.data.manager.data.mouse;\r\n\r\n            manager.data.mouse.currentPosition.x = e.pageX;\r\n            manager.data.mouse.currentPosition.y = e.pageY;\r\n\r\n            if (e.data.manager.data.enableAdditionalData) {\r\n                mouse.distance = Math.sqrt(\r\n                    Math.pow((mouse.currentPosition.x - mouse.startPosition.x), 2)\r\n                    + Math.pow((mouse.currentPosition.y - mouse.startPosition.y), 2)\r\n                ).toFixed(1);\r\n            }\r\n        },\r\n\r\n        onKeyboardPress: function (e) {\r\n            var manager = e.data.manager;\r\n            if (!manager.data.enabled || !manager.j2d.isPlay || !manager.element.hasClass('active')) return true;\r\n            var keysPressed = manager.data.keysPressed;\r\n            var keyCode = getKey(InputManager.key, e.which) || 'KEY_UNKNOWN_' + e.which;\r\n            if (e.data.event === 2 && true === manager.data.writeMode) {\r\n                var char = String.fromCharCode(e.which || e.keyCode);\r\n                e.preventDefault();\r\n                manager.element.focus().trigger('keyboardCharPress', {\r\n                    key: e.which || e.keyCode,\r\n                    keyCode: keyCode,\r\n                    char: char\r\n                });\r\n            }\r\n\r\n            if (e.data.event !== 2 && false === manager.data.writeMode) {\r\n                if (e.data.event === 0) {\r\n                    if (-1 === $.inArray(InputManager.key[keyCode], keysPressed)) {\r\n                        keysPressed.push(InputManager.key[keyCode]);\r\n                        if (manager.data.enableAdditionalData) {\r\n                            manager.data.timePressed = e.timeStamp;\r\n                        }\r\n                    }\r\n                    if (checkKeyMap(e, false) || manager.data.preventAll) {\r\n                        e.preventDefault();\r\n                    }\r\n                } else {\r\n                    if (checkKeyMap(e) || manager.data.preventAll) {\r\n                        e.preventDefault();\r\n                    }\r\n\r\n                    keysPressed.splice(\r\n                        keysPressed.indexOf(InputManager.key[keyCode]), 1\r\n                    );\r\n                }\r\n\r\n                manager.element.trigger(e.data.event === 0 ?\r\n                    'keyboardKeyDown' : 'keyboardKeyUp', {keyCode: keyCode, key: e.which || e.keyCode}\r\n                );\r\n            }\r\n\r\n            if (e.data.event !== 2 && true === manager.data.writeMode) {\r\n                manager.element.trigger(e.data.event === 0 ?\r\n                    'keyboardKeyDown' : 'keyboardKeyUp', {keyCode: keyCode, key: e.which || e.keyCode}\r\n                );\r\n            }\r\n        },\r\n\r\n        onTouchTap: function (e) {\r\n            var manager = e.data.manager;\r\n            if (!manager.data.enabled || !manager.j2d.isPlay || !manager.j2d.element.hasClass('active')) return true;\r\n            var keysPressed = manager.data.keysPressed;\r\n            var keyCode = getKey(InputManager.key, e.which + 1) || 'KEY_UNKNOWN_' + e.which;\r\n            var touch = e.originalEvent.touches[0] || e.originalEvent.changedTouches[0];\r\n            var mouse = manager.data.mouse;\r\n\r\n            if (e.data.event === 0) {\r\n                if (-1 === $.inArray(InputManager.key[keyCode], keysPressed)) {\r\n                    keysPressed.push(InputManager.key[keyCode]);\r\n                    if (manager.data.enableAdditionalData) {\r\n                        mouse.startPosition.x = touch.pageX;\r\n                        mouse.startPosition.y = touch.pageY;\r\n                        mouse.distance = 0;\r\n\r\n                        manager.data.timePressed = e.timeStamp;\r\n                    }\r\n                }\r\n                if (checkKeyMap(e, false) || manager.data.preventAll) {\r\n                    e.preventDefault();\r\n                }\r\n            } else {\r\n                if (checkKeyMap(e) || manager.data.preventAll) {\r\n                    e.preventDefault();\r\n                }\r\n\r\n                if (manager.data.enableAdditionalData) {\r\n                    mouse.previousDistance = mouse.distance;\r\n                    mouse.startPosition.x = 0;\r\n                    mouse.startPosition.y = 0;\r\n                }\r\n\r\n                keysPressed.splice(\r\n                    keysPressed.indexOf(InputManager.key[keyCode]), 1\r\n                );\r\n            }\r\n\r\n            manager.element.trigger(e.data.event === 0 ?\r\n                'mouseKeyDown' : 'mouseKeyUp', {keyCode: keyCode}\r\n            );\r\n        },\r\n\r\n        onTouchMove: function (e) {\r\n            var touch = e.originalEvent.touches[0] || e.originalEvent.changedTouches[0];\r\n            var mouse = e.data.manager.data.mouse;\r\n\r\n            mouse.currentPosition.x = touch.pageX.toFixed(0);\r\n            mouse.currentPosition.y = touch.pageY.toFixed(0);\r\n\r\n            if (e.data.manager.data.enableAdditionalData) {\r\n                mouse.distance = Math.sqrt(\r\n                    Math.pow((mouse.currentPosition.x - mouse.startPosition.x), 2)\r\n                    + Math.pow((mouse.currentPosition.y - mouse.startPosition.y), 2)\r\n                ).toFixed(1);\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * @param {InputManager} manager\r\n     */\r\n    var bindEvents = function (manager) {\r\n        var selector = '[guid=' + manager.id + ']';\r\n\r\n        $(document).on('contextmenu', selector, {manager: manager, event: 2}, events.onMouseClick);\r\n        $(document).on('mousedown', selector, {manager: manager, event: 0}, events.onMouseClick);\r\n        $(document).on('mouseup', selector, {manager: manager, event: 1}, events.onMouseClick);\r\n        $(document).on('mousewheel', selector, {manager: manager}, events.onMouseWheel);\r\n        $(document).on('mousemove', selector, {manager: manager}, events.onMouseMove);\r\n\r\n        $(document).on('keydown', null, {manager: manager, event: 0}, events.onKeyboardPress);\r\n        $(document).on('keyup', null, {manager: manager, event: 1}, events.onKeyboardPress);\r\n        $(document).on('keypress', null, {manager: manager, event: 2}, events.onKeyboardPress);\r\n\r\n        $(document).on('touchstart', selector, {manager: manager, event: 0}, events.onTouchTap);\r\n        $(document).on('touchend', selector, {manager: manager, event: 1}, events.onTouchTap);\r\n        $(document).on('touchmove ', selector, {manager: manager}, events.onTouchMove);\r\n    };\r\n\r\n    /**\r\n     * @param {InputManager} manager\r\n     */\r\n    var unbindEvents = function (manager) {\r\n        var selector = '[guid=' + manager.id + ']';\r\n\r\n        $(document).off('contextmenu', selector, {manager: manager, event: 1}, events.onMouseClick);\r\n        $(document).off('mousedown', selector, {manager: manager, event: 0}, events.onMouseClick);\r\n        $(document).off('mouseup', selector, {manager: manager, event: 1}, events.onMouseClick);\r\n        $(document).off('mousewheel', selector, {manager: manager}, events.onMouseWheel);\r\n        $(document).off('mousemove', selector, {manager: manager}, events.onMouseMove);\r\n\r\n        $(document).off('keydown', null, {manager: manager, event: 0}, events.onKeyboardPress);\r\n        $(document).off('keyup', null, {manager: manager, event: 1}, events.onKeyboardPress);\r\n        $(document).off('keypress', null, {manager: manager, event: 2}, events.onKeyboardPress);\r\n\r\n        $(document).off('touchstart', selector, {manager: manager, event: 0}, events.onTouchTap);\r\n        $(document).off('touchend', selector, {manager: manager, event: 1}, events.onTouchTap);\r\n        $(document).off('touchmove ', selector, {manager: manager}, events.onTouchMove);\r\n    };\r\n\r\n    /**\r\n     * @returns {InputManager}\r\n     */\r\n    InputManager.prototype.init = function () {\r\n        if (!this.data.enabled && global.j2dPlugin.pluginInit) {\r\n            bindEvents(this);\r\n\r\n            this.data.enabled = true;\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @returns {boolean}\r\n     */\r\n    InputManager.prototype.update = function () {\r\n        if (!this.data.enabled) return false;\r\n\r\n        var dX = this.j2d.scene.canvas.offsetWidth / this.j2d.scene.width,\r\n            dY = this.j2d.scene.canvas.offsetHeight / this.j2d.scene.height,\r\n            x = this.data.mouse.currentPosition.x / dX,\r\n            y = this.data.mouse.currentPosition.y / dY;\r\n\r\n        var offset = this.element.offset();\r\n        this.data.viewport.x = this.j2d.scene.viewport.x + x - offset.left;\r\n        this.data.viewport.y = this.j2d.scene.viewport.y + y - offset.top;\r\n        return true;\r\n    };\r\n\r\n    /**\r\n     * @returns {InputManager}\r\n     */\r\n    InputManager.prototype.flush = function () {\r\n        this.data.keysPressed.length = 0;\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @returns {InputManager}\r\n     */\r\n    InputManager.prototype.clear = function () {\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @returns {InputManager}\r\n     */\r\n    InputManager.prototype.fixMouseWheel = function () {\r\n        var keyPressed = this.data.keysPressed;\r\n        if (-1 !== $.inArray(InputManager.key.SCROLL_MOUSE_UP, keyPressed)) {\r\n            events.mouseWheelCancel(keyPressed, InputManager.key.SCROLL_MOUSE_UP);\r\n        } else if (-1 !== $.inArray(InputManager.key.SCROLL_MOUSE_DOWN, keyPressed)) {\r\n            events.mouseWheelCancel(keyPressed, InputManager.key.SCROLL_MOUSE_DOWN);\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @returns {InputManager}\r\n     */\r\n    InputManager.prototype.enable = function () {\r\n        if (!this.data.enabled) {\r\n            //bindEvents(this);\r\n            this.data.enabled = false;\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @returns {InputManager}\r\n     */\r\n    InputManager.prototype.disable = function () {\r\n        if (this.data.enabled) {\r\n            //unbindEvents(this);\r\n            this.data.enabled = false;\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @param {string} newKeyMap\r\n     * @returns {string}\r\n     */\r\n    InputManager.prototype.load = function (newKeyMap) {\r\n        var oldKeyMap = JSON.stringify(this.keyMap);\r\n        this.keyMap = JSON.parse(newKeyMap);\r\n        return oldKeyMap;\r\n    };\r\n\r\n    /**\r\n     * @returns {string}\r\n     */\r\n    InputManager.prototype.save = function () {\r\n        return JSON.stringify(this.keyMap);\r\n    };\r\n\r\n    /**\r\n     * KeyMap Manager\r\n     *\r\n     * @param mapObject\r\n     * @returns {InputManager}\r\n     */\r\n    InputManager.prototype.setKeys = function (mapObject) {\r\n        this.keyMap = $.extend(true, {}, this.keyMap, mapObject);\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @param {InputManager} manager\r\n     * @param {Array.<number>|number[]} keyList\r\n     * @returns {{keyList:, time:number}|boolean}\r\n     */\r\n    var getPressData = function (manager, keyList) {\r\n        if (!manager.data.enableAdditionalData) return true;\r\n        return {\r\n            keyList: keyList,\r\n            time: Date.now() - manager.data.timePressed\r\n        };\r\n    };\r\n\r\n    /**\r\n     * @returns {{current: number, previous: number}}\r\n     */\r\n    InputManager.prototype.getMouseMoveDistance = function () {\r\n        if (!this.data.enableAdditionalData) return 0;\r\n        return {current: this.data.mouse.distance, previous: this.data.mouse.previousDistance};\r\n    };\r\n\r\n    /* +Input Checkers **/\r\n    /**\r\n     * @param {Array.<number>|number[]|number} keyList\r\n     * @returns {boolean}\r\n     */\r\n    InputManager.prototype.checkPressedKeyList = function (keyList) {\r\n        if ($.isArray(keyList)) {\r\n            if (keyList.length !== this.data.keysPressed.length) {\r\n                return false;\r\n            } else if (this.data.keysPressed.equals(keyList)) {\r\n                this.fixMouseWheel();\r\n                return getPressData(this, keyList);\r\n            }\r\n            this.fixMouseWheel();\r\n            return false;\r\n        }\r\n        //if (!this.data.keysPressed.equals([])) console.log(this.data.keysPressed);\r\n        if (isNaN(keyList)) return false;\r\n        if (-1 !== this.data.keysPressed.indexOf(keyList)) {\r\n            this.fixMouseWheel();\r\n            return getPressData(this, keyList);\r\n        }\r\n        this.fixMouseWheel();\r\n        return false;\r\n    };\r\n\r\n    /**\r\n     * @param {string} key\r\n     * @returns {boolean}\r\n     */\r\n    InputManager.prototype.checkPressedKeyMap = function (key) {\r\n        if (this.keyMap[key] === undefined) return false;\r\n        var keyList = this.keyMap[key][0];\r\n\r\n        return this.checkPressedKeyList(keyList);\r\n    };\r\n\r\n    //InputManager.prototype.getPosition = function () {\r\n    //    return this.j2d.vector.v2f(this.data.viewport.x + 0.5, this.data.viewport.y + 0.5);\r\n    //};\r\n\r\n    //InputManager.prototype.onNode = function (id) {\r\n    //    if (!id.layer.visible) return false;\r\n    //    return (this.data.viewport.x > id.options.position.x && this.data.viewport.x < id.options.position.x + id.options.size.x) &&\r\n    //        (this.data.viewport.y > id.options.position.y && this.data.viewport.y < id.options.position.y + id.options.size.y);\r\n    //};\r\n    /* -Input Checkers **/\r\n\r\n    /* +Input Write Mode **/\r\n    /**\r\n     * @param {boolean} mode\r\n     * @returns {InputManager}\r\n     */\r\n    InputManager.prototype.setWriteMode = function (mode) {\r\n        this.data.writeMode = !!mode;\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @returns {boolean}\r\n     */\r\n    InputManager.prototype.isWriteMode = function () {\r\n        return !!this.data.writeMode;\r\n    };\r\n    /* -Input Write Mode **/\r\n\r\n    /**\r\n     * @param {string} image\r\n     * @returns {InputManager}\r\n     */\r\n    InputManager.prototype.setCursorImage = function (image) {\r\n        this.data.cursor.image = 'url(\"' + image + '\"), auto';\r\n        $(this.element).css('cursor', this.data.cursor.image);\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @param {boolean} enable\r\n     * @returns {InputManager}\r\n     */\r\n    InputManager.prototype.toggleCursor = function (enable) {\r\n        if (enable !== undefined) {\r\n            this.data.cursor.enable = !!enable;\r\n        } else {\r\n            this.data.cursor.enable = !this.data.cursor.enable;\r\n        }\r\n\r\n        if (!this.data.cursor.enable) {\r\n            this.data.cursor.image = $(this.j2d.element).css('cursor');\r\n            $(this.element).css('cursor', 'none');\r\n        } else {\r\n            $(this.element).css('cursor', this.data.cursor.image);\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @returns {boolean}\r\n     */\r\n    InputManager.prototype.isCursorVisible = function () {\r\n        return !!this.data.cursor.enable;\r\n    };\r\n    /** -Cursor **/\r\n\r\n    /** static keys arrayList **/\r\n    InputManager.key = {\r\n        KEY_MOUSE_LEFT: 1,\r\n        KEY_MOUSE_MIDDLE: 2,\r\n        KEY_MOUSE_RIGHT: 3,\r\n\r\n        SCROLL_MOUSE_UP: 4,\r\n        SCROLL_MOUSE_DOWN: 5,\r\n\r\n        KEY_BACKSPACE: 8,\r\n        KEY_TAB: 9,\r\n        KEY_ENTER: 13,\r\n        KEY_SHIFT: 16,\r\n        KEY_CTRL: 17,\r\n        KEY_ALT: 18,\r\n        KEY_PAUSE: 19,\r\n        KEY_BREAK: 19,\r\n        KEY_CAPS_LOCK: 20,\r\n        KEY_ESCAPE: 27,\r\n        KEY_SPACE_BAR: 32,\r\n        KEY_PAGE_UP: 33,\r\n        KEY_PAGE_DOWN: 34,\r\n        KEY_END: 35,\r\n        KEY_HOME: 36,\r\n        KEY_LEFT_ARROW: 37,\r\n        KEY_UP_ARROW: 38,\r\n        KEY_RIGHT_ARROW: 39,\r\n        KEY_DOWN_ARROW: 40,\r\n        KEY_INSERT: 45,\r\n        KEY_DELETE: 46,\r\n        KEY_0: 48,\r\n        KEY_1: 49,\r\n        KEY_2: 50,\r\n        KEY_3: 51,\r\n        KEY_4: 52,\r\n        KEY_5: 53,\r\n        KEY_6: 54,\r\n        KEY_7: 55,\r\n        KEY_8: 56,\r\n        KEY_9: 57,\r\n        KEY_A: 65,\r\n        KEY_B: 66,\r\n        KEY_C: 67,\r\n        KEY_D: 68,\r\n        KEY_E: 69,\r\n        KEY_F: 70,\r\n        KEY_G: 71,\r\n        KEY_H: 72,\r\n        KEY_I: 73,\r\n        KEY_J: 74,\r\n        KEY_K: 75,\r\n        KEY_L: 76,\r\n        KEY_M: 77,\r\n        KEY_N: 78,\r\n        KEY_O: 79,\r\n        KEY_P: 80,\r\n        KEY_Q: 81,\r\n        KEY_R: 82,\r\n        KEY_S: 83,\r\n        KEY_T: 84,\r\n        KEY_U: 85,\r\n        KEY_V: 86,\r\n        KEY_W: 87,\r\n        KEY_X: 88,\r\n        KEY_Y: 89,\r\n        KEY_Z: 90,\r\n        KEY_LEFT_WINDOW_KEY: 91,\r\n        KEY_RIGHT_WINDOW_KEY: 92,\r\n        KEY_SELECT_KEY: 93,\r\n        KEY_NUMPAD_0: 96,\r\n        KEY_NUMPAD_1: 97,\r\n        KEY_NUMPAD_2: 98,\r\n        KEY_NUMPAD_3: 99,\r\n        KEY_NUMPAD_4: 100,\r\n        KEY_NUMPAD_5: 101,\r\n        KEY_NUMPAD_6: 102,\r\n        KEY_NUMPAD_7: 103,\r\n        KEY_NUMPAD_8: 104,\r\n        KEY_NUMPAD_9: 105,\r\n        KEY_MULTIPLY: 106,\r\n        KEY_ADD: 107,\r\n        KEY_SUBTRACT: 109,\r\n        KEY_DECIMAL_POINT: 110,\r\n        KEY_DIVIDE: 111,\r\n        KEY_F1: 112,\r\n        KEY_F2: 113,\r\n        KEY_F3: 114,\r\n        KEY_F4: 115,\r\n        KEY_F5: 116,\r\n        KEY_F6: 117,\r\n        KEY_F7: 118,\r\n        KEY_F8: 119,\r\n        KEY_F9: 120,\r\n        KEY_F10: 121,\r\n        KEY_F11: 122,\r\n        KEY_F12: 123,\r\n        KEY_NUM_LOCK: 144,\r\n        KEY_SCROLL_LOCK: 145,\r\n        KEY_SEMI_COLON: 186,\r\n        KEY_EQUAL_SIGN: 187,\r\n        KEY_COMMA: 188,\r\n        KEY_DASH: 189,\r\n        KEY_PERIOD: 190,\r\n        KEY_FORWARD_SLASH: 191,\r\n        KEY_GRAVE_ACCENT: 192,\r\n        KEY_OPEN_BRACKET: 219,\r\n        KEY_BACK_SLASH: 220,\r\n        KEY_CLOSE_BRACKET: 221,\r\n        KEY_SINGLE_QUOTE: 222,\r\n        KEY_LEFT_COMMAND: 224,\r\n        KEY_RIGHT_COMMAND: 224\r\n    };\r\n\r\n    /**\r\n     * @param {Object} object\r\n     * @param {number} value\r\n     * @returns {T}\r\n     */\r\n    function getKey(object, value) {\r\n        return Object.keys(object).filter(function (key) {\r\n            return object[key] === value\r\n        })[0];\r\n    }\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.InputManager = InputManager;\r\n    if (global.J2D !== undefined) global.InputManager = InputManager;\r\n    return InputManager;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('io/MediaManager', [\r\n            'jquery',\r\n            'utils/ArrayMap',\r\n            'utils/Events',\r\n            'media/Audio',\r\n            'media/Sound'\r\n        ], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(\r\n            require('jquery'),\r\n            require('utils/ArrayMap'),\r\n            require('utils/Events'),\r\n            require('media/Audio'),\r\n            require('media/Sound')\r\n        );\r\n    } else {\r\n        factory(\r\n            root.jQuery,\r\n            root.ArrayMap,\r\n            root.Events,\r\n            root.Audio,\r\n            root.Sound\r\n        );\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function ($, ArrayMap, Events, Audio, Sound) {\r\n    \"use strict\";\r\n\r\n    var AudioNode = global.Audio;\r\n    var audioContext = false;\r\n    var html5Audio = false;\r\n\r\n    try {\r\n        //noinspection JSUnresolvedVariable\r\n        var AudioContext = global.AudioContext || global.webkitAudioContext;\r\n        audioContext = new AudioContext();\r\n    } catch (e) {\r\n        console.warn('Web Audio API is not supported in your browser');\r\n    }\r\n\r\n    try {\r\n        //noinspection JSUnresolvedFunction\r\n        html5Audio = !!new AudioNode();\r\n    } catch (e) {\r\n        console.warn('HTML5 Audio is not supported in your browser');\r\n    }\r\n\r\n    if (audioContext) {\r\n        var masterGain = (audioContext.createGain === undefined)\r\n            ? audioContext.createGainNode()\r\n            : audioContext.createGain();\r\n        masterGain.gain.value = 1;\r\n        masterGain.connect(audioContext.destination);\r\n    }\r\n\r\n    /* MediaManager */\r\n\r\n    /**\r\n     * @param {J2D} j2d\r\n     * @param {MediaManager.defaults|Object|undefined} [data]\r\n     * @constructor\r\n     */\r\n    var MediaManager = function (j2d, data) {\r\n        if (data === undefined) data = {};\r\n        var soundManager = this;\r\n        this.j2d = j2d;\r\n        this.data = $.extend(true, {}, MediaManager.defaults, data);\r\n        this.events = new Events();\r\n        this.media = new ArrayMap();\r\n\r\n        this.media.add('sounds', new ArrayMap());\r\n        this.media.add('audios', new ArrayMap());\r\n        this.media.add('videos', new ArrayMap());\r\n\r\n        this.volume = this.data.volume * 100;\r\n        this.iOSEnabled = false;\r\n\r\n        if (audioContext || html5Audio) {\r\n            var test = new AudioNode();\r\n            this.data.codecs = {\r\n                mp3: !!test.canPlayType('audio/mpeg;').replace(/^no$/, ''),\r\n                opus: !!test.canPlayType('audio/ogg; codecs=\"opus\"').replace(/^no$/, ''),\r\n                ogg: !!test.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, ''),\r\n                wav: !!test.canPlayType('audio/wav; codecs=\"1\"').replace(/^no$/, ''),\r\n                aac: !!test.canPlayType('audio/aac;').replace(/^no$/, ''),\r\n                m4a: !!(test.canPlayType('audio/x-m4a;') || test.canPlayType('audio/m4a;') || test.canPlayType('audio/aac;')).replace(/^no$/, ''),\r\n                mp4: !!(test.canPlayType('audio/x-mp4;') || test.canPlayType('audio/mp4;') || test.canPlayType('audio/aac;')).replace(/^no$/, ''),\r\n                weba: !!test.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/, '')\r\n            };\r\n            test = null;\r\n        }\r\n\r\n        Object.defineProperty(this, 'volume', {\r\n            get: function () {\r\n                return soundManager.data.volume * 100;\r\n            },\r\n            set: function (value) {\r\n                soundManager.data.volume = parseFloat(value / 100);\r\n\r\n                if (value >= 0 && value <= 1) {\r\n                    if (audioContext) {\r\n                        masterGain.gain.value = soundManager.data.volume;\r\n                    } else {\r\n                        var sounds = soundManager.media.get('sounds');\r\n                        for (var key in sounds) {\r\n                            if (sounds.hasOwnProperty(key) && !sounds[key].webAudio) {\r\n                                for (var i = 0; i < sounds[key].audioNode.length; i++) {\r\n                                    sounds[key].audioNode[i].volume = sounds[key].volume * soundManager.data.volume;\r\n                                }\r\n                            }\r\n                        }\r\n                        sounds = null;\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(this, 'muted', {\r\n            get: function () {\r\n                return !!soundManager.data.muted;\r\n            },\r\n            set: function (value) {\r\n                soundManager.data.muted = !!value;\r\n\r\n                if (audioContext) {\r\n                    masterGain.gain.value = soundManager.data.muted ? 0 : soundManager.data.volume;\r\n                } else {\r\n                    var sounds = soundManager.media.get('sounds');\r\n                    for (var key in sounds) {\r\n                        if (sounds.hasOwnProperty(key) && sounds[key].webAudio === false) {\r\n                            for (var i = 0; i < sounds[key].audioNode.length; i++) {\r\n                                sounds[key].audioNode[i].muted = soundManager.data.muted;\r\n                            }\r\n                        }\r\n                    }\r\n                    sounds = null;\r\n                }\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(this, 'iOSEnable', {\r\n            get: function () {\r\n                return !!soundManager.data.iOSAutoEnable;\r\n            },\r\n            set: function (value) {\r\n                if (audioContext && (soundManager.iOSEnabled || !/iPhone|iPad|iPod/i.test(navigator.userAgent))) {\r\n                    return value;\r\n                }\r\n                soundManager.iOSEnabled = false;\r\n\r\n                var unlock = function () {\r\n                    var buffer = audioContext.createBuffer(1, 1, 22050);\r\n                    var source = audioContext.createBufferSource();\r\n                    source.buffer = buffer;\r\n                    source.connect(audioContext.destination);\r\n\r\n                    if (source.start === undefined) {\r\n                        source.noteOn(0);\r\n                    } else {\r\n                        source.start(0);\r\n                    }\r\n\r\n                    setTimeout(function () {\r\n                        if ((source.playbackState === source.PLAYING_STATE\r\n                            || source.playbackState === source.FINISHED_STATE)) {\r\n                            soundManager.iOSEnabled = true;\r\n                            soundManager.data.iOSAutoEnable = false;\r\n\r\n                            global.removeEventListener('touchend', unlock, false);\r\n                        }\r\n                    }, 0);\r\n                };\r\n                global.addEventListener('touchend', unlock, false);\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(this, 'isSupportAudio', {\r\n            get: function () {\r\n                return !audioContext && !html5Audio;\r\n            }\r\n        });\r\n    };\r\n\r\n    MediaManager.defaults = {\r\n        volume: 1,\r\n        muted: false,\r\n        codecs: {},\r\n        iOSAutoEnable: true\r\n    };\r\n\r\n    MediaManager.prototype.getAudioContext = function () {\r\n        return audioContext;\r\n    };\r\n\r\n    MediaManager.prototype.getMasterGain = function () {\r\n        return masterGain;\r\n    };\r\n\r\n    MediaManager.prototype.mute = function () {\r\n        this.muted = true;\r\n        return this;\r\n    };\r\n\r\n    MediaManager.prototype.unMute = function () {\r\n        this.muted = false;\r\n        return this;\r\n    };\r\n\r\n    MediaManager.prototype.isSupportCodec = function (fileExtension) {\r\n        return !!this.data.codecs[fileExtension];\r\n    };\r\n\r\n    MediaManager.prototype.addSound = function (data) {\r\n        new Sound(data, this);\r\n        return this;\r\n    };\r\n\r\n    MediaManager.prototype.addAudio = function (data) {\r\n        new Audio(data, this);\r\n        return this;\r\n    };\r\n\r\n    MediaManager.prototype.addVideo = function (data) {\r\n        //new Video(this, data);\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @param {string} id\r\n     * @returns {Sound}\r\n     */\r\n    MediaManager.prototype.sound = function (id) {\r\n        return this.media.get('sounds').get(id);\r\n    };\r\n\r\n    MediaManager.prototype.audio = function (id) {\r\n        return this.media.get('audios').get(id);\r\n    };\r\n\r\n    MediaManager.prototype.video = function (id) {\r\n        return this.media.get('videos').get(id);\r\n    };\r\n\r\n    MediaManager.prototype.removeSound = function (id) {\r\n        if (this.media.get('sounds').contains(id)) {\r\n            this.media.get('sounds').get(id).stop();\r\n            this.media.get('sounds').remove(id);\r\n        }\r\n        return this;\r\n    };\r\n\r\n    MediaManager.prototype.removeAudio = function (id) {\r\n        if (this.media.get('audios').contains(id)) {\r\n            this.media.get('audios').get(id).stop();\r\n            this.media.get('audios').remove(id);\r\n        }\r\n        return this;\r\n    };\r\n\r\n    MediaManager.prototype.removeVideo = function (id) {\r\n        if (this.media.get('videos').contains(id)) {\r\n            this.media.get('videos').get(id).stop();\r\n            this.media.get('videos').remove(id);\r\n        }\r\n        return this;\r\n    };\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.MediaManager = MediaManager;\r\n    if (global.J2D !== undefined) global.MediaManager = MediaManager;\r\n    return MediaManager;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('core/FrameManager', ['utils/ArrayMap'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(require('utils/ArrayMap'));\r\n    } else {\r\n        factory(root.ArrayMap);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global,\r\n    /**\r\n     * @param {Function} ArrayMap\r\n     * @returns {FrameManager}\r\n     */\r\n    function (ArrayMap) {\r\n        \"use strict\";\r\n\r\n        /** @type FrameManager */\r\n        var instance;\r\n        var engineStack = new ArrayMap(), dataStack = new ArrayMap();\r\n        var timestamp = 0;\r\n\r\n        var options = {\r\n            frameLimit: 60,\r\n            frameRun: false,\r\n            breakAnimationFrame: false\r\n        };\r\n\r\n        var requestAnimationFrame = (function () {\r\n            return global.requestAnimationFrame ||\r\n                global.webkitRequestAnimationFrame ||\r\n                global.mozRequestAnimationFrame ||\r\n                global.oRequestAnimationFrame ||\r\n                global.msRequestAnimationFrame ||\r\n                (function (callback) {\r\n                    if (!options.breakAnimationFrame) {\r\n                        if (timestamp >= Number.MAX_SAFE_INTEGER - 1) timestamp = 0;\r\n                        if (timestamp === 0) timestamp = Date.now();\r\n\r\n                        global.setTimeout(callback.bind(this, Date.now() - timestamp), 1000.0 / options.frameLimit);\r\n                    } else {\r\n                        options.breakAnimationFrame = false\r\n                    }\r\n                });\r\n        })();\r\n\r\n        var cancelAnimationFrame = (function () {\r\n            timestamp = 0;\r\n            return global.cancelAnimationFrame ||\r\n                global.webkitCancelAnimationFrame ||\r\n                global.mozCancelAnimationFrame ||\r\n                global.oCancelAnimationFrame ||\r\n                global.msCancelAnimationFrame;\r\n        })();\r\n\r\n\r\n        /**\r\n         * @constructor\r\n         */\r\n        var FrameManager = function () {\r\n        };\r\n\r\n        /**\r\n         * @param {string} name\r\n         * @param {Function|callback} engine\r\n         * @param {Object} [params]\r\n         * @returns {FrameManager}\r\n         */\r\n        FrameManager.prototype.start = function (name, engine, params) {\r\n            var data = {\r\n                j2d: null,\r\n                frameLimit: options.frameLimit,\r\n                now: 0,\r\n                deltaTime: 0,\r\n                lastTime: 0,\r\n                sceneStartTime: 0,\r\n                sceneSkipTime: 0,\r\n\r\n                asyncUpdate: true,\r\n                asyncRender: true\r\n            };\r\n\r\n            if (params.frameLimit !== undefined && params.frameLimit <= options.frameLimit) data.frameLimit = params.frameLimit;\r\n\r\n            if (params.j2d !== undefined) {\r\n                data.j2d = params.j2d;\r\n            } else {\r\n                throw 'j2d not transported to FrameManager.start(id, engine, {... j2d: j2d ...});';\r\n            }\r\n\r\n            data.interval = 1000.0 / data.frameLimit;\r\n            data.lastTime = Date.now();\r\n\r\n            engineStack.add(name, engine);\r\n            dataStack.add(name, data);\r\n            if (!options.frameRun) this.pulse();\r\n\r\n            return this;\r\n        };\r\n\r\n        /**\r\n         * @param {string} name\r\n         * @returns {FrameManager}\r\n         */\r\n        FrameManager.prototype.stop = function (name) {\r\n            engineStack.remove(name);\r\n            dataStack.remove(name);\r\n            return this;\r\n        };\r\n\r\n        /**\r\n         * @returns {FrameManager}\r\n         */\r\n        FrameManager.prototype.pulse = function () {\r\n            this.runMainLoop(Date.now());\r\n            return this;\r\n        };\r\n\r\n        /**\r\n         * @param {number} timestamp\r\n         * @param {FrameManager} [frameManager]\r\n         */\r\n        FrameManager.prototype.runMainLoop = function (timestamp, frameManager) {\r\n            if (frameManager === undefined) frameManager = this;\r\n\r\n            if (engineStack.length <= 0 && options.frameRun) {\r\n                options.breakAnimationFrame = true;\r\n                options.frameRun = false;\r\n                return cancelAnimationFrame(this.runMainLoop);\r\n            }\r\n            options.frameRun = true;\r\n\r\n            requestAnimationFrame(function (timestamp) {\r\n                frameManager.runMainLoop(timestamp, frameManager);\r\n            });\r\n\r\n            engineStack.each(function (index) {\r\n                if (engineStack.hasOwnProperty(index) && 'object' === typeof engineStack[index]) {\r\n                    var engine = engineStack[index];\r\n                    var data = dataStack[index];\r\n\r\n                    data.now = Date.now();\r\n                    data.deltaTime = (data.now - data.lastTime) / 100.0;\r\n\r\n                    if (data.j2d.data.io && !data.j2d.data.pause) data.j2d.data.io.update();\r\n\r\n                    if (!data.j2d.data.pause) {\r\n                        if (engine.update !== undefined && 'function' === typeof engine.update) {\r\n                            if (data.asyncUpdate) {\r\n                                setTimeout(engine.update.bind(this, timestamp, data), 0);\r\n                            } else {\r\n                                engine.update(timestamp, data);\r\n                            }\r\n                        }\r\n\r\n                        if ((data.deltaTime * 100.0) > data.interval) {\r\n                            data.lastTime = data.now - ((data.deltaTime * 100.0) % data.interval);\r\n\r\n                            if (engine.render !== undefined && 'function' === typeof engine.render) {\r\n                                if (data.asyncRender) {\r\n                                    setTimeout(engine.render.bind(this, timestamp, data), 0);\r\n                                } else {\r\n                                    engine.render(timestamp, data);\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    if (data.j2d.data.io && !data.j2d.data.pause) data.j2d.data.io.clear();\r\n                }\r\n            });\r\n        };\r\n\r\n        /**\r\n         * @param {number} frameLimit\r\n         * @returns {FrameManager}\r\n         */\r\n        FrameManager.prototype.setDefaultFrameLimit = function (frameLimit) {\r\n            if (frameLimit <= 60 && frameLimit > 0) {\r\n                options.frameLimit = frameLimit\r\n            }\r\n            return this;\r\n        };\r\n\r\n        /**\r\n         * @singleton\r\n         * @returns {FrameManager}\r\n         */\r\n        FrameManager.Init = function () {\r\n            if (global.J2D !== undefined) {\r\n                return global.instanceFrameManager || (global.instanceFrameManager = new FrameManager());\r\n            } else {\r\n                return instance || (instance = new FrameManager());\r\n            }\r\n        };\r\n\r\n        if (typeof module === 'object' && typeof module.exports === 'object') module.exports.FrameManager = FrameManager;\r\n        if (global.J2D === undefined) global.FrameManager = FrameManager;\r\n        return FrameManager;\r\n    }\r\n));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('core/LayersManager', ['utils/ArrayMap', 'nodes/BaseNode', 'nodes/CollectionNode'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(require('utils/ArrayMap'), require('nodes/BaseNode'), require('nodes/CollectionNode'));\r\n    } else {\r\n        factory(root.ArrayMap, root.BaseNode, root.CollectionNode);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function (ArrayMap, BaseNode, CollectionNode) {\r\n    \"use strict\";\r\n\r\n    //TODO:: fix this!!!\r\n    var LayersManager = function () {\r\n        /** @type CollectionNode */\r\n        this.globalCollection = new CollectionNode({id: 'GlobalLayer'});\r\n\r\n        /** @type Array.<CollectionNode>|CollectionNode[] */\r\n        this.layers = [];\r\n\r\n        /** @type number */\r\n        this.index = 1000;\r\n    };\r\n\r\n    /**\r\n     * @param {string} name\r\n     * @param {number} [zIndex]\r\n     * @param {CollectionNode|undefined} [node]\r\n     * @returns {LayersManager}\r\n     */\r\n    LayersManager.prototype.addLayer = function (name, zIndex, node) {\r\n        name = name || 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n                var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\r\n                return v.toString(16);\r\n            });\r\n\r\n        if (node === undefined || node instanceof CollectionNode) {\r\n            if (zIndex === undefined) {\r\n                zIndex = this.index;\r\n                this.index++;\r\n            } else {\r\n                zIndex += 1000;\r\n            }\r\n\r\n            node = node || new CollectionNode({id: name, zIndex: zIndex});\r\n\r\n            this.globalCollection.add(node, name);\r\n            this.layers[zIndex] = node;\r\n\r\n            return this;\r\n        }\r\n        // throw new InvalidArgumentException('Unknown node type to add as layers');\r\n    };\r\n\r\n    /**\r\n     * @param {string} name\r\n     * @returns {LayersManager}\r\n     */\r\n    LayersManager.prototype.removeLayer = function (name) {\r\n        delete this.layers[this.globalCollection.get(name).zIndex];\r\n        this.globalCollection.remove(null, name);\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @param {string} name\r\n     * @returns {CollectionNode|null}\r\n     */\r\n    LayersManager.prototype.getLayer = function (name) {\r\n        if (this.globalCollection.has(name)) {\r\n            return this.globalCollection.get(name);\r\n        }\r\n        return null;\r\n    };\r\n\r\n    /**\r\n     * @param {string} name\r\n     * @param {number} zIndex\r\n     * @returns {LayersManager}\r\n     */\r\n    LayersManager.prototype.setZIndex = function (name, zIndex) {\r\n        if (this.globalCollection.has(name)) {\r\n            delete this.layers[this.globalCollection.get(name).zIndex];\r\n            this.globalCollection.get(name).zIndex = zIndex;\r\n            this.layers[zIndex] = this.globalCollection.get(name);\r\n        }\r\n        return this;\r\n    };\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.LayersManager = LayersManager;\r\n    if (global.J2D !== undefined) global.LayersManager = LayersManager;\r\n    return LayersManager;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n/*\r\n * TODO:: GameStateManager to Scene\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('core/SceneManager', [\r\n            'jquery',\r\n            'core/WebGL2D',\r\n            'core/FrameManager',\r\n            'core/ViewportManager',\r\n            'core/LayersManager'\r\n        ], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(\r\n            require('jquery'),\r\n            require('core/WebGL2D'),\r\n            require('core/FrameManager'),\r\n            require('core/ViewportManager'),\r\n            require('core/LayersManager')\r\n        );\r\n    } else {\r\n        factory(\r\n            root.jQuery,\r\n            root.WebGL2D,\r\n            root.FrameManager,\r\n            root.ViewportManager,\r\n            root.LayersManager\r\n        );\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function ($, WebGL2D, FrameManager, ViewportManager, LayersManager) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * @param {J2D} j2d\r\n     * @constructor\r\n     *\r\n     * @property {SceneManager.defaults} data\r\n     *\r\n     * @property {string} backgroundColor\r\n     * @property {number} opacity\r\n     * @property {boolean} visible\r\n     * @property {number} zIndex\r\n     * @property {{x:number, y:number}} viewport\r\n     */\r\n    var SceneManager = function (j2d) {\r\n        var sceneManager = this;\r\n\r\n        /** @type J2D */\r\n        this.j2d = j2d;\r\n\r\n        /** @type {HTMLCanvasElement} */\r\n        this.canvas = null;\r\n\r\n        /** @type {CanvasRenderingContext2D} */\r\n        this.context = null;\r\n\r\n        /** @type {FrameManager} */\r\n        this.frameManager = FrameManager.Init();\r\n\r\n        /** @type {LayersManager} */\r\n        this.layersManager = new LayersManager();\r\n\r\n        /** @type {ViewportManager} */\r\n        this.viewportManager = new ViewportManager();\r\n\r\n        this.initLayers();\r\n\r\n        Object.defineProperty(this, 'backgroundColor', {\r\n            get: function () {\r\n                return sceneManager.data.backgroundColor;\r\n            },\r\n            set: function (value) {\r\n                sceneManager.data.backgroundColor = value;\r\n                sceneManager.context.fillStyle = value;\r\n                sceneManager.context.fillRect(0, 0, sceneManager.data.width, sceneManager.data.height);\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(this, 'opacity', {\r\n            get: function () {\r\n                return sceneManager.data.opacity;\r\n            },\r\n            set: function (value) {\r\n                sceneManager.data.opacity = value;\r\n                sceneManager.canvas.style.opacity = value;\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(this, 'visible', {\r\n            get: function () {\r\n                return sceneManager.data.visible;\r\n            },\r\n            set: function (value) {\r\n                sceneManager.data.visible = !!value;\r\n                sceneManager.canvas.style.display = (!!value) ? 'block' : 'none';\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(this, 'zIndex', {\r\n            get: function () {\r\n                return 1000 - sceneManager.data.zIndex;\r\n            },\r\n            set: function (value) {\r\n                sceneManager.data.zIndex = 1000 + value;\r\n                sceneManager.canvas.style.zIndex = 1000 + value;\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(this, 'viewport', {\r\n            get: function () {\r\n                return sceneManager.data.viewport;\r\n            },\r\n            set: function () {\r\n            }\r\n        });\r\n    };\r\n\r\n    SceneManager.defaults = {\r\n        width: 0,\r\n        height: 0,\r\n\r\n        originalWidth: 0,\r\n        originalHeight: 0,\r\n        originalMargin: 0,\r\n\r\n        visible: true,\r\n        position: 'absolute',\r\n        top: 0,\r\n        left: 0,\r\n        zIndex: 1000,\r\n        opacity: 1.0,\r\n        backgroundColor: false,\r\n\r\n        frameLimit: 60,\r\n\r\n        enableFullScreen: false,\r\n\r\n        viewport: {x: 0, y: 0},\r\n\r\n        /** @type Function */\r\n        gameState: function () {\r\n            this.id = 'DefaultGameState';\r\n        }\r\n    };\r\n\r\n    /**\r\n     * @returns {SceneManager}\r\n     */\r\n    SceneManager.prototype.fixGameStateRender = function () {\r\n        var sceneManager = this;\r\n        if (typeof this.data.gameState === 'function' && this.data.gameState.prototype.render === undefined) {\r\n            this.data.gameState.prototype.render = function (timestamp, data) {\r\n                sceneManager.clear().fillBackground().render(data);\r\n            };\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @param {SceneManager.defaults|Object|undefined} options\r\n     * @returns {SceneManager}\r\n     */\r\n    SceneManager.prototype.init = function (options) {\r\n        this.data = $.extend(true, {}, SceneManager.defaults, options);\r\n\r\n        this.j2d.trigger('beforeInit');\r\n\r\n        this.data.originalWidth = this.data.width;\r\n        this.data.originalHeight = this.data.height;\r\n        this.data.originalMargin = this.j2d.element.css('margin');\r\n\r\n        this.j2d.element.width(this.data.width).height(this.data.height);\r\n\r\n        this.initCanvas();\r\n\r\n        this.viewportManager.setScreen({\r\n            x: this.data.width,\r\n            y: this.data.height\r\n        }).setDefaultViewport({\r\n            offset: {\r\n                x: 0.0,\r\n                y: 0.0\r\n            },\r\n            size: {\r\n                x: this.data.width,\r\n                y: this.data.height\r\n            },\r\n            scale: 1.0,\r\n            angle: 0.0\r\n        });\r\n\r\n        this.j2d.trigger('afterInit');\r\n\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @returns {SceneManager}\r\n     */\r\n    SceneManager.prototype.initLayers = function () {\r\n        if (!this.layersManager.getLayer('scene')) {\r\n            this.layersManager.addLayer('scene', 0);\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @returns {SceneManager}\r\n     */\r\n    SceneManager.prototype.initCanvas = function () {\r\n        if ($(this.j2d.element.selector + ' canvas').length === 0) {\r\n            this.canvas = document.createElement('canvas');\r\n\r\n            this.canvas.width = this.data.width;\r\n            this.canvas.height = this.data.height;\r\n            this.canvas.style.zIndex = this.data.zIndex;\r\n            this.canvas.style.position = this.data.position;\r\n\r\n            this.canvas.style.left = this.data.left;\r\n            this.canvas.style.top = this.data.top;\r\n\r\n            if (this.j2d.data.webGL) {\r\n                WebGL2D.enable(this.canvas);\r\n                this.context = this.canvas.getContext('WebGL-2d');\r\n            } else {\r\n                this.context = this.canvas.getContext('2d');\r\n            }\r\n\r\n            if (!this.j2d.data.smoothing) {\r\n                this.j2d.util.disableSmoothing(this.context);\r\n            }\r\n\r\n            this.context.shadowColor = 'rgba(0,0,0,0)';\r\n            if (this.data.backgroundColor) this.backgroundColor = this.data.backgroundColor;\r\n            if (this.data.opacity) this.opacity = this.data.opacity;\r\n            if (this.data.visible) this.visible = this.data.visible;\r\n            if (this.data.zIndex) this.zIndex = 1000 - this.data.zIndex;\r\n\r\n            this.j2d.element.append(this.canvas);\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @param {{x:number, y:number}|Vector2d} [pos]\r\n     * @param {{x:number, y:number}|Vector2d} [size]\r\n     * @returns {SceneManager}\r\n     */\r\n    SceneManager.prototype.clear = function (pos, size) {\r\n        if (pos !== undefined && size !== undefined) {\r\n            this.context.clearRect(pos.x - this.viewport.x, pos.y - this.viewport.y, size.x, size.y);\r\n        } else {\r\n            this.context.clearRect(0, 0, this.data.width, this.data.height);\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @param {number} width\r\n     * @param {number} height\r\n     * @returns {SceneManager}\r\n     */\r\n    SceneManager.prototype.resize = function (width, height) {\r\n        this.canvas.width = this.data.width = width;\r\n        this.canvas.height = this.data.height = height;\r\n\r\n        if (this.data.backgroundColor) {\r\n            this.context.save();\r\n\r\n            this.clear();\r\n            this.backgroundColor = this.data.backgroundColor;\r\n\r\n            this.context.restore();\r\n        }\r\n        if (!this.j2d.data.smoothing) {\r\n            this.j2d.util.disableSmoothing(this.context);\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @param {Function|callback} gameState\r\n     * @returns {SceneManager}\r\n     */\r\n    SceneManager.prototype.setGameState = function (gameState) {\r\n        this.data.gameState = gameState || function () {\r\n                console.warn('Error in game state function!');\r\n            };\r\n        this.frameManager.stop(this.j2d.data.id);\r\n\r\n        this.fixGameStateRender();\r\n        this.frameManager.start(this.j2d.data.id, new this.data.gameState(), {\r\n            j2d: this.j2d,\r\n            frameLimit: this.data.frameLimit\r\n        });\r\n\r\n        this.j2d.trigger('changedGameState');\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @param {Function|callback} callback\r\n     * @param {*} data\r\n     * @returns {SceneManager}\r\n     */\r\n    SceneManager.prototype.async = function (callback, data) {\r\n        setTimeout(callback.call(callback, data), 0);\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @returns {SceneManager}\r\n     */\r\n    SceneManager.prototype.start = function () {\r\n        if (this.j2d.data.io) {\r\n            this.j2d.data.io.init();\r\n        }\r\n        this.j2d.trigger('beforeStart');\r\n\r\n        this.frameManager.stop(this.j2d.data.id);\r\n\r\n        this.fixGameStateRender();\r\n        this.frameManager.start(this.j2d.data.id, new this.data.gameState(), {\r\n            j2d: this.j2d,\r\n            frameLimit: this.data.frameLimit\r\n        });\r\n\r\n        this.j2d.trigger('afterStart');\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @returns {SceneManager}\r\n     */\r\n    SceneManager.prototype.stop = function () {\r\n        this.frameManager.stop(this.j2d.data.id);\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @param {boolean} [fullscreen]\r\n     * @returns {SceneManager}\r\n     */\r\n    SceneManager.prototype.fullScreen = function (fullscreen) {\r\n        var element = document.getElementById(this.j2d.element.attr('id'));\r\n\r\n        if (undefined === element.requestFullscreen) {\r\n            //noinspection JSUnresolvedVariable\r\n            element.requestFullscreen = element.webkitRequestFullscreen\r\n                || element.webkitRequestFullScreen\r\n                || element.mozRequestFullScreen\r\n                || element.msRequestFullscreen;\r\n        }\r\n\r\n        if (undefined === document.exitFullscreen) {\r\n            //noinspection JSUnresolvedVariable\r\n            document.exitFullscreen = document.webkitExitFullscreen\r\n                || document.webkitCancelFullScreen\r\n                || document.mozCancelFullScreen\r\n                || document.msExitFullscreen;\r\n        }\r\n        if (fullscreen) {\r\n            element.requestFullscreen();\r\n        } else {\r\n            document.exitFullscreen();\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @param {boolean} [fullscreen]\r\n     * @returns {SceneManager}\r\n     */\r\n    SceneManager.prototype.resizeToFullPage = function (fullscreen) {\r\n        $('div.canvas[guid]:not(.active)').toggle(fullscreen);\r\n\r\n        var j2d = this.j2d;\r\n        var sceneManager = this;\r\n\r\n        if (fullscreen) {\r\n            sceneManager.data.originalWidth = sceneManager.data.width;\r\n            sceneManager.data.originalHeight = sceneManager.data.height;\r\n\r\n            sceneManager.resize(j2d.device.width, j2d.device.height);\r\n            sceneManager.data.enableFullscreen = true;\r\n\r\n            j2d.element\r\n                .width(j2d.device.width)\r\n                .height(j2d.device.height)\r\n                .css('margin', 0);\r\n\r\n            sceneManager.viewportManager.setScreen({\r\n                x: j2d.device.width,\r\n                y: j2d.device.height\r\n            }).setOffset({\r\n                x: -(j2d.device.width - sceneManager.data.originalWidth) / 2,\r\n                y: -(j2d.device.height - sceneManager.data.originalHeight) / 2\r\n            });\r\n        } else {\r\n            sceneManager.resize(sceneManager.data.originalWidth, sceneManager.data.originalHeight);\r\n            sceneManager.data.enableFullscreen = false;\r\n\r\n            j2d.element\r\n                .width(sceneManager.data.originalWidth)\r\n                .height(sceneManager.data.originalHeight)\r\n                .css('margin', sceneManager.data.originalMargin);\r\n\r\n            sceneManager.viewportManager.setScreen({\r\n                x: sceneManager.data.originalWidth,\r\n                y: sceneManager.data.originalHeight\r\n            }).setOffset({\r\n                x: 0,\r\n                y: 0\r\n            });\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @param {J2D} j2d\r\n     * @param {{fullscreen: boolean}} data\r\n     * @returns {SceneManager}\r\n     */\r\n    SceneManager.prototype.toggleFullScreen = function (j2d, data) {\r\n        if (data === undefined) {\r\n            data = {fullscreen: false};\r\n        }\r\n        if (!j2d.scene.enableFullscreen || data.fullscreen) {\r\n            j2d.scene.fullScreen(true);\r\n        } else {\r\n            j2d.scene.fullScreen(false);\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @returns {CollectionNode|null}\r\n     */\r\n    SceneManager.prototype.getSceneLayer = function () {\r\n        return this.layersManager.getLayer('scene');\r\n    };\r\n\r\n    /**\r\n     * @returns {SceneManager}\r\n     */\r\n    SceneManager.prototype.fillBackground = function () {\r\n        if (this.data.backgroundColor) {\r\n            this.backgroundColor = this.data.backgroundColor;\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @param {Object} data\r\n     * @returns {SceneManager}\r\n     */\r\n    SceneManager.prototype.render = function (data) {\r\n        var sceneManager = this;\r\n        sceneManager.layersManager.layers.forEach(function (value, index) {\r\n            sceneManager.layersManager.layers[index].render(\r\n                sceneManager.context,\r\n                sceneManager.viewportManager.getViewport(),\r\n                sceneManager.layersManager.globalCollection,\r\n                data || {}\r\n            );\r\n        });\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @param {BaseNode} node\r\n     * @param {string} [key]\r\n     * @returns {SceneManager}\r\n     */\r\n    SceneManager.prototype.add = function (node, key) {\r\n        if (this.layersManager.globalCollection.has('scene')) {\r\n            this.layersManager.globalCollection.get('scene').add(node, key);\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @param {BaseNode} [node]\r\n     * @param {string} [key]\r\n     * @returns {SceneManager}\r\n     */\r\n    SceneManager.prototype.remove = function (node, key) {\r\n        if (this.layersManager.globalCollection.has('scene')) {\r\n            this.layersManager.globalCollection.get('scene').remove(node, key);\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @param {CameraNode} node\r\n     * @returns {SceneManager}\r\n     */\r\n    SceneManager.prototype.registerCamera = function (node) {\r\n        this.viewportManager.addCamera(node.data.id, node);\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * Hack to mode without Cameras\r\n     * @returns {SceneManager}\r\n     */\r\n    var updateNoCamerasViewport = function (scene) {\r\n        // This hack use deprecated method, i known.\r\n        scene.viewportManager.setViewport(\r\n            new Vector2d(0, 0),\r\n            new Vector2d(scene.data.width, scene.data.height)\r\n        );\r\n\r\n        return scene;\r\n    };\r\n    /**\r\n     * @param {CameraNode} [node]\r\n     * @returns {SceneManager}\r\n     */\r\n    SceneManager.prototype.updateViewport = function (node) {\r\n        if (node === undefined) return updateNoCamerasViewport(this);\r\n        this.viewportManager.updateViewport(node.data.id);\r\n        return this;\r\n    };\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.SceneManager = SceneManager;\r\n    if (global.J2D !== undefined) global.SceneManager = SceneManager;\r\n    return SceneManager;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('core/ViewportManager', ['utils/ArrayMap', 'nodes/CameraNode', 'utils/Vector2d'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(require('utils/ArrayMap'), require('nodes/CameraNode'), require('utils/Vector2d'));\r\n    } else {\r\n        factory(root.ArrayMap, root.CameraNode, root.Vector2d);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function (ArrayMap, CameraNode, Vector2d) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * @param {{x: number, y: number, offsetX: number, offsetY: number}} screen\r\n     * @param {{offset: {x: number, y: number}, size: {x: number, y: number}, scale: number, angle: number}} viewport\r\n     * @returns {{offset: {x: number, y: number}, size: {x: number, y: number}, scale: number, angle: number}}\r\n     */\r\n    var calculateScale = function (screen, viewport) {\r\n        var data = {\r\n            offset: {x: 0, y: 0},\r\n            size: {x: 0, y: 0},\r\n            scale: 1.0,\r\n            angle: viewport.angle\r\n        };\r\n\r\n        data.offset.x = screen.offsetX + viewport.offset.x;\r\n        data.offset.y = screen.offsetY + viewport.offset.y;\r\n\r\n        data.size.x = (screen.x < viewport.size.x) ? screen.x : viewport.size.x;\r\n        data.size.y = (screen.y < viewport.size.y) ? screen.y : viewport.size.y;\r\n\r\n        data.scale = viewport.scale * (((screen.x / viewport.size.x) + (screen.y / viewport.size.y)) / 2);\r\n        return data;\r\n    };\r\n\r\n    /**\r\n     * @constructor\r\n     *\r\n     * @property {ArrayMap.<CameraNode>|CameraNode[]} cameras\r\n     * @property {string} camera\r\n     * @property {{x: number, y: number, offsetX: number, offsetY: number}} screen\r\n     * @property {boolean} init\r\n     * @property {{offset: {x: number, y: number}, size: {x: number, y: number}, scale: number, angle: number}} data\r\n     */\r\n    var ViewportManager = function () {\r\n        /** @type ArrayMap.<CameraNode>|CameraNode[] */\r\n        this.cameras = new ArrayMap();\r\n\r\n        /** @type string */\r\n        this.camera = 'No active cameras';\r\n\r\n        /** @type {{x: number, y: number, offsetX: number, offsetY: number}} */\r\n        this.screen = {\r\n            x: 0,\r\n            y: 0,\r\n            offsetX: 0,\r\n            offsetY: 0\r\n        };\r\n\r\n        this.init = false;\r\n\r\n        this.data = {\r\n            offset: {x: 0.0, y: 0.0},\r\n            size: {x: 0.0, y: 0.0},\r\n            scale: 1.0,\r\n            angle: 0.0\r\n        };\r\n    };\r\n\r\n    /**\r\n     * @param {{x: number|undefined, y: number|undefined}|Array<number>} data\r\n     * @returns {ViewportManager}\r\n     */\r\n    ViewportManager.prototype.setScreen = function (data) {\r\n        if (typeof data == 'object') {\r\n            if (data instanceof Array && data.length == 2) {\r\n                this.screen = {\r\n                    x: data[0],\r\n                    y: data[1],\r\n                    offsetX: this.screen.offsetX,\r\n                    offsetY: this.screen.offsetY\r\n                };\r\n                return this;\r\n            }\r\n            if (data.x !== undefined && data.y !== undefined) {\r\n                this.screen = {\r\n                    x: data.x,\r\n                    y: data.y,\r\n                    offsetX: this.screen.offsetX,\r\n                    offsetY: this.screen.offsetY\r\n                };\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @param {{x: number|undefined, y: number|undefined}|Array<number>} data\r\n     * @returns {ViewportManager}\r\n     */\r\n    ViewportManager.prototype.setOffset = function (data) {\r\n        if (typeof data == 'object') {\r\n            if (data instanceof Array && data.length == 2) {\r\n                this.screen = {\r\n                    x: this.screen.x,\r\n                    y: this.screen.y,\r\n                    offsetX: data[0],\r\n                    offsetY: data[1]\r\n                };\r\n                return this;\r\n            }\r\n            if (data.x !== undefined && data.y !== undefined) {\r\n                this.screen = {\r\n                    x: this.screen.x,\r\n                    y: this.screen.y,\r\n                    offsetX: data.x,\r\n                    offsetY: data.y\r\n                };\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @param {string} key\r\n     * @param {CameraNode} node\r\n     * @returns {ViewportManager}\r\n     */\r\n    ViewportManager.prototype.addCamera = function (key, node) {\r\n        if (node instanceof CameraNode) {\r\n            this.cameras.add(key, node);\r\n            return this;\r\n        }\r\n        // throw new InvalidArgumentException('Unknown camera node type');\r\n    };\r\n\r\n    /**\r\n     * @param {string} key\r\n     * @returns {ViewportManager}\r\n     */\r\n    ViewportManager.prototype.removeCamera = function (key) {\r\n        this.cameras.remove(key);\r\n        if (this.camera == key) {\r\n            this.camera = 'No active cameras';\r\n            this.data = {\r\n                offset: {x: 0.0, y: 0.0},\r\n                size: {x: 0.0, y: 0.0},\r\n                scale: 1.0,\r\n                angle: 0.0\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @param {string} key\r\n     * @returns {ViewportManager}\r\n     */\r\n    ViewportManager.prototype.updateViewport = function (key) {\r\n        if (this.cameras[key] !== undefined && this.cameras[key] instanceof CameraNode) {\r\n            this.data = this.cameras[key].getCameraViewport(this.screen, calculateScale);\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @deprecated Please use CameraNode\r\n     *\r\n     * @param {Vector2d|null} [offset]\r\n     * @param {Vector2d|null} [size]\r\n     * @returns {ViewportManager}\r\n     */\r\n    ViewportManager.prototype.setViewport = function (offset, size) {\r\n        if (offset !== undefined && typeof offset == 'object') {\r\n            if (offset instanceof Vector2d) {\r\n                this.data.offset = offset.getVector();\r\n            }\r\n        }\r\n\r\n        if (size !== undefined && typeof size == 'object') {\r\n            if (size instanceof Vector2d) {\r\n                this.data.size = size.getVector();\r\n            }\r\n        }\r\n\r\n        this.data = calculateScale(this.screen, this.data);\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @param {{offset: {x: number, y: number}, size: {x: number, y: number}, scale: number, angle: number}} viewport\r\n     * @returns {ViewportManager}\r\n     */\r\n    ViewportManager.prototype.setDefaultViewport = function (viewport) {\r\n        if (!this.init) {\r\n            this.data = viewport;\r\n            this.init = true;\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @returns {{offset: {x: number, y: number}, size: {x: number, y: number}, scale: number, angle: number}}\r\n     */\r\n    ViewportManager.prototype.getViewport = function () {\r\n        return this.data;\r\n    };\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.ViewportManager = ViewportManager;\r\n    if (global.J2D !== undefined) global.ViewportManager = ViewportManager;\r\n    return ViewportManager;\r\n}));\r\n","/**\r\n *  WebGL-2D.js - HTML5 Canvas2D API in a WebGL context\r\n *\r\n *  Created by Corban Brook <corbanbrook@gmail.com> on 2011-03-02.\r\n *  Amended to by Bobby Richter <secretrobotron@gmail.com> on 2011-03-03\r\n *  CubicVR.js by Charles Cliffe <cj@cubicproductions.com> on 2011-03-03\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('core/WebGL2D', [], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory();\r\n    } else {\r\n        factory();\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function () {\r\n    \"use strict\";\r\n\r\n    // Vector & Matrix libraries from CubicVR.js\r\n    var M_PI = 3.1415926535897932384626433832795028841968;\r\n    var M_TWO_PI = 2.0 * M_PI;\r\n    var M_HALF_PI = M_PI / 2.0;\r\n\r\n    function isPOT(value) {\r\n        return value > 0 && ((value - 1) & value) === 0;\r\n    }\r\n\r\n    var vec3 = {\r\n        length: function (pt) {\r\n            return Math.sqrt(pt[0] * pt[0] + pt[1] * pt[1] + pt[2] * pt[2]);\r\n        },\r\n\r\n        normalize: function (pt) {\r\n            var d = Math.sqrt((pt[0] * pt[0]) + (pt[1] * pt[1]) + (pt[2] * pt[2]));\r\n            if (d === 0) {\r\n                return [0, 0, 0];\r\n            }\r\n            return [pt[0] / d, pt[1] / d, pt[2] / d];\r\n        },\r\n\r\n        dot: function (v1, v2) {\r\n            return v1[0] * v2[0] + v1[1] * v2[1] + v1[2] * v2[2];\r\n        },\r\n\r\n        angle: function (v1, v2) {\r\n            return Math.acos((v1[0] * v2[0] + v1[1] * v2[1] + v1[2] * v2[2]) / (Math.sqrt(v1[0] * v1[0] + v1[1] * v1[1] + v1[2] * v1[2]) * Math.sqrt(v2[0] * v2[0] + v2[1] * v2[1] + v2[2] * v2[2])));\r\n        },\r\n\r\n        cross: function (vectA, vectB) {\r\n            return [vectA[1] * vectB[2] - vectB[1] * vectA[2], vectA[2] * vectB[0] - vectB[2] * vectA[0], vectA[0] * vectB[1] - vectB[0] * vectA[1]];\r\n        },\r\n\r\n        multiply: function (vectA, constB) {\r\n            return [vectA[0] * constB, vectA[1] * constB, vectA[2] * constB];\r\n        },\r\n\r\n        add: function (vectA, vectB) {\r\n            return [vectA[0] + vectB[0], vectA[1] + vectB[1], vectA[2] + vectB[2]];\r\n        },\r\n\r\n        subtract: function (vectA, vectB) {\r\n            return [vectA[0] - vectB[0], vectA[1] - vectB[1], vectA[2] - vectB[2]];\r\n        },\r\n\r\n        equal: function (a, b) {\r\n            var epsilon = 0.0000001;\r\n            if ((a === undefined) && (b === undefined)) {\r\n                return true;\r\n            }\r\n            if ((a === undefined) || (b === undefined)) {\r\n                return false;\r\n            }\r\n            return (Math.abs(a[0] - b[0]) < epsilon && Math.abs(a[1] - b[1]) < epsilon && Math.abs(a[2] - b[2]) < epsilon);\r\n        }\r\n    };\r\n\r\n    var mat3 = {\r\n        identity: [1.0, 0.0, 0.0,\r\n            0.0, 1.0, 0.0,\r\n            0.0, 0.0, 1.0],\r\n\r\n        multiply: function (m1, m2) {\r\n            var m10 = m1[0], m11 = m1[1], m12 = m1[2], m13 = m1[3], m14 = m1[4], m15 = m1[5], m16 = m1[6], m17 = m1[7], m18 = m1[8],\r\n                m20 = m2[0], m21 = m2[1], m22 = m2[2], m23 = m2[3], m24 = m2[4], m25 = m2[5], m26 = m2[6], m27 = m2[7], m28 = m2[8];\r\n\r\n            m2[0] = m20 * m10 + m23 * m11 + m26 * m12;\r\n            m2[1] = m21 * m10 + m24 * m11 + m27 * m12;\r\n            m2[2] = m22 * m10 + m25 * m11 + m28 * m12;\r\n            m2[3] = m20 * m13 + m23 * m14 + m26 * m15;\r\n            m2[4] = m21 * m13 + m24 * m14 + m27 * m15;\r\n            m2[5] = m22 * m13 + m25 * m14 + m28 * m15;\r\n            m2[6] = m20 * m16 + m23 * m17 + m26 * m18;\r\n            m2[7] = m21 * m16 + m24 * m17 + m27 * m18;\r\n            m2[8] = m22 * m16 + m25 * m17 + m28 * m18;\r\n        },\r\n\r\n        vec2_multiply: function (m1, m2) {\r\n            var mOut = [];\r\n            mOut[0] = m2[0] * m1[0] + m2[3] * m1[1] + m2[6];\r\n            mOut[1] = m2[1] * m1[0] + m2[4] * m1[1] + m2[7];\r\n            return mOut;\r\n        },\r\n\r\n        transpose: function (m) {\r\n            return [m[0], m[3], m[6], m[1], m[4], m[7], m[2], m[5], m[8]];\r\n        }\r\n    }; //mat3\r\n\r\n    // Transform library from CubicVR.js\r\n    function Transform(mat) {\r\n        return this.clearStack(mat);\r\n    }\r\n\r\n    var STACK_DEPTH_LIMIT = 16;\r\n\r\n    Transform.prototype.clearStack = function (init_mat) {\r\n        this.m_stack = [];\r\n        this.m_cache = [];\r\n        this.c_stack = 0;\r\n        this.valid = 0;\r\n        this.result = null;\r\n\r\n        for (var i = 0; i < STACK_DEPTH_LIMIT; i++) {\r\n            this.m_stack[i] = this.getIdentity();\r\n        }\r\n\r\n        if (init_mat !== undefined) {\r\n            this.m_stack[0] = init_mat;\r\n        } else {\r\n            this.setIdentity();\r\n        }\r\n    }; //clearStack\r\n\r\n    Transform.prototype.setIdentity = function () {\r\n        this.m_stack[this.c_stack] = this.getIdentity();\r\n        if (this.valid === this.c_stack && this.c_stack) {\r\n            this.valid--;\r\n        }\r\n    };\r\n\r\n    Transform.prototype.getIdentity = function () {\r\n        return [1.0, 0.0, 0.0,\r\n            0.0, 1.0, 0.0,\r\n            0.0, 0.0, 1.0];\r\n    };\r\n\r\n    Transform.prototype.getResult = function () {\r\n        if (!this.c_stack) {\r\n            return this.m_stack[0];\r\n        }\r\n\r\n        var m = mat3.identity;\r\n\r\n        if (this.valid > this.c_stack - 1) {\r\n            this.valid = this.c_stack - 1;\r\n        }\r\n\r\n        for (var i = this.valid; i < this.c_stack + 1; i++) {\r\n            m = mat3.multiply(this.m_stack[i], m);\r\n            this.m_cache[i] = m;\r\n        }\r\n\r\n        this.valid = this.c_stack - 1;\r\n\r\n        this.result = this.m_cache[this.c_stack];\r\n\r\n        return this.result;\r\n    };\r\n\r\n    Transform.prototype.pushMatrix = function () {\r\n        this.c_stack++;\r\n        this.m_stack[this.c_stack] = this.getIdentity();\r\n    };\r\n\r\n    Transform.prototype.popMatrix = function () {\r\n        if (this.c_stack === 0) {\r\n            return;\r\n        }\r\n        this.c_stack--;\r\n    };\r\n\r\n    var translateMatrix = Transform.prototype.getIdentity();\r\n\r\n    Transform.prototype.translate = function (x, y) {\r\n        translateMatrix[6] = x;\r\n        translateMatrix[7] = y;\r\n\r\n        mat3.multiply(translateMatrix, this.m_stack[this.c_stack]);\r\n\r\n        /*\r\n         if (this.valid === this.c_stack && this.c_stack) {\r\n         this.valid--;\r\n         }\r\n         */\r\n    };\r\n\r\n    var trMatrix = Transform.prototype.getIdentity();\r\n\r\n    Transform.prototype.tr = function (a, b, c, d, e, f) {\r\n        trMatrix[0] = a;\r\n        trMatrix[1] = b;\r\n        trMatrix[3] = c;\r\n        trMatrix[4] = d;\r\n        trMatrix[6] = e;\r\n        trMatrix[7] = f;\r\n\r\n        mat3.multiply(trMatrix, this.m_stack[this.c_stack]);\r\n    };\r\n\r\n    var scaleMatrix = Transform.prototype.getIdentity();\r\n\r\n    Transform.prototype.scale = function (x, y) {\r\n        scaleMatrix[0] = x;\r\n        scaleMatrix[4] = y;\r\n\r\n        mat3.multiply(scaleMatrix, this.m_stack[this.c_stack]);\r\n\r\n        /*\r\n         if (this.valid === this.c_stack && this.c_stack) {\r\n         this.valid--;\r\n         }\r\n         */\r\n    };\r\n\r\n    var rotateMatrix = Transform.prototype.getIdentity();\r\n\r\n    Transform.prototype.rotate = function (ang) {\r\n        var sAng, cAng;\r\n\r\n        sAng = Math.sin(-ang);\r\n        cAng = Math.cos(-ang);\r\n\r\n        rotateMatrix[0] = cAng;\r\n        rotateMatrix[3] = sAng;\r\n        rotateMatrix[1] = -sAng;\r\n        rotateMatrix[4] = cAng;\r\n\r\n        mat3.multiply(rotateMatrix, this.m_stack[this.c_stack]);\r\n\r\n        /*\r\n         if (this.valid === this.c_stack && this.c_stack) {\r\n         this.valid--;\r\n         }\r\n         */\r\n    };\r\n\r\n    var WebGL2D = global.WebGL2D = function WebGL2D(canvas, options) {\r\n        this.canvas = canvas;\r\n        this.options = options || {};\r\n        this.gl = undefined;\r\n        this.fs = undefined;\r\n        this.vs = undefined;\r\n        this.shaderProgram = undefined;\r\n        this.transform = new Transform();\r\n        this.shaderPool = [];\r\n        this.maxTextureSize = undefined;\r\n\r\n        // Save a reference to the WebGL2D instance on the canvas object\r\n        canvas.gl2d = this;\r\n\r\n        // Store getContext function for later use\r\n        canvas.$getContext = canvas.getContext;\r\n\r\n        // Override getContext function with \"webgl-2d\" enabled version\r\n        canvas.getContext = (function (gl2d) {\r\n            return function (context) {\r\n                if ((gl2d.options.force || context === \"WebGL-2d\") && !(canvas.width === 0 || canvas.height === 0)) {\r\n                    if (gl2d.gl) {\r\n                        return gl2d.gl;\r\n                    }\r\n\r\n                    var gl = gl2d.gl = gl2d.canvas.$getContext(\"experimental-webgl\");\r\n\r\n                    // If we failed to get a WebGL context, return a normal 2D context instead.\r\n                    if ((typeof (gl) === \"undefined\") || (gl === null)) {\r\n                        return gl2d.canvas.$getContext(\"2d\");\r\n                    }\r\n\r\n                    gl2d.initShaders();\r\n                    gl2d.initBuffers();\r\n\r\n                    // Append Canvas2D API features to the WebGL context\r\n                    gl2d.initCanvas2DAPI();\r\n\r\n                    // Disables writing to dest-alpha\r\n                    // gl.colorMask(1,1,1,0)\r\n\r\n                    // Depth options\r\n                    //gl.enable(gl.DEPTH_TEST);\r\n                    //gl.depthFunc(gl.LEQUAL);\r\n\r\n                    // Blending options\r\n                    // See http://stackoverflow.com/questions/11521035/blending-with-html-background-in-webgl\r\n                    gl.enable(gl.BLEND);\r\n                    gl.blendFuncSeparate(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\r\n\r\n                    gl2d.maxTextureSize = gl.getParameter(gl.MAX_TEXTURE_SIZE);\r\n\r\n                    return gl;\r\n                } else {\r\n                    return gl2d.canvas.$getContext(context);\r\n                }\r\n            };\r\n        }(this));\r\n\r\n        this.postInit();\r\n    };\r\n\r\n    // Enables WebGL2D on your canvas\r\n    WebGL2D.enable = function (canvas, options) {\r\n        return canvas.gl2d || new WebGL2D(canvas, options);\r\n    };\r\n\r\n\r\n    // Shader Pool BitMasks, i.e. sMask = (shaderMask.texture+shaderMask.stroke)\r\n    var shaderMask = {\r\n        texture: 1,\r\n        crop: 2,\r\n        path: 4\r\n    };\r\n\r\n\r\n    // Fragment shader source\r\n    WebGL2D.prototype.getFragmentShaderSource = function getFragmentShaderSource(sMask) {\r\n        var fsSource = [\r\n            \"#ifdef GL_ES\",\r\n            \"precision highp float;\",\r\n            \"#endif\",\r\n\r\n            \"#define hasTexture \" + ((sMask & shaderMask.texture) ? \"1\" : \"0\"),\r\n            \"#define hasCrop \" + ((sMask & shaderMask.crop) ? \"1\" : \"0\"),\r\n\r\n            \"varying vec4 vColor;\",\r\n\r\n            \"#if hasTexture\",\r\n            \"varying vec2 vTextureCoord;\",\r\n            \"uniform sampler2D uSampler;\",\r\n            \"#if hasCrop\",\r\n            \"uniform vec4 uCropSource;\",\r\n            \"#endif\",\r\n            \"#endif\",\r\n\r\n            \"void main(void) {\",\r\n            \"#if hasTexture\",\r\n            \"#if hasCrop\",\r\n            \"gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x * uCropSource.z, vTextureCoord.y * uCropSource.w) + uCropSource.xy);\",\r\n            \"#else\",\r\n            \"gl_FragColor = texture2D(uSampler, vTextureCoord);\",\r\n            \"#endif\",\r\n            \"#else\",\r\n            \"gl_FragColor = vColor;\",\r\n            \"#endif\",\r\n            \"}\"\r\n        ].join(\"\\n\");\r\n\r\n        return fsSource;\r\n    };\r\n\r\n    WebGL2D.prototype.getVertexShaderSource = function getVertexShaderSource(stackDepth, sMask) {\r\n        stackDepth = stackDepth || 1;\r\n\r\n        var vsSource = [\r\n            \"#define hasTexture \" + ((sMask & shaderMask.texture) ? \"1\" : \"0\"),\r\n            \"attribute vec4 aVertexPosition;\",\r\n\r\n            \"#if hasTexture\",\r\n            \"varying vec2 vTextureCoord;\",\r\n            \"#endif\",\r\n\r\n            \"uniform vec4 uColor;\",\r\n            \"uniform mat3 uTransforms[\" + stackDepth + \"];\",\r\n\r\n            \"varying vec4 vColor;\",\r\n\r\n            \"uniform mat4 pMatrix;\",\r\n\r\n            \"mat3 crunchStack(void) {\",\r\n            \"mat3 result = uTransforms[0];\",\r\n            \"for (int i = 1; i < \" + stackDepth + \"; ++i) {\",\r\n            \"result = uTransforms[i] * result;\",\r\n            \"}\",\r\n            \"return result;\",\r\n            \"}\",\r\n\r\n            \"void main(void) {\",\r\n            \"vec3 position = crunchStack() * vec3(aVertexPosition.x, aVertexPosition.y, 1.0);\",\r\n            \"gl_Position = pMatrix * vec4(position, 1.0);\",\r\n            \"vColor = uColor;\",\r\n            \"#if hasTexture\",\r\n            \"vTextureCoord = aVertexPosition.zw;\",\r\n            \"#endif\",\r\n            \"}\"\r\n        ].join(\"\\n\");\r\n        return vsSource;\r\n    };\r\n\r\n\r\n    // Initialize fragment and vertex shaders\r\n    WebGL2D.prototype.initShaders = function initShaders(transformStackDepth, sMask) {\r\n        var gl = this.gl;\r\n\r\n        transformStackDepth = transformStackDepth || 1;\r\n        sMask = sMask || 0;\r\n        var storedShader = this.shaderPool[transformStackDepth];\r\n\r\n        if (!storedShader) {\r\n            storedShader = this.shaderPool[transformStackDepth] = [];\r\n        }\r\n        storedShader = storedShader[sMask];\r\n\r\n        if (storedShader) {\r\n            gl.useProgram(storedShader);\r\n            this.shaderProgram = storedShader;\r\n        } else {\r\n            var fs = this.fs = gl.createShader(gl.FRAGMENT_SHADER);\r\n            gl.shaderSource(this.fs, this.getFragmentShaderSource(sMask));\r\n            gl.compileShader(this.fs);\r\n\r\n            if (!gl.getShaderParameter(this.fs, gl.COMPILE_STATUS)) {\r\n                throw \"fragment shader error: \" + gl.getShaderInfoLog(this.fs);\r\n            }\r\n\r\n            var vs = this.vs = gl.createShader(gl.VERTEX_SHADER);\r\n            gl.shaderSource(this.vs, this.getVertexShaderSource(transformStackDepth, sMask));\r\n            gl.compileShader(this.vs);\r\n\r\n            if (!gl.getShaderParameter(this.vs, gl.COMPILE_STATUS)) {\r\n                throw \"vertex shader error: \" + gl.getShaderInfoLog(this.vs);\r\n            }\r\n\r\n\r\n            var shaderProgram = this.shaderProgram = gl.createProgram();\r\n            shaderProgram.stackDepth = transformStackDepth;\r\n            gl.attachShader(shaderProgram, fs);\r\n            gl.attachShader(shaderProgram, vs);\r\n            gl.linkProgram(shaderProgram);\r\n\r\n            if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {\r\n                throw \"Could not initialise shaders.\";\r\n            }\r\n\r\n            gl.useProgram(shaderProgram);\r\n\r\n            shaderProgram.vertexPositionAttribute = gl.getAttribLocation(shaderProgram, \"aVertexPosition\");\r\n            gl.enableVertexAttribArray(shaderProgram.vertexPositionAttribute);\r\n\r\n            shaderProgram.uColor = gl.getUniformLocation(shaderProgram, 'uColor');\r\n            shaderProgram.uSampler = gl.getUniformLocation(shaderProgram, 'uSampler');\r\n            shaderProgram.uCropSource = gl.getUniformLocation(shaderProgram, 'uCropSource');\r\n\r\n            shaderProgram.pMatrix = gl.getUniformLocation(shaderProgram, 'pMatrix');\r\n\r\n            shaderProgram.uTransforms = [];\r\n            for (var i = 0; i < transformStackDepth; ++i) {\r\n                shaderProgram.uTransforms[i] = gl.getUniformLocation(shaderProgram, 'uTransforms[' + i + ']');\r\n            } //for\r\n            this.shaderPool[transformStackDepth][sMask] = shaderProgram;\r\n        } //if\r\n\r\n        pMatrix[0] = 2 / this.canvas.width;\r\n        pMatrix[5] = -2 / this.canvas.height;\r\n\r\n        gl.uniformMatrix4fv(this.shaderProgram.pMatrix, false, pMatrix);\r\n\r\n        gl.viewport(0, 0, this.canvas.width, this.canvas.height);\r\n\r\n        return this.shaderProgram;\r\n    };\r\n\r\n    // 2D Vertices and Texture UV coords\r\n    var rectVerts = new Float32Array([\r\n        0, 0, 0, 0,\r\n        0, 1, 0, 1,\r\n        1, 1, 1, 1,\r\n        1, 0, 1, 0\r\n    ]);\r\n\r\n    var pMatrix = new Float32Array(16);\r\n    pMatrix[10] = 1;\r\n    pMatrix[11] = 1;\r\n    pMatrix[12] = -1;\r\n    pMatrix[13] = 1;\r\n\r\n    WebGL2D.prototype.initBuffers = function initBuffers() {\r\n        var gl = this.gl;\r\n\r\n        gl.rectVertexPositionBuffer = gl.createBuffer();\r\n        gl.rectVertexColorBuffer = gl.createBuffer();\r\n\r\n        gl.pathVertexPositionBuffer = gl.createBuffer();\r\n        gl.pathVertexColorBuffer = gl.createBuffer();\r\n\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, gl.rectVertexPositionBuffer);\r\n        gl.bufferData(gl.ARRAY_BUFFER, rectVerts, gl.STATIC_DRAW);\r\n    };\r\n\r\n    // Maintains an array of all WebGL2D instances\r\n    WebGL2D.instances = [];\r\n\r\n    WebGL2D.prototype.postInit = function () {\r\n        WebGL2D.instances.push(this);\r\n    };\r\n\r\n    // Extends gl context with Canvas2D API\r\n    WebGL2D.prototype.initCanvas2DAPI = function initCanvas2DAPI() {\r\n        var gl2d = this,\r\n            gl = this.gl;\r\n\r\n\r\n        // Rendering Canvas for text fonts\r\n        var textCanvas = document.createElement(\"canvas\");\r\n        textCanvas.width = gl2d.canvas.width;\r\n        textCanvas.height = gl2d.canvas.height;\r\n        var textCtx = textCanvas.getContext(\"2d\");\r\n\r\n        var reRGBAColor = /^rgb(a)?\\(\\s*(-?[\\d]+)(%)?\\s*,\\s*(-?[\\d]+)(%)?\\s*,\\s*(-?[\\d]+)(%)?\\s*,?\\s*(-?[\\d\\.]+)?\\s*\\)$/;\r\n        var reHSLAColor = /^hsl(a)?\\(\\s*(-?[\\d\\.]+)\\s*,\\s*(-?[\\d\\.]+)%\\s*,\\s*(-?[\\d\\.]+)%\\s*,?\\s*(-?[\\d\\.]+)?\\s*\\)$/;\r\n        var reHex6Color = /^#([0-9A-Fa-f]{6})$/;\r\n        var reHex3Color = /^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/;\r\n\r\n        function hue2rgb(p, q, t) {\r\n            if (t < 0) t += 1;\r\n            if (t > 1) t -= 1;\r\n            if (t < 1 / 6) return p + (q - p) * 6 * t;\r\n            if (t < 1 / 2) return q;\r\n            if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\r\n            return p;\r\n        }\r\n\r\n        // http://axonflux.com/handy-rgb-to-hsl-and-rgb-to-hsv-color-model-c\r\n        function HSLAToRGBA(h, s, l, a) {\r\n            var r, g, b, p, q;\r\n\r\n            // Clamp and Normalize values\r\n            h = (((h % 360) + 360) % 360) / 360;\r\n            s = s > 100 ? 1 : s / 100;\r\n            s = s < 0 ? 0 : s;\r\n            l = l > 100 ? 1 : l / 100;\r\n            l = l < 0 ? 0 : l;\r\n\r\n            if (s == 0) {\r\n                r = g = b = l; // achromatic\r\n            } else {\r\n                q = l < 0.5 ? l * (1 + s) : l + s - l * s;\r\n                p = 2 * l - q;\r\n\r\n                r = hue2rgb(p, q, h + 1 / 3);\r\n                g = hue2rgb(p, q, h);\r\n                b = hue2rgb(p, q, h - 1 / 3);\r\n            }\r\n\r\n            return [r, g, b, a];\r\n        }\r\n\r\n\r\n        // Converts rgb(a) color string to gl color vector\r\n        function colorStringToVec4(value) {\r\n            var result = [], match, channel, isPercent, hasAlpha, alphaChannel, sameType;\r\n\r\n            if ((match = reRGBAColor.exec(value))) {\r\n                hasAlpha = match[1], alphaChannel = parseFloat(match[8]);\r\n\r\n                if ((hasAlpha && isNaN(alphaChannel)) || (!hasAlpha && !isNaN(alphaChannel))) {\r\n                    return false;\r\n                }\r\n\r\n                sameType = match[3];\r\n\r\n                for (var i = 2; i < 8; i += 2) {\r\n                    channel = match[i], isPercent = match[i + 1];\r\n\r\n                    if (isPercent !== sameType) {\r\n                        return false;\r\n                    }\r\n\r\n                    // Clamp and normalize values\r\n                    if (isPercent) {\r\n                        channel = channel > 100 ? 1 : channel / 100;\r\n                        channel = channel < 0 ? 0 : channel;\r\n                    } else {\r\n                        channel = channel > 255 ? 1 : channel / 255;\r\n                        channel = channel < 0 ? 0 : channel;\r\n                    }\r\n\r\n                    result.push(channel);\r\n                }\r\n\r\n                result.push(hasAlpha ? alphaChannel : 1.0);\r\n            } else if ((match = reHSLAColor.exec(value))) {\r\n                hasAlpha = match[1], alphaChannel = parseFloat(match[5]);\r\n                result = HSLAToRGBA(match[2], match[3], match[4], parseFloat(hasAlpha && alphaChannel ? alphaChannel : 1.0));\r\n            } else if ((match = reHex6Color.exec(value))) {\r\n                var colorInt = parseInt(match[1], 16);\r\n                result = [((colorInt & 0xFF0000) >> 16) / 255, ((colorInt & 0x00FF00) >> 8) / 255, (colorInt & 0x0000FF) / 255, 1.0];\r\n            } else if ((match = reHex3Color.exec(value))) {\r\n                var hexString = \"#\" + [match[1], match[1], match[2], match[2], match[3], match[3]].join(\"\");\r\n                result = colorStringToVec4(hexString);\r\n            } else if (value.toLowerCase() in colorKeywords) {\r\n                result = colorStringToVec4(colorKeywords[value.toLowerCase()]);\r\n            } else if (value.toLowerCase() === \"transparent\") {\r\n                result = [0, 0, 0, 0];\r\n            } else {\r\n                // Color keywords not yet implemented, ie \"orange\", return hot pink\r\n                return false;\r\n            }\r\n\r\n            return result;\r\n        }\r\n\r\n        function colorVecToString(vec4) {\r\n            return \"rgba(\" + (vec4[0] * 255) + \", \" + (vec4[1] * 255) + \", \" + (vec4[2] * 255) + \", \" + parseFloat(vec4[3]) + \")\";\r\n        }\r\n\r\n        var colorKeywords = {\r\n            aliceblue: \"#f0f8ff\",\r\n            antiquewhite: \"#faebd7\",\r\n            aqua: \"#00ffff\",\r\n            aquamarine: \"#7fffd4\",\r\n            azure: \"#f0ffff\",\r\n            beige: \"#f5f5dc\",\r\n            bisque: \"#ffe4c4\",\r\n            black: \"#000000\",\r\n            blanchedalmond: \"#ffebcd\",\r\n            blue: \"#0000ff\",\r\n            blueviolet: \"#8a2be2\",\r\n            brown: \"#a52a2a\",\r\n            burlywood: \"#deb887\",\r\n            cadetblue: \"#5f9ea0\",\r\n            chartreuse: \"#7fff00\",\r\n            chocolate: \"#d2691e\",\r\n            coral: \"#ff7f50\",\r\n            cornflowerblue: \"#6495ed\",\r\n            cornsilk: \"#fff8dc\",\r\n            crimson: \"#dc143c\",\r\n            cyan: \"#00ffff\",\r\n            darkblue: \"#00008b\",\r\n            darkcyan: \"#008b8b\",\r\n            darkgoldenrod: \"#b8860b\",\r\n            darkgray: \"#a9a9a9\",\r\n            darkgreen: \"#006400\",\r\n            darkkhaki: \"#bdb76b\",\r\n            darkmagenta: \"#8b008b\",\r\n            darkolivegreen: \"#556b2f\",\r\n            darkorange: \"#ff8c00\",\r\n            darkorchid: \"#9932cc\",\r\n            darkred: \"#8b0000\",\r\n            darksalmon: \"#e9967a\",\r\n            darkseagreen: \"#8fbc8f\",\r\n            darkslateblue: \"#483d8b\",\r\n            darkslategray: \"#2f4f4f\",\r\n            darkturquoise: \"#00ced1\",\r\n            darkviolet: \"#9400d3\",\r\n            deeppink: \"#ff1493\",\r\n            deepskyblue: \"#00bfff\",\r\n            dimgray: \"#696969\",\r\n            dodgerblue: \"#1e90ff\",\r\n            firebrick: \"#b22222\",\r\n            floralwhite: \"#fffaf0\",\r\n            forestgreen: \"#228b22\",\r\n            fuchsia: \"#ff00ff\",\r\n            gainsboro: \"#dcdcdc\",\r\n            ghostwhite: \"#f8f8ff\",\r\n            gold: \"#ffd700\",\r\n            goldenrod: \"#daa520\",\r\n            gray: \"#808080\",\r\n            green: \"#008000\",\r\n            greenyellow: \"#adff2f\",\r\n            grey: \"#808080\",\r\n            honeydew: \"#f0fff0\",\r\n            hotpink: \"#ff69b4\",\r\n            indianred: \"#cd5c5c\",\r\n            indigo: \"#4b0082\",\r\n            ivory: \"#fffff0\",\r\n            khaki: \"#f0e68c\",\r\n            lavender: \"#e6e6fa\",\r\n            lavenderblush: \"#fff0f5\",\r\n            lawngreen: \"#7cfc00\",\r\n            lemonchiffon: \"#fffacd\",\r\n            lightblue: \"#add8e6\",\r\n            lightcoral: \"#f08080\",\r\n            lightcyan: \"#e0ffff\",\r\n            lightgoldenrodyellow: \"#fafad2\",\r\n            lightgrey: \"#d3d3d3\",\r\n            lightgreen: \"#90ee90\",\r\n            lightpink: \"#ffb6c1\",\r\n            lightsalmon: \"#ffa07a\",\r\n            lightseagreen: \"#20b2aa\",\r\n            lightskyblue: \"#87cefa\",\r\n            lightslategray: \"#778899\",\r\n            lightsteelblue: \"#b0c4de\",\r\n            lightyellow: \"#ffffe0\",\r\n            lime: \"#00ff00\",\r\n            limegreen: \"#32cd32\",\r\n            linen: \"#faf0e6\",\r\n            magenta: \"#ff00ff\",\r\n            maroon: \"#800000\",\r\n            mediumaquamarine: \"#66cdaa\",\r\n            mediumblue: \"#0000cd\",\r\n            mediumorchid: \"#ba55d3\",\r\n            mediumpurple: \"#9370d8\",\r\n            mediumseagreen: \"#3cb371\",\r\n            mediumslateblue: \"#7b68ee\",\r\n            mediumspringgreen: \"#00fa9a\",\r\n            mediumturquoise: \"#48d1cc\",\r\n            mediumvioletred: \"#c71585\",\r\n            midnightblue: \"#191970\",\r\n            mintcream: \"#f5fffa\",\r\n            mistyrose: \"#ffe4e1\",\r\n            moccasin: \"#ffe4b5\",\r\n            navajowhite: \"#ffdead\",\r\n            navy: \"#000080\",\r\n            oldlace: \"#fdf5e6\",\r\n            olive: \"#808000\",\r\n            olivedrab: \"#6b8e23\",\r\n            orange: \"#ffa500\",\r\n            orangered: \"#ff4500\",\r\n            orchid: \"#da70d6\",\r\n            palegoldenrod: \"#eee8aa\",\r\n            palegreen: \"#98fb98\",\r\n            paleturquoise: \"#afeeee\",\r\n            palevioletred: \"#d87093\",\r\n            papayawhip: \"#ffefd5\",\r\n            peachpuff: \"#ffdab9\",\r\n            peru: \"#cd853f\",\r\n            pink: \"#ffc0cb\",\r\n            plum: \"#dda0dd\",\r\n            powderblue: \"#b0e0e6\",\r\n            purple: \"#800080\",\r\n            red: \"#ff0000\",\r\n            rosybrown: \"#bc8f8f\",\r\n            royalblue: \"#4169e1\",\r\n            saddlebrown: \"#8b4513\",\r\n            salmon: \"#fa8072\",\r\n            sandybrown: \"#f4a460\",\r\n            seagreen: \"#2e8b57\",\r\n            seashell: \"#fff5ee\",\r\n            sienna: \"#a0522d\",\r\n            silver: \"#c0c0c0\",\r\n            skyblue: \"#87ceeb\",\r\n            slateblue: \"#6a5acd\",\r\n            slategray: \"#708090\",\r\n            snow: \"#fffafa\",\r\n            springgreen: \"#00ff7f\",\r\n            steelblue: \"#4682b4\",\r\n            tan: \"#d2b48c\",\r\n            teal: \"#008080\",\r\n            thistle: \"#d8bfd8\",\r\n            tomato: \"#ff6347\",\r\n            turquoise: \"#40e0d0\",\r\n            violet: \"#ee82ee\",\r\n            wheat: \"#f5deb3\",\r\n            white: \"#ffffff\",\r\n            whitesmoke: \"#f5f5f5\",\r\n            yellow: \"#ffff00\",\r\n            yellowgreen: \"#9acd32\"\r\n        };\r\n\r\n        // Maintain drawing state params during gl.save and gl.restore. see saveDrawState() and restoreDrawState()\r\n        var drawState = {}, drawStateStack = [];\r\n\r\n        // A fast simple shallow clone\r\n        function cloneObject(obj) {\r\n            var target = {};\r\n            for (var i in obj) {\r\n                if (obj.hasOwnProperty(i)) {\r\n                    target[i] = obj[i];\r\n                }\r\n            }\r\n            return target;\r\n        }\r\n\r\n        function saveDrawState() {\r\n            var bakedDrawState = {\r\n                fillStyle: [drawState.fillStyle[0], drawState.fillStyle[1], drawState.fillStyle[2], drawState.fillStyle[3]],\r\n                strokeStyle: [drawState.strokeStyle[0], drawState.strokeStyle[1], drawState.strokeStyle[2], drawState.strokeStyle[3]],\r\n                globalAlpha: drawState.globalAlpha,\r\n                globalCompositeOperation: drawState.globalCompositeOperation,\r\n                lineCap: drawState.lineCap,\r\n                lineJoin: drawState.lineJoin,\r\n                lineWidth: drawState.lineWidth,\r\n                miterLimit: drawState.miterLimit,\r\n                shadowColor: drawState.shadowColor,\r\n                shadowBlur: drawState.shadowBlur,\r\n                shadowOffsetX: drawState.shadowOffsetX,\r\n                shadowOffsetY: drawState.shadowOffsetY,\r\n                textAlign: drawState.textAlign,\r\n                font: drawState.font,\r\n                textBaseline: drawState.textBaseline,\r\n                imageSmoothingEnabled: drawState.imageSmoothingEnabled\r\n            };\r\n\r\n            drawStateStack.push(bakedDrawState);\r\n        }\r\n\r\n        function restoreDrawState() {\r\n            if (drawStateStack.length) {\r\n                drawState = drawStateStack.pop();\r\n            }\r\n        }\r\n\r\n        // WebGL requires colors as a vector while Canvas2D sets colors as an rgba string\r\n        // These getters and setters store the original rgba string as well as convert to a vector\r\n        drawState.fillStyle = [0, 0, 0, 1]; // default black\r\n\r\n        Object.defineProperty(gl, \"fillStyle\", {\r\n            get: function () {\r\n                return colorVecToString(drawState.fillStyle);\r\n            },\r\n            set: function (value) {\r\n                drawState.fillStyle = colorStringToVec4(value) || drawState.fillStyle;\r\n            }\r\n        });\r\n\r\n        drawState.strokeStyle = [0, 0, 0, 1]; // default black\r\n\r\n        Object.defineProperty(gl, \"strokeStyle\", {\r\n            get: function () {\r\n                return colorVecToString(drawState.strokeStyle);\r\n            },\r\n            set: function (value) {\r\n                drawState.strokeStyle = colorStringToVec4(value) || drawStyle.strokeStyle;\r\n            }\r\n        });\r\n\r\n        // WebGL already has a lineWidth() function but Canvas2D requires a lineWidth property\r\n        // Store the original lineWidth() function for later use\r\n        gl.$lineWidth = gl.lineWidth;\r\n        drawState.lineWidth = 1.0;\r\n\r\n        Object.defineProperty(gl, \"lineWidth\", {\r\n            get: function () {\r\n                return drawState.lineWidth;\r\n            },\r\n            set: function (value) {\r\n                if (value > 0) {\r\n                    gl.$lineWidth(value);\r\n                    drawState.lineWidth = value;\r\n                }\r\n            }\r\n        });\r\n\r\n        // Currently unsupported attributes and their default values\r\n        drawState.lineCap = \"butt\";\r\n\r\n        Object.defineProperty(gl, \"lineCap\", {\r\n            get: function () {\r\n                return drawState.lineCap;\r\n            },\r\n            set: function (value) {\r\n                drawState.lineCap = value;\r\n            }\r\n        });\r\n\r\n        drawState.lineJoin = \"miter\";\r\n\r\n        Object.defineProperty(gl, \"lineJoin\", {\r\n            get: function () {\r\n                return drawState.lineJoin;\r\n            },\r\n            set: function (value) {\r\n                drawState.lineJoin = value;\r\n            }\r\n        });\r\n\r\n        drawState.miterLimit = 10;\r\n\r\n        Object.defineProperty(gl, \"miterLimit\", {\r\n            get: function () {\r\n                return drawState.miterLimit;\r\n            },\r\n            set: function (value) {\r\n                drawState.miterLimit = value;\r\n            }\r\n        });\r\n\r\n        drawState.shadowOffsetX = 0;\r\n\r\n        Object.defineProperty(gl, \"shadowOffsetX\", {\r\n            get: function () {\r\n                return drawState.shadowOffsetX;\r\n            },\r\n            set: function (value) {\r\n                drawState.shadowOffsetX = value;\r\n            }\r\n        });\r\n\r\n        drawState.shadowOffsetY = 0;\r\n\r\n        Object.defineProperty(gl, \"shadowOffsetY\", {\r\n            get: function () {\r\n                return drawState.shadowOffsetY;\r\n            },\r\n            set: function (value) {\r\n                drawState.shadowOffsetY = value;\r\n            }\r\n        });\r\n\r\n        drawState.shadowBlur = 0;\r\n\r\n        Object.defineProperty(gl, \"shadowBlur\", {\r\n            get: function () {\r\n                return drawState.shadowBlur;\r\n            },\r\n            set: function (value) {\r\n                drawState.shadowBlur = value;\r\n            }\r\n        });\r\n\r\n        drawState.shadowColor = \"rgba(0, 0, 0, 0.0)\";\r\n\r\n        Object.defineProperty(gl, \"shadowColor\", {\r\n            get: function () {\r\n                return drawState.shadowColor;\r\n            },\r\n            set: function (value) {\r\n                drawState.shadowColor = value;\r\n            }\r\n        });\r\n\r\n        drawState.font = \"10px sans-serif\";\r\n\r\n        Object.defineProperty(gl, \"font\", {\r\n            get: function () {\r\n                return drawState.font;\r\n            },\r\n            set: function (value) {\r\n                textCtx.font = value;\r\n                drawState.font = value;\r\n            }\r\n        });\r\n\r\n        drawState.textAlign = \"start\";\r\n\r\n        Object.defineProperty(gl, \"textAlign\", {\r\n            get: function () {\r\n                return drawState.textAlign;\r\n            },\r\n            set: function (value) {\r\n                drawState.textAlign = value;\r\n            }\r\n        });\r\n\r\n        drawState.textBaseline = \"alphabetic\";\r\n\r\n        Object.defineProperty(gl, \"textBaseline\", {\r\n            get: function () {\r\n                return drawState.textBaseline;\r\n            },\r\n            set: function (value) {\r\n                drawState.textBaseline = value;\r\n            }\r\n        });\r\n\r\n        // This attribute will need to control global alpha of objects drawn.\r\n        drawState.globalAlpha = 1.0;\r\n\r\n        Object.defineProperty(gl, \"globalAlpha\", {\r\n            get: function () {\r\n                return drawState.globalAlpha;\r\n            },\r\n            set: function (value) {\r\n                drawState.globalAlpha = value;\r\n            }\r\n        });\r\n\r\n        // This attribute will need to control smoothing of objects drawn.\r\n        drawState.imageSmoothingEnabled = true;\r\n\r\n        Object.defineProperty(gl, \"imageSmoothingEnabled\", {\r\n            get: function () {\r\n                return drawState.imageSmoothingEnabled;\r\n            },\r\n            set: function (value) {\r\n                drawState.imageSmoothingEnabled = !!value;\r\n            }\r\n        });\r\n\r\n        // This attribute will need to set the gl.blendFunc mode\r\n        drawState.globalCompositeOperation = \"source-over\";\r\n\r\n        Object.defineProperty(gl, \"globalCompositeOperation\", {\r\n            get: function () {\r\n                return drawState.globalCompositeOperation;\r\n            },\r\n            set: function (value) {\r\n                drawState.globalCompositeOperation = value;\r\n            }\r\n        });\r\n\r\n        // Need a solution for drawing text that isnt stupid slow\r\n        gl.fillText = function fillText(text, x, y) {\r\n            // if it exist --key\r\n            textCtx.clearRect(0, 0, gl2d.canvas.width, gl2d.canvas.height);\r\n            textCtx.fillStyle = gl.fillStyle;\r\n            textCtx.fillText(text, x, y);\r\n\r\n            gl.drawImage(textCanvas, 0, 0);\r\n        };\r\n\r\n        gl.strokeText = function strokeText() {\r\n        };\r\n\r\n        gl.measureText = function measureText() {\r\n            return 1;\r\n        };\r\n\r\n        var tempCanvas = document.createElement('canvas');\r\n        var tempCtx = tempCanvas.getContext('2d');\r\n\r\n        gl.save = function save() {\r\n            gl2d.transform.pushMatrix();\r\n            saveDrawState();\r\n        };\r\n\r\n        gl.restore = function restore() {\r\n            gl2d.transform.popMatrix();\r\n            restoreDrawState();\r\n        };\r\n\r\n        gl.translate = function translate(x, y) {\r\n            gl2d.transform.translate(x, y);\r\n        };\r\n\r\n        gl.rotate = function rotate(a) {\r\n            gl2d.transform.rotate(a);\r\n        };\r\n\r\n        gl.scale = function scale(x, y) {\r\n            gl2d.transform.scale(x, y);\r\n        };\r\n\r\n        gl.createImageData = function createImageData(width, height) {\r\n            return tempCtx.createImageData(width, height);\r\n        };\r\n\r\n        gl.getImageData = function getImageData(x, y, width, height) {\r\n            var data = tempCtx.createImageData(width, height);\r\n            var buffer = new Uint8Array(width * height * 4);\r\n            gl.readPixels(x, y, width, height, gl.RGBA, gl.UNSIGNED_BYTE, buffer);\r\n            var w = width * 4, h = height;\r\n            for (var i = 0, maxI = h / 2; i < maxI; ++i) {\r\n                for (var j = 0, maxJ = w; j < maxJ; ++j) {\r\n                    var index1 = i * w + j;\r\n                    var index2 = (h - i - 1) * w + j;\r\n                    data.data[index1] = buffer[index2];\r\n                    data.data[index2] = buffer[index1];\r\n                } //for\r\n            } //for\r\n\r\n            return data;\r\n        };\r\n\r\n        gl.putImageData = function putImageData(imageData, x, y) {\r\n            gl.drawImage(imageData, x, y);\r\n        };\r\n\r\n        gl.transform = function transform(m11, m12, m21, m22, dx, dy) {\r\n            gl2d.transform.tr(m11, m12, m21, m22, dx, dy);\r\n        };\r\n\r\n        function sendTransformStack(sp) {\r\n            var stack = gl2d.transform.m_stack;\r\n            for (var i = 0, maxI = gl2d.transform.c_stack + 1; i < maxI; ++i) {\r\n                gl.uniformMatrix3fv(sp.uTransforms[i], false, stack[maxI - 1 - i]);\r\n            } //for\r\n        }\r\n\r\n        gl.setTransform = function setTransform(m11, m12, m21, m22, dx, dy) {\r\n            gl2d.transform.setIdentity();\r\n            gl.transform.apply(this, arguments);\r\n        };\r\n\r\n        gl.fillRect = function fillRect(x, y, width, height) {\r\n            var transform = gl2d.transform;\r\n            var shaderProgram = gl2d.initShaders(transform.c_stack + 2, 0);\r\n\r\n            gl.bindBuffer(gl.ARRAY_BUFFER, gl.rectVertexPositionBuffer);\r\n            gl.vertexAttribPointer(shaderProgram.vertexPositionAttribute, 4, gl.FLOAT, false, 0, 0);\r\n\r\n            transform.pushMatrix();\r\n\r\n            transform.translate(x, y);\r\n            transform.scale(width, height);\r\n\r\n            sendTransformStack(shaderProgram);\r\n\r\n            gl.uniform4f(shaderProgram.uColor, drawState.fillStyle[0], drawState.fillStyle[1], drawState.fillStyle[2], drawState.fillStyle[3]);\r\n\r\n            gl.drawArrays(gl.TRIANGLE_FAN, 0, 4);\r\n\r\n            transform.popMatrix();\r\n        };\r\n\r\n        gl.strokeRect = function strokeRect(x, y, width, height) {\r\n            var transform = gl2d.transform;\r\n            var shaderProgram = gl2d.initShaders(transform.c_stack + 2, 0);\r\n\r\n            gl.bindBuffer(gl.ARRAY_BUFFER, gl.rectVertexPositionBuffer);\r\n            gl.vertexAttribPointer(shaderProgram.vertexPositionAttribute, 4, gl.FLOAT, false, 0, 0);\r\n\r\n            transform.pushMatrix();\r\n\r\n            transform.translate(x, y);\r\n            transform.scale(width, height);\r\n\r\n            sendTransformStack(shaderProgram);\r\n\r\n            gl.uniform4f(shaderProgram.uColor, drawState.strokeStyle[0], drawState.strokeStyle[1], drawState.strokeStyle[2], drawState.strokeStyle[3]);\r\n\r\n            gl.drawArrays(gl.LINE_LOOP, 0, 4);\r\n\r\n            transform.popMatrix();\r\n        };\r\n\r\n        gl.clearRect = function clearRect(x, y, width, height) {\r\n        };\r\n\r\n        var subPaths = [];\r\n\r\n        function SubPath(x, y) {\r\n            this.closed = false;\r\n            this.verts = [x, y, 0, 0];\r\n        }\r\n\r\n        // Empty the list of subpaths so that the context once again has zero subpaths\r\n        gl.beginPath = function beginPath() {\r\n            subPaths.length = 0;\r\n        };\r\n\r\n        // Mark last subpath as closed and create a new subpath with the same starting point as the previous subpath\r\n        gl.closePath = function closePath() {\r\n            if (subPaths.length) {\r\n                // Mark last subpath closed.\r\n                var prevPath = subPaths[subPaths.length - 1], startX = prevPath.verts[0], startY = prevPath.verts[1];\r\n                prevPath.closed = true;\r\n\r\n                // Create new subpath using the starting position of previous subpath\r\n                var newPath = new SubPath(startX, startY);\r\n                subPaths.push(newPath);\r\n            }\r\n        };\r\n\r\n        // Create a new subpath with the specified point as its first (and only) point\r\n        gl.moveTo = function moveTo(x, y) {\r\n            subPaths.push(new SubPath(x, y));\r\n        };\r\n\r\n        gl.lineTo = function lineTo(x, y) {\r\n            if (subPaths.length) {\r\n                subPaths[subPaths.length - 1].verts.push(x, y, 0, 0);\r\n            } else {\r\n                // Create a new subpath if none currently exist\r\n                gl.moveTo(x, y);\r\n            }\r\n        };\r\n\r\n        gl.quadraticApproximateCount = 50;\r\n        gl.quadraticCurveTo = function quadraticCurveTo(hx, hy, x, y) {\r\n            if (subPaths.length) {\r\n                var verts = subPaths[subPaths.length - 1].verts,\r\n                    fromx = verts[verts.length - 4],\r\n                    fromy = verts[verts.length - 3],\r\n                    t, i, tx, ty;\r\n                for (var j = 0; j < gl.quadraticApproximateCount; j++) {\r\n                    t = j / gl.quadraticApproximateCount;\r\n                    i = 1 - t;\r\n                    tx = i * i * fromx + 2 * i * t * hx + t * t * x;\r\n                    ty = i * i * fromy + 2 * i * t * hy + t * t * y;\r\n                    verts.push(tx, ty, 0, 0);\r\n                }\r\n            } else {\r\n                gl.moveTo(x, y);\r\n            }\r\n        };\r\n\r\n        gl.bezierApproximateCount = 50;\r\n        gl.bezierCurveTo = function quadraticCurveTo(h1x, h1y, h2x, h2y, x, y) {\r\n            if (subPaths.length) {\r\n                var verts = subPaths[subPaths.length - 1].verts,\r\n                    fromx = verts[verts.length - 4],\r\n                    fromy = verts[verts.length - 3],\r\n                    t, i, tx, ty;\r\n                for (var j = 0; j < gl.bezierApproximateCount; j++) {\r\n                    t = j / gl.bezierApproximateCount;\r\n                    i = 1 - t;\r\n                    tx = i * i * i * fromx + 3 * i * i * t * h1x + 3 * i * t * t * h2x + t * t * t * x;\r\n                    ty = i * i * i * fromy + 3 * i * i * t * h1y + 3 * i * t * t * h2y + t * t * t * y;\r\n                    verts.push(tx, ty, 0, 0);\r\n                }\r\n            } else {\r\n                gl.moveTo(x, y);\r\n            }\r\n        };\r\n\r\n        gl.arcTo = function arcTo() {\r\n            if (subPaths.length) {\r\n                ;\r\n            } else {\r\n                gl.moveTo(x, y);\r\n            }\r\n        };\r\n\r\n        // Adds a closed rect subpath and creates a new subpath\r\n        gl.rect = function rect(x, y, w, h) {\r\n            gl.moveTo(x, y);\r\n            gl.lineTo(x + w, y);\r\n            gl.lineTo(x + w, y + h);\r\n            gl.lineTo(x, y + h);\r\n            gl.closePath();\r\n        };\r\n\r\n        gl.arcApproximateCount = 100;\r\n        gl.arc = function arc(cx, cy, radius, startAngle, endAngle, anticlockwise) {\r\n            if (subPaths.length) {\r\n                var verts = subPaths[subPaths.length - 1].verts;\r\n\r\n                // startAngle\r\n                var x = cx + radius * Math.cos(startAngle),\r\n                    y = cy + radius * Math.sin(startAngle);\r\n                verts.push(x, y, 0, 0);\r\n\r\n                while (startAngle > Math.PI * 2)\r\n                    startAngle -= Math.PI * 2;\r\n                while (endAngle > Math.PI * 2)\r\n                    endAngle -= Math.PI * 2;\r\n                while (startAngle < -Math.PI * 2)\r\n                    startAngle += Math.PI * 2;\r\n                while (endAngle < -Math.PI * 2)\r\n                    endAngle += Math.PI * 2;\r\n                if (startAngle == endAngle)\r\n                    return;\r\n\r\n                var count = 1 / gl.arcApproximateCount,\r\n                    fixed = gl.arcApproximateCount,\r\n                    t;\r\n                if (anticlockwise) {\r\n                    endAngle -= Math.PI * 2;\r\n                    count = -count;\r\n                }\r\n                for (var i = startAngle; (i > endAngle && anticlockwise) || (i < endAngle && !anticlockwise); i += count) {\r\n                    if (t == (t = (i * fixed | 0) / fixed))\r\n                        continue;\r\n                    x = cx + radius * Math.cos(t);\r\n                    y = cy + radius * Math.sin(t);\r\n                    verts.push(x, y, 0, 0);\r\n                }\r\n            } else {\r\n                gl.moveTo(x, y);\r\n            }\r\n        };\r\n\r\n        function fillSubPath(index) {\r\n            var transform = gl2d.transform;\r\n            var shaderProgram = gl2d.initShaders(transform.c_stack + 2, 0);\r\n\r\n            var subPath = subPaths[index];\r\n            var verts = subPath.verts;\r\n\r\n            gl.bindBuffer(gl.ARRAY_BUFFER, gl.pathVertexPositionBuffer);\r\n            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(verts), gl.STATIC_DRAW);\r\n\r\n            gl.vertexAttribPointer(shaderProgram.vertexPositionAttribute, 4, gl.FLOAT, false, 0, 0);\r\n\r\n            transform.pushMatrix();\r\n\r\n            sendTransformStack(shaderProgram);\r\n\r\n            gl.uniform4f(shaderProgram.uColor, drawState.fillStyle[0], drawState.fillStyle[1], drawState.fillStyle[2], drawState.fillStyle[3]);\r\n\r\n            gl.drawArrays(gl.TRIANGLE_FAN, 0, verts.length / 4);\r\n\r\n            transform.popMatrix();\r\n        }\r\n\r\n        gl.fill = function fill() {\r\n            for (var i = 0; i < subPaths.length; i++) {\r\n                fillSubPath(i);\r\n            }\r\n        };\r\n\r\n        function strokeSubPath(index) {\r\n            var transform = gl2d.transform;\r\n            var shaderProgram = gl2d.initShaders(transform.c_stack + 2, 0);\r\n\r\n            var subPath = subPaths[index];\r\n            var verts = subPath.verts;\r\n\r\n            gl.bindBuffer(gl.ARRAY_BUFFER, gl.pathVertexPositionBuffer);\r\n            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(verts), gl.STATIC_DRAW);\r\n\r\n            gl.vertexAttribPointer(shaderProgram.vertexPositionAttribute, 4, gl.FLOAT, false, 0, 0);\r\n\r\n            transform.pushMatrix();\r\n\r\n            sendTransformStack(shaderProgram);\r\n\r\n            gl.uniform4f(shaderProgram.uColor, drawState.strokeStyle[0], drawState.strokeStyle[1], drawState.strokeStyle[2], drawState.strokeStyle[3]);\r\n\r\n            if (subPath.closed) {\r\n                gl.drawArrays(gl.LINE_LOOP, 0, verts.length / 4);\r\n            } else {\r\n                gl.drawArrays(gl.LINE_STRIP, 0, verts.length / 4);\r\n            }\r\n\r\n            transform.popMatrix();\r\n        }\r\n\r\n        gl.stroke = function stroke() {\r\n            for (var i = 0; i < subPaths.length; i++) {\r\n                strokeSubPath(i);\r\n            }\r\n        };\r\n\r\n        gl.clip = function clip() {\r\n        };\r\n\r\n        gl.isPointInPath = function isPointInPath() {\r\n        };\r\n\r\n        gl.drawFocusRing = function drawFocusRing() {\r\n        };\r\n\r\n\r\n        var imageCache = [], textureCache = [];\r\n\r\n        function Texture(image) {\r\n            this.obj = gl.createTexture();\r\n            this.index = textureCache.push(this);\r\n\r\n            imageCache.push(image);\r\n\r\n            // we may wish to consider tiling large images like this instead of scaling and\r\n            // adjust appropriately (flip to next texture source and tile offset) when drawing\r\n            if (image.width > gl2d.maxTextureSize || image.height > gl2d.maxTextureSize) {\r\n                var canvas = document.createElement(\"canvas\");\r\n\r\n                canvas.width = (image.width > gl2d.maxTextureSize) ? gl2d.maxTextureSize : image.width;\r\n                canvas.height = (image.height > gl2d.maxTextureSize) ? gl2d.maxTextureSize : image.height;\r\n\r\n                var ctx = canvas.getContext(\"2d\");\r\n\r\n                ctx.drawImage(image, 0, 0, image.width, image.height, 0, 0, canvas.width, canvas.height);\r\n\r\n                image = canvas;\r\n            }\r\n\r\n            var GL_FUNCTION = gl.LINEAR;\r\n            var GL_MIPMAP_FUNCTION = gl.LINEAR_MIPMAP_LINEAR;\r\n\r\n            if (!drawState.imageSmoothingEnabled) {\r\n                GL_FUNCTION = gl.NEAREST;\r\n                GL_MIPMAP_FUNCTION = gl.LINEAR_MIPMAP_NEAREST;\r\n            }\r\n\r\n            gl.bindTexture(gl.TEXTURE_2D, this.obj);\r\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\r\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, GL_FUNCTION);\r\n\r\n            // Enable Mip mapping on power-of-2 textures\r\n            if (isPOT(image.width) && isPOT(image.height)) {\r\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, GL_MIPMAP_FUNCTION);\r\n                gl.generateMipmap(gl.TEXTURE_2D);\r\n            } else {\r\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, GL_FUNCTION);\r\n            }\r\n\r\n            // Unbind texture\r\n            gl.bindTexture(gl.TEXTURE_2D, null);\r\n        }\r\n\r\n        gl.drawImage = function drawImage(image, a, b, c, d, e, f, g, h) {\r\n            var transform = gl2d.transform;\r\n\r\n            transform.pushMatrix();\r\n\r\n            var sMask = shaderMask.texture;\r\n            var doCrop = false;\r\n\r\n            //drawImage(image, dx, dy)\r\n            if (arguments.length === 3) {\r\n                transform.translate(a, b);\r\n                transform.scale(image.width, image.height);\r\n            }\r\n\r\n            //drawImage(image, dx, dy, dw, dh)\r\n            else if (arguments.length === 5) {\r\n                transform.translate(a, b);\r\n                transform.scale(c, d);\r\n            }\r\n\r\n            //drawImage(image, sx, sy, sw, sh, dx, dy, dw, dh)\r\n            else if (arguments.length === 9) {\r\n                transform.translate(e, f);\r\n                transform.scale(g, h);\r\n                sMask = sMask | shaderMask.crop;\r\n                doCrop = true;\r\n            }\r\n\r\n            var shaderProgram = gl2d.initShaders(transform.c_stack + 1, sMask);\r\n\r\n            var texture, cacheIndex = imageCache.indexOf(image);\r\n\r\n            if (cacheIndex !== -1) {\r\n                texture = textureCache[cacheIndex];\r\n            } else {\r\n                texture = new Texture(image);\r\n            }\r\n\r\n            if (doCrop) {\r\n                gl.uniform4f(shaderProgram.uCropSource, a / image.width, b / image.height, c / image.width, d / image.height);\r\n            }\r\n\r\n            gl.bindBuffer(gl.ARRAY_BUFFER, gl.rectVertexPositionBuffer);\r\n            gl.vertexAttribPointer(shaderProgram.vertexPositionAttribute, 4, gl.FLOAT, false, 0, 0);\r\n\r\n            gl.bindTexture(gl.TEXTURE_2D, texture.obj);\r\n            gl.activeTexture(gl.TEXTURE0);\r\n\r\n            gl.uniform1i(shaderProgram.uSampler, 0);\r\n\r\n            sendTransformStack(shaderProgram);\r\n            gl.drawArrays(gl.TRIANGLE_FAN, 0, 4);\r\n\r\n            transform.popMatrix();\r\n        };\r\n\r\n        // This enables the user to detect whether they got a webgl-2d context or a 2d context.\r\n        Object.defineProperty(gl, \"isWebGL\", {\r\n            configurable: false,\r\n            enumerable: true,\r\n            writable: false,\r\n            value: true\r\n        });\r\n    };\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.WebGL2D = WebGL2D;\r\n    return WebGL2D;\r\n}));\r\n","(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('media/Audio', ['utils/UUID', 'utils/Events'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(require('utils/UUID'), require('utils/Events'));\r\n    } else {\r\n        factory(root.UUID, root.Events);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function (UUID, Events) {\r\n    \"use strict\";\r\n\r\n    var cache = {};\r\n    var AudioNode = global.Audio; // TODO:: fix this bug!\r\n\r\n    /**\r\n     * @param {Audio.defaults|Object} [data]\r\n     * @param {MediaManager} [manager]\r\n     * @constructor\r\n     */\r\n    var Audio = function (data, manager) {\r\n        var audio = this;\r\n        audio.manager = manager !== undefined ? manager : null;\r\n        audio.events = !!audio.manager ? audio.manager.events : new Events();\r\n        audio.data = $.extend(true, {}, Audio.defaults, data);\r\n\r\n        audio.audioNode = [];\r\n\r\n        if (audio.data.id === null) {\r\n            audio.data.id = UUID.generate();\r\n        }\r\n\r\n        if (audio.manager) audio.manager.media.get('audios').add(audio.data.id, audio);\r\n\r\n        audio.load();\r\n    };\r\n\r\n    Audio.defaults = {\r\n        id: null,\r\n        src: [],\r\n        format: null,\r\n        autoPlay: false,\r\n\r\n        duration: 0,\r\n        loop: false,\r\n        sprite: {},\r\n        volume: 1,\r\n        muted: false,\r\n        pos3d: [0, 0, -0.5],\r\n\r\n        loaded: false,\r\n        onEndTimer: []\r\n    };\r\n\r\n    Audio.prototype._load = function (audio) {\r\n        var audioNode = new AudioNode();\r\n\r\n        audioNode.addEventListener('error', function () {\r\n            console.error({type: audioNode.error ? audioNode.error.code : 0});\r\n        }, false);\r\n\r\n        audio.audioNode.push(audioNode);\r\n\r\n        audioNode.src = audio.data.src;\r\n        audioNode.pos = 0;\r\n        audioNode.preload = 'auto';\r\n        audioNode.volume = (!!audio.manager)\r\n            ? (audio.manager.muted) ? 0 : audio.data.volume * (audio.manager.volume / 100)\r\n            : (audio.data.muted) ? 0 : audio.data.volume;\r\n\r\n        var listener = function () {\r\n            audio.data.duration = Math.ceil(audioNode.duration * 10) / 10;\r\n\r\n            if (Object.getOwnPropertyNames(audio.data.sprite).length === 0) {\r\n                audio.data.sprite = {default: [0, audio.data.duration * 1000]};\r\n            }\r\n\r\n            if (!audio.data.loaded) {\r\n                audio.data.loaded = true;\r\n                audio.events.trigger('load');\r\n            }\r\n\r\n            if (audio.data.autoPlay) {\r\n                audio.play();\r\n            }\r\n\r\n            audioNode.removeEventListener('canplaythrough', listener, false);\r\n        };\r\n        audioNode.addEventListener('canplaythrough', listener, false);\r\n        audioNode.load();\r\n\r\n        return audio;\r\n    };\r\n\r\n    Audio.prototype.load = function () {\r\n        var audio = this;\r\n        var url = '', extension = '';\r\n\r\n        if (audio.manager && (!!audio.manager.isSupportAudio)) {\r\n            console.warn('No audio support.');\r\n            return false;\r\n        }\r\n\r\n        var extractFormat = function (source, format) {\r\n            if (format) return format;\r\n\r\n            var extension = /^data:audio\\/([^;,]+);/i.exec(source);\r\n            if (!extension) {\r\n                extension = /\\.([^.]+)$/.exec(source.split('?', 1)[0]);\r\n            }\r\n\r\n            if (extension) {\r\n                return extension[1].toLowerCase();\r\n            } else {\r\n                console.warn('Could not extract format from passed URLs, please add format');\r\n            }\r\n            return null;\r\n        };\r\n\r\n        if (audio.data.src instanceof Array) {\r\n            for (var i = 0; i < audio.data.src.length; i++) {\r\n                url = audio.data.src[i];\r\n                extension = extractFormat(audio.data.src[i], audio.data.format);\r\n                if (null !== extension) break;\r\n            }\r\n            audio.data.src = url;\r\n        } else if (typeof audio.data.src === 'string') {\r\n            extension = extractFormat(audio.data.src, audio.data.format);\r\n        } else {\r\n            console.warn('Unknown audio source');\r\n            return false;\r\n        }\r\n\r\n        if (audio.manager && audio.manager.isSupportCodec[extension]) {\r\n            console.warn('Codec not support');\r\n            return false;\r\n        }\r\n\r\n        return audio._load(audio);\r\n    };\r\n\r\n    Audio.prototype._unload = function (audioNode) {\r\n        audioNode.src = '';\r\n    };\r\n\r\n    Audio.prototype.unload = function () {\r\n        var audio = this;\r\n\r\n        var nodes = audio.audioNode;\r\n        for (var i = 0; i < audio.audioNode.length; i++) {\r\n            if (!nodes[i].paused) {\r\n                audio.stop(nodes[i].id);\r\n                audio.events.trigger('end', nodes[i].id); // TODO:: unload\r\n            }\r\n            audio._unload(nodes[i]);\r\n        }\r\n\r\n        for (i = 0; i < audio.data.onEndTimer.length; i++) {\r\n            clearTimeout(audio.data.onEndTimer[i].timer);\r\n        }\r\n\r\n        if (audio.manager) {\r\n            var audios = this.manager.get('audios');\r\n            var index = audios.indexOf(audio);\r\n            if (index !== null && index >= 0) {\r\n                audios.splice(index, 1);\r\n            }\r\n        }\r\n\r\n        delete cache[audio.data.src];\r\n        audio = null;\r\n    };\r\n\r\n    Audio.prototype.src = function (source) {\r\n        var audio = this;\r\n\r\n        if (source) {\r\n            audio.stop();\r\n            audio.data.src = source;\r\n            audio.data.loaded = false;\r\n            audio.load();\r\n        } //TODO:: else throw\r\n\r\n        return null;\r\n    };\r\n\r\n    Audio.prototype.play = function (sprite, callback) {\r\n        var audio = this;\r\n\r\n        if (typeof sprite === 'function') callback = sprite;\r\n        if (!sprite || typeof sprite === 'function') sprite = 'default';\r\n\r\n        if (!audio.data.loaded) {\r\n            audio.events.on('load', function () {\r\n                audio.play(sprite, callback);\r\n            });\r\n\r\n            return audio;\r\n        }\r\n\r\n        if (!audio.data.sprite[sprite]) {\r\n            if (typeof callback === 'function') callback();\r\n            return audio;\r\n        }\r\n\r\n        audio._inactiveNode(audio, function (node) {\r\n            node.sprite = sprite;\r\n\r\n            var pos = (node.pos > 0) ? node.pos : audio.data.sprite[sprite][0] / 1000;\r\n            var duration = audio.data.sprite[sprite][1] / 1000 - (pos - audio.data.sprite[sprite][0] / 1000);\r\n            var loop = !!(audio.data.loop || audio.data.sprite[sprite][2]);\r\n\r\n            var soundId = (typeof callback === 'string')\r\n                ? callback\r\n                : Math.round(Date.now() * Math.random()) + '', timerId;\r\n\r\n            (function () {\r\n                var data = {\r\n                    id: soundId,\r\n                    sprite: sprite,\r\n                    loop: loop\r\n                };\r\n\r\n                timerId = setTimeout(function () {\r\n                    if (loop) {\r\n                        audio.stop(data.id).play(sprite, data.id);\r\n                    } else {\r\n                        audio.stop(data.id);\r\n                    }\r\n\r\n                    audio.events.trigger('end', soundId);\r\n                }, (duration / audio.data.rate) * 1000);\r\n\r\n                audio.data.onEndTimer.push({timer: timerId, id: data.id});\r\n            })();\r\n\r\n\r\n            if (node.readyState === 4 || !node.readyState && navigator.isCocoonJS) {\r\n                node.id = soundId;\r\n                node.currentTime = pos;\r\n\r\n                node.muted = audio.manager\r\n                    ? (audio.manager.muted || node.muted)\r\n                    : (audio.data.muted || node.muted);\r\n\r\n                node.volume = audio.manager\r\n                    ? audio.data.volume * (audio.manager.volume / 100)\r\n                    : audio.data.volume;\r\n\r\n                setTimeout(function () {\r\n                    node.play();\r\n                }, 0);\r\n            } else {\r\n                audio._clearEndTimer(soundId);\r\n\r\n                (function () {\r\n                    var audio = audio,\r\n                        playSprite = sprite,\r\n                        fn = callback,\r\n                        newNode = node;\r\n\r\n                    var listener = function () {\r\n                        audio.play(playSprite, fn);\r\n                        newNode.removeEventListener('canplaythrough', listener, false);\r\n                    };\r\n\r\n                    newNode.addEventListener('canplaythrough', listener, false);\r\n                })();\r\n\r\n                return audio;\r\n            }\r\n\r\n            audio.events.trigger('play');\r\n            if (typeof callback === 'function') callback(soundId);\r\n\r\n            return audio;\r\n        });\r\n\r\n        return audio;\r\n    };\r\n\r\n    Audio.prototype._pause = function (activeNode) {\r\n        activeNode.pause();\r\n        return false;\r\n    };\r\n\r\n    Audio.prototype.pause = function (id) {\r\n        var audio = this;\r\n\r\n        if (!audio.data.loaded) {\r\n            audio.events.on('play', function () {\r\n                audio.pause(id);\r\n            });\r\n            return audio;\r\n        }\r\n\r\n        audio._clearEndTimer(audio, id);\r\n\r\n        var activeNode = (id) ? audio._nodeById(id) : audio._activeNode(audio);\r\n        if (activeNode) {\r\n            activeNode.pos = audio.pos(null, id);\r\n            var result = audio._pause(activeNode);\r\n            if (result) return audio;\r\n        }\r\n\r\n        audio.events.trigger('pause');\r\n\r\n        return audio;\r\n    };\r\n\r\n    Audio.prototype._stop = function (activeNode) {\r\n        if (!isNaN(activeNode.duration)) {\r\n            activeNode.pause();\r\n            activeNode.currentTime = 0;\r\n        }\r\n        return false;\r\n    };\r\n\r\n    Audio.prototype.stop = function (id) {\r\n        var audio = this;\r\n\r\n        if (!audio.data.loaded) {\r\n            audio.events.on('play', function () {\r\n                audio.stop(id);\r\n            });\r\n\r\n            return audio;\r\n        }\r\n\r\n        audio._clearEndTimer(audio, id);\r\n\r\n        var activeNode = (id) ? audio._nodeById(audio, id) : audio._activeNode(audio);\r\n        if (activeNode) {\r\n            activeNode.pos = 0;\r\n            var result = audio._stop(activeNode);\r\n            if (result) return audio;\r\n        }\r\n\r\n        return audio;\r\n    };\r\n\r\n    Audio.prototype._mute = function (activeNode) {\r\n        activeNode.muted = true;\r\n    };\r\n\r\n    Audio.prototype.mute = function (id) {\r\n        var audio = this;\r\n\r\n        if (!audio.data.loaded) {\r\n            audio.events.on('play', function () {\r\n                audio.mute(id);\r\n            });\r\n            return audio;\r\n        }\r\n\r\n        var activeNode = (id) ? audio._nodeById(id) : audio._activeNode(audio);\r\n        if (activeNode) audio._mute();\r\n\r\n        return audio;\r\n    };\r\n\r\n    Audio.prototype._unMute = function (activeNode) {\r\n        activeNode.muted = false;\r\n    };\r\n\r\n    Audio.prototype.unMute = function (id) {\r\n        var audio = this;\r\n\r\n        if (!audio.data.loaded) {\r\n            audio.events.on('play', function () {\r\n                audio.unMute(id);\r\n            });\r\n            return audio;\r\n        }\r\n\r\n        var activeNode = (id) ? audio._nodeById(id) : audio._activeNode(audio);\r\n        if (activeNode) audio._unMute();\r\n\r\n        return audio;\r\n    };\r\n\r\n    Audio.prototype._volume = function (activeNode, vol) {\r\n        activeNode.volume = vol;\r\n    };\r\n\r\n    Audio.prototype.volume = function (vol, id) {\r\n        var audio = this;\r\n\r\n        vol = parseFloat(vol);\r\n\r\n        if (vol >= 0 && vol <= 1) {\r\n            audio.data.volume = vol;\r\n\r\n            if (!audio.data.loaded) {\r\n                audio.events.on('play', function () {\r\n                    audio.volume(vol, id);\r\n                });\r\n                return audio;\r\n            }\r\n\r\n            var activeNode = (id) ? audio._nodeById(id) : audio._activeNode(audio);\r\n            if (activeNode) {\r\n                vol = audio.manager\r\n                    ? vol * (audio.manager.volume / 100)\r\n                    : audio.data.volume;\r\n                audio._volume(vol);\r\n            }\r\n\r\n            return audio;\r\n        }\r\n        return audio.data.volume;\r\n    };\r\n\r\n    Audio.prototype.loop = function (loop) {\r\n        var audio = this;\r\n\r\n        if (typeof loop === 'boolean') {\r\n            audio.data.loop = loop;\r\n            return audio;\r\n        }\r\n        return audio.data.loop;\r\n    };\r\n\r\n    Audio.prototype.sprite = function (sprite) {\r\n        var audio = this;\r\n\r\n        if (typeof sprite === 'object') {\r\n            audio.data.sprite = sprite;\r\n            return audio;\r\n        }\r\n        return audio.data.sprite;\r\n    };\r\n\r\n    Audio.prototype._position = function (activeNode, v) {\r\n        return activeNode.currentTime;\r\n    };\r\n\r\n    Audio.prototype.pos = function (pos, id) {\r\n        var audio = this;\r\n\r\n        if (!audio.data.loaded) {\r\n            audio.events.on('load', function () {\r\n                audio.pos(pos);\r\n            });\r\n            return typeof pos === 'number' ? audio : audio.data.pos || 0;\r\n        }\r\n\r\n        pos = parseFloat(pos);\r\n\r\n        var activeNode = (id) ? audio._nodeById(id) : audio._activeNode(audio);\r\n        if (activeNode) {\r\n            if (pos >= 0) {\r\n                audio.pause(id);\r\n                activeNode.pos = pos;\r\n                audio.play(activeNode.sprite, id);\r\n                return audio;\r\n            } else {\r\n                return audio._position(activeNode, false);\r\n            }\r\n        } else if (pos >= 0) {\r\n            return audio;\r\n        } else {\r\n            for (var i = 0; i < audio.audioNode.length; i++) {\r\n                if (audio.audioNode[i].paused && audio.audioNode[i].readyState === 4) {\r\n                    return audio._position(audio.audioNode[i], true);\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    Audio.prototype._pos3d = function (activeNode, x, y, zsaz) {\r\n        return null;\r\n    };\r\n\r\n    Audio.prototype.pos3d = function (x, y, z, id) {\r\n        var audio = this;\r\n\r\n        y = (typeof y === 'undefined' || !y) ? 0 : y;\r\n        z = (typeof z === 'undefined' || !z) ? -0.5 : z;\r\n\r\n        if (!audio.data.loaded) {\r\n            audio.events.on('play', function () {\r\n                audio.pos3d(x, y, z, id);\r\n            });\r\n            return audio;\r\n        }\r\n\r\n        if (x >= 0 || x < 0) {\r\n            var activeNode = (id) ? audio._nodeById(id) : audio._activeNode(audio);\r\n            audio._pos3d(activeNode, x, y, z);\r\n        } else {\r\n            return audio.data.pos3d;\r\n        }\r\n\r\n        return audio;\r\n    };\r\n\r\n    /* Private */\r\n\r\n    Audio.prototype._nodeById = function (audio, id) {\r\n        var node = audio.audioNode[0];\r\n\r\n        for (var i = 0; i < audio.audioNode.length; i++) {\r\n            if (audio.audioNode[i].id === id) {\r\n                node = audio.audioNode[i];\r\n                break;\r\n            }\r\n        }\r\n\r\n        return node;\r\n    };\r\n\r\n    Audio.prototype._clearEndTimer = function (audio, id) {\r\n        var index = -1;\r\n\r\n        for (var i = 0; i < audio.data.onEndTimer.length; i++) {\r\n            if (audio.data.onEndTimer[i].id === id) {\r\n                index = i;\r\n                break;\r\n            }\r\n        }\r\n\r\n        var timer = audio.data.onEndTimer[index];\r\n        if (timer) {\r\n            clearTimeout(timer.timer);\r\n            audio.data.onEndTimer.splice(index, 1);\r\n        }\r\n    };\r\n\r\n    Audio.prototype._activeNode = function (audio) {\r\n        var node = null;\r\n\r\n        for (var i = 0; i < audio.audioNode.length; i++) {\r\n            if (!audio.audioNode[i].paused) {\r\n                node = audio.audioNode[i];\r\n                break;\r\n            }\r\n        }\r\n\r\n        audio._drainPool(audio);\r\n\r\n        return node;\r\n    };\r\n\r\n    Audio.prototype._inactiveNode = function (audio, callback) {\r\n        var node = null;\r\n\r\n        for (var i = 0; i < audio.audioNode.length; i++) {\r\n            if (audio.audioNode[i].paused && audio.audioNode[i].readyState === 4) {\r\n                callback(audio.audioNode[i]);\r\n                node = true;\r\n                break;\r\n            }\r\n        }\r\n\r\n        audio._drainPool(audio);\r\n\r\n        if (node) return;\r\n\r\n        audio.load();\r\n        var newNode = audio.audioNode[audio.audioNode.length - 1];\r\n        var listenerEvent = navigator.isCocoonJS ? 'canplaythrough' : 'loadedmetadata';\r\n        var listener = function () {\r\n            newNode.removeEventListener(listenerEvent, listener, false);\r\n            callback(newNode);\r\n        };\r\n        newNode.addEventListener(listenerEvent, listener, false);\r\n    };\r\n\r\n    Audio.prototype._drainPool = function (audio) {\r\n        var inactive = 0;\r\n\r\n        for (var i = 0; i < audio.audioNode.length; i++) {\r\n            if (audio.audioNode[i].paused) inactive++;\r\n        }\r\n\r\n        for (i = audio.audioNode.length - 1; i >= 0; i--) {\r\n            if (inactive <= 5) break;\r\n\r\n            if (audio.audioNode[i].paused) {\r\n                audio.audioNode.splice(i, 1);\r\n                inactive--;\r\n            }\r\n        }\r\n    };\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.Audio = Audio;\r\n    if (global.J2D !== undefined) global.Audio = Audio;\r\n    return Audio;\r\n}));\r\n","(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('media/Sound', ['utils/UUID', 'utils/Events', 'media/Audio'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(require('utils/UUID'), require('utils/Events'), require('media/Audio'));\r\n    } else {\r\n        factory(root.UUID, root.Events, root.Audio);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function (UUID, Events, Audio) {\r\n    \"use strict\";\r\n\r\n    var cache = {};\r\n    var audioContext;\r\n    var masterGain;\r\n\r\n    function createMasterGain() {\r\n        if (audioContext) {\r\n            masterGain = (audioContext.createGain === undefined)\r\n                ? audioContext.createGainNode()\r\n                : audioContext.createGain();\r\n            masterGain.gain.value = 1;\r\n            masterGain.connect(audioContext.destination);\r\n            return masterGain;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * @param {Audio.defaults|Object} [data]\r\n     * @param {MediaManager} [manager]\r\n     * @constructor\r\n     */\r\n    var Sound = function (data, manager) {\r\n        var sound = this;\r\n        Audio.call(this, data, manager);\r\n\r\n        sound.manager = manager;\r\n        sound.events = !!sound.manager ? sound.manager.events : new Events();\r\n        sound.data = $.extend(true, {}, Sound.defaults, data);\r\n        sound.audioNode = [];\r\n        audioContext = manager\r\n            ? manager.getAudioContext()\r\n            : new (global.AudioContext || global.webkitAudioContext);\r\n\r\n        masterGain = manager\r\n            ? manager.getMasterGain()\r\n            : createMasterGain();\r\n\r\n        if (sound.data.id === null) {\r\n            sound.data.id = UUID.generate();\r\n        }\r\n\r\n        if (audioContext && sound.data.buffer) {\r\n            _setupAudioNode(sound);\r\n        }\r\n\r\n        if (sound.manager && audioContext && sound.manager.data.iOSAutoEnable) {\r\n            sound.manager.iOSEnable = true;\r\n        }\r\n\r\n        if (sound.manager) sound.manager.media.get('sounds').add(sound.data.id, sound);\r\n\r\n        sound.load();\r\n    };\r\n\r\n    Sound.defaults = {\r\n        id: null,\r\n        src: [],\r\n        format: null,\r\n        autoPlay: false,\r\n\r\n        duration: 0,\r\n        loop: false,\r\n        sprite: {},\r\n        volume: 1,\r\n        muted: false,\r\n        pos3d: [0, 0, -0.5],\r\n        rate: 1,\r\n\r\n        loaded: false,\r\n        buffer: false,\r\n        model: null,\r\n        onEndTimer: []\r\n    };\r\n\r\n    Sound.prototype = Object.create(Audio.prototype);\r\n    Sound.prototype.constructor = Sound;\r\n\r\n    Sound.prototype._load = function (sound) {\r\n        loadBuffer(sound, sound.data.src);\r\n        return sound;\r\n    };\r\n\r\n    Sound.prototype._unload = function (soundNode) {\r\n        soundNode.disconnect(0);\r\n    };\r\n\r\n    Sound.prototype.play = function (sprite, callback) {\r\n        var sound = this;\r\n\r\n        if (typeof sprite === 'function')  callback = sprite;\r\n\r\n        if (!sprite || typeof sprite === 'function') sprite = 'default';\r\n\r\n        if (!sound.data.loaded) {\r\n            sound.events.on('load', function () {\r\n                sound.play(sprite, callback);\r\n            });\r\n\r\n            return sound;\r\n        }\r\n\r\n        if (!sound.data.sprite[sprite]) {\r\n            if (typeof callback === 'function') callback();\r\n            return sound;\r\n        }\r\n\r\n        sound._inactiveNode(sound, function (node) {\r\n            node.sprite = sprite;\r\n\r\n            var pos = (node.pos > 0) ? node.pos : sound.data.sprite[sprite][0] / 1000;\r\n            var duration = sound.data.sprite[sprite][1] / 1000 - node.pos;\r\n            if (node.pos > 0) pos = sound.data.sprite[sprite][0] / 1000 + pos;\r\n            var loop = !!(sound.data.loop || sound.data.sprite[sprite][2]);\r\n\r\n            var soundId = (typeof callback === 'string')\r\n                ? callback\r\n                : Math.round(Date.now() * Math.random()) + '', timerId;\r\n\r\n            (function () {\r\n                var data = {\r\n                    id: soundId,\r\n                    sprite: sprite,\r\n                    loop: loop\r\n                };\r\n\r\n                timerId = setTimeout(function () {\r\n                    if (audioContext && !loop) {\r\n                        sound._nodeById(sound, data.id).paused = true;\r\n                        sound._nodeById(sound, data.id).pos = 0;\r\n                        sound._clearEndTimer(sound, data.id);\r\n                    }\r\n                    sound.events.trigger('end', soundId);\r\n                }, (duration / sound.data.rate) * 1000);\r\n\r\n                sound.data.onEndTimer.push({timer: timerId, id: data.id});\r\n            })();\r\n\r\n            var loopStart = sound.data.sprite[sprite][0] / 1000,\r\n                loopEnd = sound.data.sprite[sprite][1] / 1000;\r\n\r\n            node.id = soundId;\r\n            node.paused = false;\r\n            refreshBuffer(sound, [loop, loopStart, loopEnd], soundId);\r\n            sound.data.playStart = audioContext.currentTime;\r\n            node.gain.value = sound.data.volume;\r\n\r\n            if (typeof node.bufferSource.start === 'undefined') {\r\n                loop ? node.bufferSource.noteGrainOn(0, pos, 86400) : node.bufferSource.noteGrainOn(0, pos, duration);\r\n            } else {\r\n                loop ? node.bufferSource.start(0, pos, 86400) : node.bufferSource.start(0, pos, duration);\r\n            }\r\n\r\n            sound.events.trigger('play');\r\n            if (typeof callback === 'function') callback(soundId);\r\n\r\n            return sound;\r\n        });\r\n\r\n        return sound;\r\n    };\r\n\r\n    Sound.prototype._pause = function (activeNode) {\r\n        if (!activeNode.bufferSource || activeNode.paused) {\r\n            return true;\r\n        }\r\n\r\n        activeNode.paused = true;\r\n        if (activeNode.bufferSource.stop == undefined) {\r\n            activeNode.bufferSource.noteOff(0);\r\n        } else {\r\n            activeNode.bufferSource.stop(0);\r\n        }\r\n        return false;\r\n    };\r\n\r\n    Sound.prototype._stop = function (activeNode) {\r\n        if (!activeNode.bufferSource || activeNode.paused) {\r\n            return true;\r\n        }\r\n\r\n        activeNode.paused = true;\r\n\r\n        if (typeof activeNode.bufferSource.stop === 'undefined') {\r\n            activeNode.bufferSource.noteOff(0);\r\n        } else {\r\n            activeNode.bufferSource.stop(0);\r\n        }\r\n        return false;\r\n    };\r\n\r\n    Sound.prototype._mute = function (activeNode) {\r\n        activeNode.gain.value = 0;\r\n    };\r\n\r\n    Sound.prototype._unMute = function (activeNode) {\r\n        activeNode.gain.value = this.data.volume;\r\n    };\r\n\r\n    Sound.prototype._volume = function (activeNode, vol) {\r\n        activeNode.gain.value = vol;\r\n    };\r\n\r\n    Sound.prototype._position = function (activeNode, v) {\r\n        if (v !== undefined && v == true) return activeNode.pos;\r\n        return activeNode.pos + (audioContext.currentTime - this.data.playStart);\r\n    };\r\n\r\n    Sound.prototype._pos3d = function (activeNode, x, y, z) {\r\n        if (activeNode) {\r\n            this.data.pos3d = [x, y, z];\r\n            activeNode.panner.setPosition(x, y, z);\r\n            activeNode.panner.panningModel = this.data.model || 'HRTF';\r\n        }\r\n    };\r\n\r\n    Sound.prototype._setupAudioNode = function () {\r\n        var sound = this,\r\n            node = sound.audioNode,\r\n            index = sound.audioNode.length;\r\n\r\n        node[index] = (audioContext.createGain === undefined)\r\n            ? audioContext.createGainNode()\r\n            : audioContext.createGain();\r\n\r\n        node[index].gain.value = sound.data.volume;\r\n        node[index].paused = true;\r\n        node[index].pos = 0;\r\n        node[index].readyState = 4;\r\n        node[index].connect(masterGain);\r\n\r\n        node[index].panner = audioContext.createPanner();\r\n        node[index].panner.panningModel = sound.data.model || 'equalpower';\r\n        node[index].panner.setPosition(sound.data.pos3d[0], sound.data.pos3d[1], sound.data.pos3d[2]);\r\n        node[index].panner.connect(node[index]);\r\n\r\n        return node[index];\r\n    };\r\n\r\n\r\n    /* Private */\r\n\r\n    Sound.prototype._inactiveNode = function (sound, callback) {\r\n        var node = null;\r\n\r\n        for (var i = 0; i < sound.audioNode.length; i++) {\r\n            if (sound.audioNode[i].paused && sound.audioNode[i].readyState === 4) {\r\n                callback(sound.audioNode[i]);\r\n                node = true;\r\n                break;\r\n            }\r\n        }\r\n\r\n        sound._drainPool(sound);\r\n\r\n        if (node) return;\r\n\r\n        var newNode = sound._setupAudioNode();\r\n        callback(newNode);\r\n    };\r\n\r\n    Sound.prototype._drainPool = function (sound) {\r\n        var inactive = 0;\r\n\r\n        for (var i = 0; i < sound.audioNode.length; i++) {\r\n            if (sound.audioNode[i].paused) inactive++;\r\n        }\r\n\r\n        for (i = sound.audioNode.length - 1; i >= 0; i--) {\r\n            if (inactive <= 5) break;\r\n\r\n            if (sound.audioNode[i].paused) {\r\n                if (audioContext) sound.audioNode[i].disconnect(0);\r\n                sound.audioNode.splice(i, 1);\r\n                inactive--;\r\n            }\r\n        }\r\n    };\r\n\r\n\r\n    /* WebAudioAPI Helpers */\r\n    /**\r\n     * Buffer a sound from URL (or from cache) and decode to audio source (Web Audio API).\r\n     * @param  {Object} sound The Sound object for the sound to load.\r\n     * @param  {String} url The path to the sound file.\r\n     */\r\n    var loadBuffer = function (sound, url) {\r\n        if (url in cache) {\r\n            sound.data.duration = cache[url].duration;\r\n\r\n            loadSound(sound);\r\n            return;\r\n        }\r\n\r\n        if (/^data:[^;]+;base64,/.test(url)) {\r\n            var data = atob(url.split(',')[1]);\r\n            var dataView = new Uint8Array(data.length);\r\n            for (var i = 0; i < data.length; ++i) {\r\n                dataView[i] = data.charCodeAt(i);\r\n            }\r\n\r\n            decodeAudioData(dataView.buffer, sound, url);\r\n        } else {\r\n            var xhr = new XMLHttpRequest();\r\n            xhr.open('GET', url, true);\r\n            xhr.responseType = 'arraybuffer';\r\n            xhr.onload = function () {\r\n                decodeAudioData(xhr.response, sound, url);\r\n            };\r\n            xhr.onerror = function () {\r\n                if (audioContext) {\r\n                    sound.data.buffer = true;\r\n                    sound.audioNode = [];\r\n                    delete sound.gainNode;\r\n                    delete cache[url];\r\n                    sound.load();\r\n                }\r\n            };\r\n            try {\r\n                xhr.send();\r\n            } catch (e) {\r\n                xhr.onerror();\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Decode audio data from an array buffer.\r\n     * @param  {ArrayBuffer} arraybuffer The audio data.\r\n     * @param  {Object} sound The Sound object for the sound to load.\r\n     * @param  {String} url The path to the sound file.\r\n     */\r\n    var decodeAudioData = function (arraybuffer, sound, url) {\r\n        audioContext.decodeAudioData(\r\n            arraybuffer,\r\n            function (buffer) {\r\n                if (buffer) {\r\n                    cache[url] = buffer;\r\n                    loadSound(sound, buffer);\r\n                }\r\n            },\r\n            function (error) {\r\n                sound.events.trigger('loaderror', error);\r\n            }\r\n        );\r\n    };\r\n\r\n    /**\r\n     * Finishes loading the Web Audio API sound and fires the loaded event\r\n     * @param  {Object}  sound    The Sound object for the sound to load.\r\n     * @param  {Object} [buffer] The decoded buffer sound source.\r\n     */\r\n    var loadSound = function (sound, buffer) {\r\n        sound.data.duration = (buffer) ? buffer.duration : sound.data.duration;\r\n\r\n        if (Object.getOwnPropertyNames(sound.data.sprite).length === 0) {\r\n            sound.data.sprite = {default: [0, sound.data.duration * 1000]};\r\n        }\r\n\r\n        if (!sound.data.loaded) {\r\n            sound.data.loaded = true;\r\n            sound.events.trigger('load');\r\n        }\r\n\r\n        if (sound.data.autoPlay) {\r\n            sound.play();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Load the sound back into the buffer source.\r\n     * @param  {Object} sound   The sound to load.\r\n     * @param  {Array}  loop  Loop boolean, pos, and duration.\r\n     * @param  {String} id    (optional) The play instance ID.\r\n     */\r\n    var refreshBuffer = function (sound, loop, id) {\r\n        var node = sound._nodeById(sound, id);\r\n\r\n        node.bufferSource = audioContext.createBufferSource();\r\n        node.bufferSource.buffer = cache[sound.data.src];\r\n        node.bufferSource.connect(node.panner);\r\n        node.bufferSource.loop = loop[0];\r\n        if (loop[0]) {\r\n            node.bufferSource.loopStart = loop[1];\r\n            node.bufferSource.loopEnd = loop[1] + loop[2];\r\n        }\r\n        //noinspection JSPrimitiveTypeWrapperUsage\r\n        node.bufferSource.playbackRate.value = sound.data.rate;\r\n    };\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.Sound = Sound;\r\n    if (global.J2D !== undefined) global.Sound = Sound;\r\n    return Sound;\r\n}));\r\n","(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('media/Video', ['jquery', 'utils/ArrayMap'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(require('jquery'), require('utils/ArrayMap'));\r\n    } else {\r\n        factory(root.jQuery, root.ArrayMap);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function ($, ArrayMap) {\r\n    \"use strict\";\r\n\r\n    var Video = function () {\r\n\r\n    };\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.Video = Video;\r\n    if (global.J2D !== undefined) global.Video = Video;\r\n    return Video;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('utils/ArrayMap', [], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory();\r\n    } else {\r\n        factory();\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function () {\r\n    \"use strict\";\r\n\r\n    var ArrayMap = function (args) {\r\n        Array.call(this, args);\r\n    };\r\n\r\n    ArrayMap.prototype = Object.create(Array.prototype);\r\n    ArrayMap.prototype.constructor = ArrayMap;\r\n\r\n    ArrayMap.prototype.last = function () {\r\n        return this[this.length - 1];\r\n    };\r\n\r\n    /**\r\n     * @param {ArrayMap.<T>} array\r\n     * @returns {boolean}\r\n     */\r\n    ArrayMap.prototype.equals = function (array) {\r\n        if (!array)\r\n            return false;\r\n\r\n        if (this.length != array.length)\r\n            return false;\r\n\r\n        for (var i = 0, l = this.length; i < l; i++) {\r\n            if (this[i] instanceof Array && array[i] instanceof Array) {\r\n                if (!this[i].equals(array[i]))\r\n                    return false;\r\n            }\r\n            else if (this[i] != array[i]) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    Object.defineProperty(ArrayMap.prototype, 'equals', {enumerable: false});\r\n\r\n    /**\r\n     * @param {string|Object} object\r\n     * @returns {boolean}\r\n     */\r\n    ArrayMap.prototype.contains = function (object) {\r\n        var i = this.length;\r\n        while (i--) {\r\n            if (this[i] === object) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    Object.defineProperty(ArrayMap.prototype, 'contains', {enumerable: false});\r\n\r\n    /**\r\n     * @param {Function} callback\r\n     * @returns {boolean}\r\n     */\r\n    ArrayMap.prototype.each = function (callback) {\r\n        if (!callback) return false;\r\n        var result = false;\r\n        for (var i = 0; i < this.length; i++) {\r\n            if ((result = callback(this[i], i)) == false) {\r\n                return result;\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    Object.defineProperty(ArrayMap.prototype, 'each', {enumerable: false});\r\n\r\n    /**\r\n     * @param {string|Object} key\r\n     * @param {*} value\r\n     * @returns {ArrayMap.<T>}\r\n     */\r\n    ArrayMap.prototype.add = function (key, value) {\r\n        if (this.contains(key))\r\n            this[key] = value;\r\n        else {\r\n            this.push(key);\r\n            this[key] = value;\r\n        }\r\n        return this;\r\n    };\r\n    Object.defineProperty(ArrayMap.prototype, 'add', {enumerable: false});\r\n\r\n    /**\r\n     * @param {string|Object} key\r\n     * @returns {*}\r\n     */\r\n    ArrayMap.prototype.get = function (key) {\r\n        return this.contains(key) ? this[key] : null;\r\n    };\r\n    Object.defineProperty(ArrayMap.prototype, 'get', {enumerable: false});\r\n\r\n    /**\r\n     * @param {string|Object} key\r\n     * @returns {ArrayMap.<T>}\r\n     */\r\n    ArrayMap.prototype.remove = function (key) {\r\n        for (var i = 0; i < this.length; ++i) {\r\n            if (this[i] == key) {\r\n                this.splice(i, 1);\r\n                delete this[key];\r\n                return this;\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    Object.defineProperty(ArrayMap.prototype, 'remove', {enumerable: false});\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.ArrayMap = ArrayMap;\r\n    if (typeof define !== 'function' || !define.amd) global.ArrayMap = ArrayMap;\r\n    return ArrayMap;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('utils/DeviceUtil', ['jquery', 'utils/Vector2dInteger'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(require('jquery'), require('utils/Vector2dInteger'));\r\n    } else {\r\n        factory(root.jQuery, root.Vector2dInteger);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function ($, Vector2dInteger) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * Class utility for get system browser window size\r\n     */\r\n    var DeviceUtil = function () {\r\n        this.width = parseInt($(document).width()) < parseInt(screen.width) ? parseInt($(document).width()) : parseInt(screen.width);\r\n        this.height = parseInt($(document).height()) < parseInt(screen.height) ? parseInt($(document).height()) : parseInt(screen.height);\r\n    };\r\n\r\n    /**\r\n     * @returns {DeviceUtil}\r\n     */\r\n    DeviceUtil.prototype.onResize = function () {\r\n        this.width = window.innerWidth;\r\n        this.height = window.innerHeight;\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @returns {number}\r\n     */\r\n    DeviceUtil.prototype.getWidth = function () {\r\n        return this.width;\r\n    };\r\n\r\n    /**\r\n     * @returns {number}\r\n     */\r\n    DeviceUtil.prototype.getHeight = function () {\r\n        return this.height;\r\n    };\r\n\r\n    /**\r\n     * @returns {Vector2d}\r\n     */\r\n    DeviceUtil.prototype.getSize = function () {\r\n        return new Vector2dInteger(this.width, this.height);\r\n    };\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.DeviceUtil = DeviceUtil;\r\n    if (global.J2D === undefined) global.DeviceUtil = DeviceUtil;\r\n    return DeviceUtil;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('utils/Events', [], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory();\r\n    } else {\r\n        factory();\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function () {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * @constructor\r\n     */\r\n    var Events = function () {\r\n        var events;\r\n        var once;\r\n\r\n        /**\r\n         * @param {string} [eventName]\r\n         */\r\n        this.flush = function (eventName) {\r\n            if (eventName !== undefined) {\r\n                if (events[eventName] !== undefined) {\r\n                    events[eventName] = new Array();\r\n                }\r\n                if (once[eventName] !== undefined) {\r\n                    once[eventName] = new Array();\r\n                }\r\n            } else {\r\n                once = new Array();\r\n                events = new Array();\r\n            }\r\n        };\r\n\r\n        this.flush();\r\n\r\n        /**\r\n         * @param {string} eventName\r\n         * @param {function} callback\r\n         */\r\n        this.on = function (eventName, callback) {\r\n            if (events[eventName] !== undefined) {\r\n                var stack = events[eventName];\r\n                if (stack.indexOf(callback) === -1) {\r\n                    stack.push(callback);\r\n                }\r\n            } else {\r\n                events[eventName] = new Array();\r\n                events[eventName].push(callback)\r\n            }\r\n        };\r\n\r\n        /**\r\n         * @param {string} eventName\r\n         * @param {function} callback\r\n         */\r\n        this.once = function (eventName, callback) {\r\n            if (once[eventName] !== undefined) {\r\n                var stack = once[eventName];\r\n                if (stack.indexOf(callback) === -1) {\r\n                    stack.push(callback);\r\n                }\r\n            } else {\r\n                once[eventName] = new Array();\r\n                once[eventName].push(callback)\r\n            }\r\n        };\r\n\r\n        /**\r\n         * @param {string} eventName\r\n         * @param {function} callback\r\n         */\r\n        this.off = function (eventName, callback) {\r\n            if (once[eventName] !== undefined) {\r\n                var stack = events[eventName];\r\n                if (stack.indexOf(callback) !== -1) {\r\n                    stack.splice(stack.indexOf(callback));\r\n                }\r\n            }\r\n        };\r\n\r\n        /**\r\n         * @param {string} eventName\r\n         * @param {Object} [data]\r\n         */\r\n        this.trigger = function (eventName, data) {\r\n            var stack, i;\r\n\r\n            if (events[eventName] !== undefined) {\r\n                stack = events[eventName];\r\n                for (i = 0; i < stack.length; i++) {\r\n                    stack[i].call(stack[i], data);\r\n                }\r\n            }\r\n\r\n            if (once[eventName] !== undefined) {\r\n                stack = once[eventName];\r\n                for (i = 0; i < stack.length; i++) {\r\n                    stack[i].call(stack[i], data);\r\n                }\r\n                this.flush(eventName);\r\n            }\r\n        };\r\n    };\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.Events = Events;\r\n    if (global.J2D === undefined) global.Events = Events;\r\n    return Events;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('utils/MathUtil', [], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory();\r\n    } else {\r\n        factory();\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function () {\r\n    \"use strict\";\r\n\r\n    /**\r\n     *\r\n     */\r\n    var MathUtil = function () {\r\n    };\r\n\r\n    /**\r\n     * @param {number} number\r\n     * @returns {number}\r\n     */\r\n    MathUtil.number2Integer = function (number) {\r\n        return number >> 0;\r\n    };\r\n\r\n    /**\r\n     * @param {number} number\r\n     * @returns {boolean}\r\n     */\r\n    MathUtil.isInteger = function (number) {\r\n        return typeof number === \"number\" && isFinite(number)\r\n            && number > -9007199254740992 && number < 9007199254740992\r\n            && Math.floor(number) === number;\r\n    };\r\n\r\n    /**\r\n     * @param {number} min\r\n     * @param {number} max\r\n     * @param {number} opacity\r\n     * @returns {string}\r\n     */\r\n    MathUtil.randomColor = function (min, max, opacity) {\r\n        return 'rgba('\r\n            + MathUtil.random(min, max) + ', '\r\n            + MathUtil.random(min, max) + ', '\r\n            + MathUtil.random(min, max) + ', '\r\n            + opacity + ')';\r\n    };\r\n\r\n    /**\r\n     * @param {number} min\r\n     * @param {number} max\r\n     * @param {boolean} [omitZero]\r\n     * @returns {number}\r\n     */\r\n    MathUtil.random = function (min, max, omitZero) {\r\n        var random = (Math.floor(Math.random() * (max - min + 1) + min));\r\n        return (omitZero && random == 0)\r\n            ? MathUtil.random(min, max, omitZero)\r\n            : random;\r\n    };\r\n\r\n    /**\r\n     * @param {number} degree\r\n     * @returns {number}\r\n     */\r\n    MathUtil.degree2Radian = function (degree) {\r\n        return degree * (Math.PI / 180);\r\n    };\r\n\r\n    /**\r\n     * @param {number} radian\r\n     * @returns {number}\r\n     */\r\n    MathUtil.radian2Degree = function (radian) {\r\n        return radian * (180 / Math.PI);\r\n    };\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.MathUtil = MathUtil;\r\n    if (global.J2D === undefined) global.MathUtil = MathUtil;\r\n    return MathUtil\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('utils/UUID', [], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory();\r\n    } else {\r\n        factory();\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function () {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * Class for generate uuid\r\n     */\r\n    var UUID = function () {\r\n\r\n    };\r\n\r\n    UUID.generate = function () {\r\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n            var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\r\n            return v.toString(16);\r\n        });\r\n    };\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.UUID = UUID;\r\n    if (global.J2D === undefined) global.UUID = UUID;\r\n    return UUID;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('utils/Vector2d', [], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory();\r\n    } else {\r\n        factory();\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function () {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * @param {number} x\r\n     * @param {number} y\r\n     */\r\n    var Vector2d = function (x, y) {\r\n        this.x = x;\r\n        this.y = y;\r\n    };\r\n\r\n    /**\r\n     * @returns {number}\r\n     */\r\n    Vector2d.prototype.getX = function () {\r\n        return this.x;\r\n    };\r\n\r\n    /**\r\n     * @returns {number}\r\n     */\r\n    Vector2d.prototype.getY = function () {\r\n        return this.y;\r\n    };\r\n\r\n    /**\r\n     * @returns {{x: number, y: number}}\r\n     */\r\n    Vector2d.prototype.getVector = function () {\r\n        return {x: this.x, y: this.y};\r\n    };\r\n\r\n    /**\r\n     * @returns {Array.<number>}\r\n     */\r\n    Vector2d.prototype.toArray = function () {\r\n        return [this.x, this.y];\r\n    };\r\n\r\n    /**\r\n     * @param {Array.<number>} array\r\n     * @returns {Vector2d}\r\n     */\r\n    Vector2d.prototype.fromArray = function (array) {\r\n        this.x = array[0];\r\n        this.y = array[1];\r\n\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @returns {string}\r\n     */\r\n    Vector2d.prototype.toString = function () {\r\n        return \"(\" + this.x + \",\" + this.y + \")\";\r\n    };\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.Vector2d = Vector2d;\r\n    if (global.J2D === undefined) global.Vector2d = Vector2d;\r\n    return Vector2d\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('utils/Vector2dInteger', ['utils/Vector2d'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(require('utils/Vector2d'));\r\n    } else {\r\n        factory(root.Vector2d);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function (Vector2d) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * @param {number} x\r\n     * @param {number} y\r\n     */\r\n    var Vector2dInteger = function (x, y) {\r\n        Vector2d.call(this, x >> 0, y >> 0);\r\n    };\r\n\r\n    Vector2dInteger.prototype = Object.create(Vector2d.prototype);\r\n    Vector2dInteger.prototype.constructor = Vector2dInteger;\r\n\r\n    /**\r\n     * @param {Array.<number>} array\r\n     * @returns {Vector2d|Vector2dInteger}\r\n     */\r\n    Vector2dInteger.prototype.fromArray = function (array) {\r\n        this.x = array[0] >> 0;\r\n        this.y = array[1] >> 0;\r\n\r\n        return this;\r\n    };\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.Vector2dInteger = Vector2dInteger;\r\n    if (global.J2D === undefined) global.Vector2dInteger = Vector2dInteger;\r\n    return Vector2dInteger;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('nodes/BaseNode', ['jquery', 'utils/Vector2d', 'utils/UUID'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(require('jquery'), require('utils/Vector2d'), require('utils/UUID'));\r\n    } else {\r\n        factory(root.jQuery, root.Vector2d, UUID);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function ($, Vector2d, UUID) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * @param {BaseNode.defaults|Object} [data]\r\n     * @constructor\r\n     * @property {BaseNode.defaults} data\r\n     */\r\n    var BaseNode = function (data) {\r\n        var baseNode = this;\r\n        this.data = $.extend(true, {}, BaseNode.defaults, data);\r\n\r\n        if (this.data.id === null) {\r\n            this.data.id = UUID.generate();\r\n        }\r\n\r\n        Object.defineProperty(this, 'opacity', {\r\n            get: function () {\r\n                return baseNode.data.opacity;\r\n            },\r\n            set: function (value) {\r\n                baseNode.data.opacity = value;\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(this, 'visible', {\r\n            get: function () {\r\n                return baseNode.data.visible;\r\n            },\r\n            set: function (value) {\r\n                baseNode.data.visible = !!value;\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(this, 'angle', {\r\n            get: function () {\r\n                return baseNode.data.angle;\r\n            },\r\n            set: function (value) {\r\n                baseNode.data.angle = value % 360;\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(this, 'scale', {\r\n            get: function () {\r\n                return baseNode.data.scale;\r\n            },\r\n            set: function (value) {\r\n                baseNode.data.scale = value;\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(this, 'cache', {\r\n            get: function () {\r\n                return baseNode.data.enabledCache;\r\n            },\r\n            set: function (value) {\r\n                baseNode.data.enabledCache = !!value;\r\n            }\r\n        });\r\n    };\r\n\r\n    BaseNode.defaults = {\r\n        /** @type {string|null} */\r\n        id: null,\r\n        type: 'BaseNode',\r\n\r\n        position: {\r\n            x: 0.0,\r\n            y: 0.0\r\n        },\r\n        size: {\r\n            x: 0.0,\r\n            y: 0.0\r\n        },\r\n        offset: {\r\n            x: 0.0,\r\n            y: 0.0\r\n        },\r\n\r\n        visible: true,\r\n        angle: 0.0,\r\n        scale: 1.0,\r\n        opacity: 1.0,\r\n\r\n        cache: null,\r\n        enabledCache: false // TODO:: Collections & AnimatedPrimitiveNode\r\n    };\r\n\r\n    /**\r\n     * @returns {Vector2d}\r\n     */\r\n    BaseNode.prototype.getPosition = function () {\r\n        return new Vector2d(this.data.position.x, this.data.position.y);\r\n    };\r\n\r\n    /**\r\n     * @param {Vector2d|BaseNode} position\r\n     * @returns {BaseNode}\r\n     */\r\n    BaseNode.prototype.setPosition = function (position) {\r\n        if (position !== undefined) {\r\n            if (position instanceof Vector2d) {\r\n                this.data.position = position.getVector();\r\n            } else if (position instanceof BaseNode) {\r\n                this.data.position = position.getPosition().getVector();\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @returns {Vector2d}\r\n     */\r\n    BaseNode.prototype.getSize = function () {\r\n        return new Vector2d(this.data.size.x, this.data.size.y);\r\n    };\r\n\r\n    /**\r\n     * @param {Vector2d|BaseNode} size\r\n     * @returns {BaseNode}\r\n     */\r\n    BaseNode.prototype.setSize = function (size) {\r\n        if (size !== undefined) {\r\n            if (size instanceof Vector2d) {\r\n                this.data.size = size.getVector();\r\n            } else if (size instanceof BaseNode) {\r\n                this.data.size = size.getSize().getVector();\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @returns {Vector2d}\r\n     */\r\n    BaseNode.prototype.getOffset = function () {\r\n        return new Vector2d(this.data.offset.x, this.data.offset.y);\r\n    };\r\n\r\n    /**\r\n     * @param {Vector2d|BaseNode} offset\r\n     * @returns {BaseNode}\r\n     */\r\n    BaseNode.prototype.setOffset = function (offset) {\r\n        if (offset !== undefined) {\r\n            if (offset instanceof Vector2d) {\r\n                this.data.offset = offset.getVector();\r\n            } else if (offset instanceof BaseNode) {\r\n                this.data.offset = offset.getOffset().getVector();\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /* ------------------------------ Render ------------------------------ */\r\n\r\n    /**\r\n     * Must be override this in child!\r\n     *\r\n     * @deprecated\r\n     * @overridable\r\n     *\r\n     * @param {CanvasRenderingContext2D} context\r\n     * @param {{offset: {x: number, y: number}, size: {x: number, y: number}, scale: number, angle: number}} viewport\r\n     * @param {CollectionNode} collection\r\n     * @param {object} data\r\n     * @returns {BaseNode}\r\n     */\r\n    BaseNode.prototype.render = function (context, viewport, collection, data) {\r\n        // throw new Exception('Trying to render base node.'); // TODO:: exceptions\r\n        return this;\r\n    };\r\n\r\n    //TODO:: Fix on fullscreen\r\n    /**\r\n     * @param {{offset: {x: number, y: number}, size: {x: number, y: number}, scale: number, angle: number}} viewport\r\n     * @returns {boolean}\r\n     */\r\n    BaseNode.prototype.inViewport = function (viewport) {\r\n        return !((this.data.position.x > viewport.offset.x + viewport.size.x\r\n        || this.data.position.x + viewport.size.x < viewport.offset.x)\r\n        || (this.data.position.y > viewport.offset.y + viewport.size.y\r\n        || this.data.position.y + viewport.size.y < viewport.offset.y));\r\n    };\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.BaseNode = BaseNode;\r\n    if (global.J2D !== undefined) global.BaseNode = BaseNode;\r\n    return BaseNode;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('nodes/CameraNode', ['jquery', 'nodes/BaseNode'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(require('jquery'), require('nodes/BaseNode'));\r\n    } else {\r\n        factory(root.jQuery, root.BaseNode);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function ($, BaseNode) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * @param {BaseNode.defaults|CameraNode.defaults|Object} [data]\r\n     * @constructor\r\n     * @property {BaseNode.defaults|CameraNode.defaults} data\r\n     */\r\n    var CameraNode = function (data) {\r\n        BaseNode.call(this, $.extend(true, {}, CameraNode.defaults, data));\r\n    };\r\n\r\n    CameraNode.prototype = Object.create(BaseNode.prototype);\r\n    CameraNode.prototype.constructor = CameraNode;\r\n\r\n    CameraNode.defaults = {\r\n        type: 'CameraNode'\r\n    };\r\n\r\n    /**\r\n     * @param {{x: number, y: number, offsetX: number, offsetY: number}} screen\r\n     * @param {Function|callback} calculate\r\n     * @returns {{offset: {x: number, y: number}, size: {x: number, y: number}, scale: number, angle: number}}\r\n     */\r\n    CameraNode.prototype.getCameraViewport = function (screen, calculate) {\r\n        return calculate(screen, {\r\n            offset: this.data.position,\r\n            size: this.data.size,\r\n            angle: this.data.angle,\r\n            scale: this.data.scale\r\n        });\r\n    };\r\n\r\n    /* ------------------------------ Render ------------------------------ */\r\n\r\n    /**\r\n     * @override\r\n     *\r\n     * @param {CanvasRenderingContext2D} context\r\n     * @param {{offset: {x: number, y: number}, size: {x: number, y: number}, scale: number, angle: number}} viewport\r\n     * @param {CollectionNode} collection\r\n     * @param {object} data\r\n     * @returns {CameraNode}\r\n     */\r\n    CameraNode.prototype.render = function (context, viewport, collection, data) {\r\n        return this;\r\n    };\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.CameraNode = CameraNode;\r\n    if (global.J2D !== undefined) global.CameraNode = CameraNode;\r\n    return CameraNode;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('nodes/CollectionNode', ['jquery', 'nodes/BaseNode', 'utils/ArrayMap'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(require('jquery'), require('nodes/BaseNode'), require('utils/ArrayMap'));\r\n    } else {\r\n        factory(root.jQuery, root.BaseNode, root.ArrayMap);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function ($, BaseNode, ArrayMap) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * @param {BaseNode.defaults|CollectionNode.defaults|Object} [data]\r\n     * @constructor\r\n     * @property {BaseNode.defaults|CollectionNode.defaults} data\r\n     */\r\n    var CollectionNode = function (data) {\r\n        var collectionNode = this;\r\n        BaseNode.call(this, $.extend(true, {}, CollectionNode.defaults, data));\r\n\r\n        if (this.data.collection === null) {\r\n            this.data.collection = new ArrayMap();\r\n        }\r\n\r\n        Object.defineProperty(this, 'zIndex', {\r\n            get: function () {\r\n                return 1000 - collectionNode.data.zIndex;\r\n            },\r\n            set: function (value) {\r\n                collectionNode.data.zIndex = 1000 + value;\r\n            }\r\n        });\r\n    };\r\n\r\n    CollectionNode.prototype = Object.create(BaseNode.prototype);\r\n    CollectionNode.prototype.constructor = CollectionNode;\r\n\r\n    CollectionNode.defaults = {\r\n        type: 'CollectionNode',\r\n        /** @type {ArrayMap|null} */\r\n        collection: null,\r\n        zIndex: 1000\r\n    };\r\n\r\n    /**\r\n     * @param {BaseNode|CollectionNode} node\r\n     * @param {string} key\r\n     * @returns {CollectionNode}\r\n     */\r\n    CollectionNode.prototype.add = function (node, key) {\r\n        if (node instanceof BaseNode) {\r\n            key = key || node.data.id;\r\n            this.data.collection.add(key, node);\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @param {BaseNode|CollectionNode|null} node\r\n     * @param {string} key\r\n     * @returns {CollectionNode}\r\n     */\r\n    CollectionNode.prototype.remove = function (node, key) {\r\n        if (node instanceof BaseNode) {\r\n            this.data.collection.remove(this.data.collection[node.data.id]);\r\n        }\r\n        if (typeof key === 'string' && node === null) {\r\n            this.data.collection.remove(key);\r\n        }\r\n\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @param {string} key\r\n     * @returns {boolean}\r\n     */\r\n    CollectionNode.prototype.has = function (key) {\r\n        return this.data.collection[key] !== undefined;\r\n    };\r\n\r\n    /**\r\n     * @param {string} key\r\n     * @returns {BaseNode|CollectionNode|boolean}\r\n     */\r\n    CollectionNode.prototype.get = function (key) {\r\n        if (this.data.collection[key] !== undefined) {\r\n            return this.data.collection[key];\r\n        }\r\n        return false;\r\n    };\r\n\r\n    /**\r\n     * @returns {CollectionNode}\r\n     */\r\n    CollectionNode.prototype.flush = function () {\r\n        this.data.collection.length = 0;\r\n        return this;\r\n    };\r\n\r\n    /* ------------------------------ Render ------------------------------ */\r\n\r\n    /**\r\n     * @override\r\n     *\r\n     * @param {CanvasRenderingContext2D} context\r\n     * @param {{offset: {x: number, y: number}, size: {x: number, y: number}, scale: number, angle: number}} viewport\r\n     * @param {CollectionNode} collection\r\n     * @param {object} data\r\n     * @returns {CollectionNode}\r\n     */\r\n    CollectionNode.prototype.render = function (context, viewport, collection, data) {\r\n        var collectionNode = this;\r\n\r\n        if (this.data.collection.length !== 0) {\r\n            this.data.collection.each(function (index) {\r\n                if (collectionNode.data.collection.hasOwnProperty(index)\r\n                    && collectionNode.data.collection[index] instanceof BaseNode) {\r\n                    collectionNode.data.collection[index].render(context, viewport, collection, data);\r\n                }\r\n            });\r\n        }\r\n        return this;\r\n    };\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.CollectionNode = CollectionNode;\r\n    if (global.J2D !== undefined) global.CollectionNode = CollectionNode;\r\n    return CollectionNode;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('nodes/RectNode', ['jquery', 'nodes/BaseNode', 'utils/MathUtil'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(require('jquery'), require('nodes/BaseNode'), require('utils/MathUtil'));\r\n    } else {\r\n        factory(root.jQuery, root.BaseNode, root.MathUtil);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function ($, BaseNode, MathUtil) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * @param {BaseNode.defaults|RectNode.defaults|Object} [data]\r\n     * @constructor\r\n     * @property {BaseNode.defaults|RectNode.defaults} data\r\n     */\r\n    var RectNode = function (data) {\r\n        BaseNode.call(this, $.extend(true, {}, RectNode.defaults, data));\r\n    };\r\n\r\n    RectNode.prototype = Object.create(BaseNode.prototype);\r\n    RectNode.prototype.constructor = RectNode;\r\n\r\n    RectNode.defaults = {\r\n        type: 'RectNode',\r\n        color: '#000000'\r\n    };\r\n\r\n    /**\r\n     * @returns {string}\r\n     */\r\n    RectNode.prototype.getColor = function () {\r\n        return this.data.color;\r\n    };\r\n\r\n    /**\r\n     * @param {string} color\r\n     * @returns {RectNode}\r\n     */\r\n    RectNode.prototype.setColor = function (color) {\r\n        this.data.color = color;\r\n        return this;\r\n    };\r\n\r\n\r\n    /* ------------------------------ Draw ------------------------------ */\r\n\r\n    /**\r\n     * @param {CanvasRenderingContext2D} context\r\n     * @param {{offset: {x: number, y: number}, size: {x: number, y: number}, scale: number, angle: number}} viewport\r\n     * @param {CollectionNode} collection\r\n     * @param {object} data\r\n     * @returns {null}\r\n     */\r\n    RectNode.prototype.draw = function (context, viewport, collection, data) {\r\n        //if (this.data.visible && this.isLookScene()) {\r\n        if (this.data.visible && this.inViewport(viewport)) {\r\n            console.log(this.inViewport(viewport));\r\n            if (this.data.opacity !== 1.0) {\r\n                var tempOpacity = context.globalAlpha;\r\n                context.globalAlpha = this.options.opacity;\r\n            }\r\n\r\n            if (this.data.angle || viewport.angle !== 0.0) {\r\n                context.save();\r\n\r\n                context.translate(\r\n                    this.getPosition().x - viewport.offset.x,\r\n                    this.getPosition().y - viewport.offset.y);\r\n                context.rotate(MathUtil.degree2Radian(this.data.angle + viewport.angle));\r\n                context.translate(\r\n                    -(this.getPosition().x - viewport.offset.x),\r\n                    -(this.getPosition().y - viewport.offset.y));\r\n            }\r\n\r\n            context.fillStyle = this.data.color;\r\n            context.lineWidth = 0;\r\n\r\n            context.fillRect(\r\n                this.data.position.x - viewport.offset.x,\r\n                this.data.position.y - viewport.offset.y,\r\n                this.data.size.x * this.data.scale * viewport.scale,\r\n                this.data.size.y * this.data.scale * viewport.scale\r\n            );\r\n\r\n            if (this.data.angle || viewport.angle !== 0.0) {\r\n                context.restore();\r\n            }\r\n\r\n            if (this.data.opacity !== 1.0) {\r\n                context.globalAlpha = tempOpacity;\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n\r\n    /* ------------------------------ Render ------------------------------ */\r\n\r\n    /**\r\n     * @override\r\n     *\r\n     * @param {CanvasRenderingContext2D} context\r\n     * @param {{offset: {x: number, y: number}, size: {x: number, y: number}, scale: number, angle: number}} viewport\r\n     * @param {CollectionNode} collection\r\n     * @param {object} data\r\n     * @returns {RectNode}\r\n     */\r\n    RectNode.prototype.render = function (context, viewport, collection, data) {\r\n        this.draw(context, viewport, collection, data);\r\n        return this;\r\n    };\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.RectNode = RectNode;\r\n    if (global.J2D !== undefined) global.RectNode = RectNode;\r\n    return RectNode;\r\n}));\r\n"],"sourceRoot":"/source/"}