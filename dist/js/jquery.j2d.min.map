{"version":3,"sources":["jquery.j2d.js","media/Audio.js","media/Sound.js","media/Video.js","transitions/Tween.js","exceptions/BadFunctionCallException.js","exceptions/BadMethodCallException.js","exceptions/Exception.js","exceptions/InvalidArgumentException.js","exceptions/LengthException.js","exceptions/LogicException.js","exceptions/OutOfBoundsException.js","exceptions/OutOfRangeException.js","exceptions/RangeException.js","exceptions/RuntimeException.js","exceptions/UnexpectedValueException.js","utils/ArrayMap.js","utils/DeviceUtil.js","utils/Events.js","utils/MathUtil.js","utils/UUID.js","utils/Vector2d.js","utils/Vector2dInteger.js","io/InputManager.js","io/MediaManager.js","nodes/AnimatedNode.js","nodes/BaseNode.js","nodes/CameraNode.js","nodes/CollectionNode.js","nodes/RectNode.js","core/FrameManager.js","core/LayersManager.js","core/SceneManager.js","core/ViewportManager.js","core/WebGL2D.js"],"names":["root","factory","define","amd","module","exports","require","jQuery","j2d","core","SceneManager","utils","DeviceUtil","UUID","window","global","$","J2D","element","data","this","device","scene","Object","defineProperty","get","webGL","set","value","addClass","removeClass","smoothing","io","media","pause","defaults","id","deltaTime","ready","frameLimit","prototype","start","trigger","stop","flush","resume","focus","getSceneManager","getLayersManager","layersManager","getFrameManager","frameManager","getViewportManager","viewportManager","on","once","off","util","disableSmoothing","context","chrome","navigator","userAgent","match","version","parseInt","initPlugin","undefined","j2dPlugin","pluginInit","fn","options","filter","each","extend","generate","attr","tabIndex","click","$array","push","length","isFullScreen","document","webkitFullscreenElement","webkitCurrentFullScreenElement","mozFullScreenElement","msFullscreenElement","fullScreen","resizeToFullPage","toggle","current","onResize","Events","cache","AudioNode","Audio","manager","audio","events","audioNode","add","load","src","format","autoPlay","duration","loop","sprite","volume","muted","pos3d","loaded","onEndTimer","_load","addEventListener","console","error","type","code","pos","preload","listener","Math","ceil","getOwnPropertyNames","default","play","removeEventListener","url","extension","isSupportAudio","warn","extractFormat","source","exec","split","toLowerCase","Array","i","isSupportCodec","_unload","unload","nodes","paused","clearTimeout","timer","audios","index","indexOf","splice","callback","_inactiveNode","node","timerId","soundId","round","Date","now","random","setTimeout","rate","readyState","isCocoonJS","currentTime","_clearEndTimer","playSprite","newNode","_pause","activeNode","_nodeById","_activeNode","result","_stop","isNaN","_mute","mute","_unMute","unMute","_volume","vol","parseFloat","_position","v","_pos3d","x","y","zsaz","z","_drainPool","listenerEvent","inactive","createMasterGain","audioContext","masterGain","createGain","createGainNode","gain","connect","destination","Sound","sound","call","getAudioContext","AudioContext","webkitAudioContext","getMasterGain","buffer","_setupAudioNode","iOSAutoEnable","iOSEnable","model","create","constructor","loadBuffer","soundNode","disconnect","loopStart","loopEnd","refreshBuffer","playStart","bufferSource","noteGrainOn","noteOff","panner","setPosition","panningModel","createPanner","loadSound","test","atob","dataView","Uint8Array","charCodeAt","decodeAudioData","xhr","XMLHttpRequest","open","responseType","onload","response","onerror","gainNode","send","e","arraybuffer","createBufferSource","playbackRate","ArrayMap","Video","BaseNode","tweens","parseProperties","temp","field","hasOwnProperty","keys","Tween","tween","startProperties","remove","update","time","performance","to","properties","endProperties","isAnimated","isStarted","startTime","delay","stopChainedTweens","chainedTweens","amount","repeat","times","yoyo","easing","easingFunction","interpolation","interpolationFunction","chain","arguments","old_update","property","elapsed","end","lastIndexOf","isFinite","repeatProperties","tmp","reversed","calcTween","event","Easing","Linear","None","k","Quadratic","In","Out","InOut","Cubic","Quartic","Quintic","Sinusoidal","cos","PI","sin","Exponential","pow","Circular","sqrt","Elastic","s","a","p","asin","Back","Bounce","Interpolation","m","f","floor","Utils","Bezier","b","n","pw","bn","Bernstein","CatmullRom","p0","p1","t","fc","Factorial","p2","p3","v0","v1","t2","t3","transitions","exceptions","Exception","BadFunctionCallException","message","toString","BadMethodCallException","Error","InvalidArgumentException","LengthException","LogicException","OutOfBoundsException","OutOfRangeException","RangeException","RuntimeException","UnexpectedValueException","args","last","equals","array","l","enumerable","contains","object","key","Vector2dInteger","width","screen","height","innerWidth","innerHeight","getWidth","getHeight","getSize","eventName","stack","MathUtil","number2Integer","number","isInteger","randomColor","min","max","opacity","omitZero","degree2Radian","degree","radian2Degree","radian","replace","c","r","Vector2d","getX","getY","getVector","toArray","fromArray","getDistance","vector1","vector2","getAngle","atan2","getKey","InputManager","mouse","startPosition","currentPosition","previousDistance","distance","viewport","position","enabled","enableAdditionalData","keysPressed","writeMode","timePressed","preventAll","cursor","image","keyMap","FULLSCREEN","KEY_CTRL","KEY_F11","checkKeyMap","enableCallback","keyCode","which","isArray","eval","onMouseClick","isPlay","hasClass","inArray","pageX","pageY","timeStamp","preventDefault","onMouseWheel","originalEvent","wheelDelta","fixMouseWheel","mouseWheelCancel","onMouseMove","toFixed","onKeyboardPress","char","String","fromCharCode","onTouchTap","touch","touches","changedTouches","onTouchMove","bindEvents","selector","unbindEvents","init","dX","canvas","offsetWidth","dY","offsetHeight","offset","left","top","clear","keyPressed","SCROLL_MOUSE_UP","SCROLL_MOUSE_DOWN","enable","disable","newKeyMap","oldKeyMap","JSON","stringify","parse","save","setKeys","mapObject","getPressData","keyList","getMouseMoveDistance","previous","checkPressedKeyList","checkPressedKeyMap","getPosition","setWriteMode","mode","isWriteMode","setCursorImage","css","toggleCursor","isCursorVisible","KEY_MOUSE_LEFT","KEY_MOUSE_MIDDLE","KEY_MOUSE_RIGHT","KEY_BACKSPACE","KEY_TAB","KEY_ENTER","KEY_SHIFT","KEY_ALT","KEY_PAUSE","KEY_BREAK","KEY_CAPS_LOCK","KEY_ESCAPE","KEY_SPACE_BAR","KEY_PAGE_UP","KEY_PAGE_DOWN","KEY_END","KEY_HOME","KEY_LEFT_ARROW","KEY_UP_ARROW","KEY_RIGHT_ARROW","KEY_DOWN_ARROW","KEY_INSERT","KEY_DELETE","KEY_0","KEY_1","KEY_2","KEY_3","KEY_4","KEY_5","KEY_6","KEY_7","KEY_8","KEY_9","KEY_A","KEY_B","KEY_C","KEY_D","KEY_E","KEY_F","KEY_G","KEY_H","KEY_I","KEY_J","KEY_K","KEY_L","KEY_M","KEY_N","KEY_O","KEY_P","KEY_Q","KEY_R","KEY_S","KEY_T","KEY_U","KEY_V","KEY_W","KEY_X","KEY_Y","KEY_Z","KEY_LEFT_WINDOW_KEY","KEY_RIGHT_WINDOW_KEY","KEY_SELECT_KEY","KEY_NUMPAD_0","KEY_NUMPAD_1","KEY_NUMPAD_2","KEY_NUMPAD_3","KEY_NUMPAD_4","KEY_NUMPAD_5","KEY_NUMPAD_6","KEY_NUMPAD_7","KEY_NUMPAD_8","KEY_NUMPAD_9","KEY_MULTIPLY","KEY_ADD","KEY_SUBTRACT","KEY_DECIMAL_POINT","KEY_DIVIDE","KEY_F1","KEY_F2","KEY_F3","KEY_F4","KEY_F5","KEY_F6","KEY_F7","KEY_F8","KEY_F9","KEY_F10","KEY_F12","KEY_NUM_LOCK","KEY_SCROLL_LOCK","KEY_SEMI_COLON","KEY_EQUAL_SIGN","KEY_COMMA","KEY_DASH","KEY_PERIOD","KEY_FORWARD_SLASH","KEY_GRAVE_ACCENT","KEY_OPEN_BRACKET","KEY_BACK_SLASH","KEY_CLOSE_BRACKET","KEY_SINGLE_QUOTE","KEY_LEFT_COMMAND","KEY_RIGHT_COMMAND","html5Audio","MediaManager","soundManager","iOSEnabled","codecs","mp3","canPlayType","opus","ogg","wav","aac","m4a","mp4","weba","sounds","webAudio","unlock","createBuffer","noteOn","playbackState","PLAYING_STATE","FINISHED_STATE","fileExtension","addSound","addAudio","addVideo","video","removeSound","removeAudio","removeVideo","AnimatedNode","moveTo","durationAsSpeed","resizeTo","size","rotateTo","angle","turn","velocity","baseNode","visible","scale","enabledCache","setSize","getOffset","setOffset","render","collection","inViewport","CameraNode","getCameraViewport","calculate","CollectionNode","collectionNode","zIndex","has","RectNode","color","getColor","setColor","draw","tempOpacity","globalAlpha","translate","rotate","fillStyle","lineWidth","fillRect","restore","instance","engineStack","dataStack","timestamp","frameRun","breakAnimationFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","Number","MAX_SAFE_INTEGER","bind","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","oCancelAnimationFrame","msCancelAnimationFrame","FrameManager","name","engine","params","lastTime","sceneStartTime","sceneSkipTime","asyncUpdate","asyncRender","interval","pulse","runMainLoop","setDefaultFrameLimit","Init","instanceFrameManager","LayersManager","globalCollection","layers","addLayer","removeLayer","getLayer","setZIndex","WebGL2D","ViewportManager","sceneManager","initLayers","backgroundColor","style","display","originalWidth","originalHeight","originalMargin","enableFullScreen","gameState","fixGameStateRender","fillBackground","initCanvas","setScreen","setDefaultViewport","createElement","getContext","shadowColor","append","clearRect","resize","setGameState","async","fullscreen","getElementById","requestFullscreen","webkitRequestFullscreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen","exitFullscreen","webkitExitFullscreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen","enableFullscreen","toggleFullScreen","getSceneLayer","forEach","getViewport","registerCamera","addCamera","updateNoCamerasViewport","setViewport","updateViewport","calculateScale","offsetX","offsetY","cameras","camera","removeCamera","isPOT","Transform","mat","clearStack","mat3","identity","multiply","m1","m2","m10","m11","m12","m13","m14","m15","m16","m17","m18","m20","m21","m22","m23","m24","m25","m26","m27","m28","vec2_multiply","mOut","transpose","STACK_DEPTH_LIMIT","init_mat","m_stack","m_cache","c_stack","valid","getIdentity","setIdentity","getResult","pushMatrix","popMatrix","translateMatrix","trMatrix","tr","d","scaleMatrix","rotateMatrix","ang","sAng","cAng","gl","fs","vs","shaderProgram","transform","shaderPool","maxTextureSize","gl2d","$getContext","force","initShaders","initBuffers","initCanvas2DAPI","BLEND","blendFuncSeparate","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","ONE","getParameter","MAX_TEXTURE_SIZE","postInit","shaderMask","texture","crop","path","getFragmentShaderSource","sMask","fsSource","join","getVertexShaderSource","stackDepth","vsSource","transformStackDepth","storedShader","useProgram","createShader","FRAGMENT_SHADER","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","VERTEX_SHADER","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","vertexPositionAttribute","getAttribLocation","enableVertexAttribArray","uColor","getUniformLocation","uSampler","uCropSource","pMatrix","uTransforms","uniformMatrix4fv","rectVerts","Float32Array","rectVertexPositionBuffer","rectVertexColorBuffer","pathVertexPositionBuffer","pathVertexColorBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","instances","hue2rgb","q","HSLAToRGBA","h","g","colorStringToVec4","channel","isPercent","hasAlpha","alphaChannel","sameType","reRGBAColor","reHSLAColor","reHex6Color","colorInt","reHex3Color","hexString","colorKeywords","colorVecToString","vec4","saveDrawState","bakedDrawState","drawState","strokeStyle","globalCompositeOperation","lineCap","lineJoin","miterLimit","shadowBlur","shadowOffsetX","shadowOffsetY","textAlign","font","textBaseline","imageSmoothingEnabled","drawStateStack","restoreDrawState","pop","sendTransformStack","sp","maxI","uniformMatrix3fv","SubPath","closed","verts","fillSubPath","subPath","subPaths","vertexAttribPointer","FLOAT","uniform4f","drawArrays","TRIANGLE_FAN","strokeSubPath","LINE_LOOP","LINE_STRIP","Texture","obj","createTexture","textureCache","imageCache","ctx","drawImage","GL_FUNCTION","LINEAR","GL_MIPMAP_FUNCTION","LINEAR_MIPMAP_LINEAR","NEAREST","LINEAR_MIPMAP_NEAREST","bindTexture","TEXTURE_2D","texImage2D","RGBA","UNSIGNED_BYTE","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MAG_FILTER","TEXTURE_MIN_FILTER","generateMipmap","textCanvas","textCtx","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","drawStyle","$lineWidth","fillText","text","strokeText","measureText","tempCanvas","tempCtx","createImageData","getImageData","readPixels","w","j","maxJ","index1","index2","putImageData","imageData","dx","dy","setTransform","apply","strokeRect","beginPath","closePath","prevPath","startX","startY","newPath","lineTo","quadraticApproximateCount","quadraticCurveTo","hx","hy","tx","ty","fromx","fromy","bezierApproximateCount","bezierCurveTo","h1x","h1y","h2x","h2y","arcTo","rect","arcApproximateCount","arc","cx","cy","radius","startAngle","endAngle","anticlockwise","count","fixed","fill","stroke","clip","isPointInPath","drawFocusRing","doCrop","cacheIndex","activeTexture","TEXTURE0","uniform1i","configurable","writable"],"mappings":"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","file":"jquery.j2d.js","sourcesContent":["/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n/*\r\n * TODO:: Events System\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('jquery.j2d', ['jquery', 'core/SceneManager', 'utils/DeviceUtil', 'utils/UUID'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(\r\n            require('jquery'),\r\n            require('core/SceneManager'),\r\n            require('utils/DeviceUtil'),\r\n            require('utils/UUID')\r\n        );\r\n    } else {\r\n        factory(root.jQuery, root.j2d.core.SceneManager, root.j2d.utils.DeviceUtil, root.j2d.utils.UUID);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function ($, SceneManager, DeviceUtil, UUID) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * @param {Element|jQuery} element\r\n     * @param {J2D.defaults} data\r\n     *\r\n     * @constructor\r\n     * @property {boolean} WebGL // TODO:: To scene\r\n     * @property {boolean} smoothing // TODO:: To scene\r\n     * @property {InputManager|null} io\r\n     * @property {MediaManager|null} media\r\n     * @property {boolean} isPlay\r\n     */\r\n    var J2D = function J2D(element, data) {\r\n        var j2d = this;\r\n\r\n        /** @type {Element|jQuery} */\r\n        this.element = element;\r\n\r\n        /** @type J2D.defaults */\r\n        this.data = data;\r\n\r\n        /** @type DeviceUtil */\r\n        this.device = new DeviceUtil();\r\n\r\n        /** @type SceneManager */\r\n        this.scene = new SceneManager(this);\r\n\r\n        Object.defineProperty(this, 'WebGL', {\r\n            get: function () {\r\n                return j2d.data.webGL;\r\n            },\r\n            set: function (value) {\r\n                j2d.data.webGL = !!value;\r\n                if (!!value && !j2d.data.webGL) {\r\n                    j2d.element.addClass('WebGL');\r\n                } else if (!value && j2d.data.webGL) {\r\n                    j2d.element.removeClass('WebGL');\r\n                }\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(this, 'smoothing', {\r\n            get: function () {\r\n                return j2d.data.smoothing;\r\n            },\r\n            set: function (value) {\r\n                j2d.data.smoothing = !!value;\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(this, 'io', {\r\n            get: function () {\r\n                return j2d.data.io;\r\n            },\r\n            set: function (value) {\r\n                return j2d.data.io = value\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(this, 'media', {\r\n            get: function () {\r\n                return j2d.data.media;\r\n            },\r\n            set: function (value) {\r\n                return j2d.data.media = value\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(this, 'isPlay', {\r\n            get: function () {\r\n                return !j2d.data.pause;\r\n            },\r\n            set: function () {\r\n            }\r\n        });\r\n    };\r\n\r\n    J2D.defaults = {\r\n        /** @type string|null */\r\n        id: null,\r\n        io: null,\r\n        media: null,\r\n        deltaTime: 0,\r\n        pause: false,\r\n        ready: false,\r\n\r\n        frameLimit: 60,\r\n        smoothing: true,\r\n\r\n        webGL: false\r\n    };\r\n\r\n    /** +GameEngine **/\r\n    J2D.prototype.start = function () {\r\n        this.scene.start();\r\n        this.trigger('start');\r\n    };\r\n\r\n    J2D.prototype.stop = function () {\r\n        this.scene.stop();\r\n        this.trigger('stop');\r\n    };\r\n\r\n    // TODO:: add MediaManager\r\n    J2D.prototype.pause = function () {\r\n        if (this.data.io) this.data.io.flush();\r\n        this.data.pause = true;\r\n        this.element.addClass('pause');\r\n        this.trigger('pause');\r\n    };\r\n\r\n    // TODO:: add MediaManager\r\n    J2D.prototype.resume = function () {\r\n        this.element.removeClass('pause').focus();\r\n        this.data.pause = false;\r\n        if (this.data.io) this.data.io.flush();\r\n        this.trigger('resume');\r\n    };\r\n    /** -GameEngine **/\r\n\r\n    /** @returns {SceneManager} */\r\n    J2D.prototype.getSceneManager = function () {\r\n        return this.scene;\r\n    };\r\n\r\n    /** @returns {LayersManager} */\r\n    J2D.prototype.getLayersManager = function () {\r\n        return this.scene.layersManager;\r\n    };\r\n\r\n    /** @returns {FrameManager} */\r\n    J2D.prototype.getFrameManager = function () {\r\n        return this.scene.frameManager;\r\n    };\r\n\r\n    /** @returns {ViewportManager} */\r\n    J2D.prototype.getViewportManager = function () {\r\n        return this.scene.viewportManager;\r\n    };\r\n\r\n    J2D.prototype.on = function () {\r\n    };\r\n    J2D.prototype.once = function () {\r\n    };\r\n    J2D.prototype.off = function () {\r\n    };\r\n    J2D.prototype.trigger = function () {\r\n    };\r\n\r\n    /** Utils **/\r\n    J2D.util = {\r\n        /**\r\n         * @param {CanvasRenderingContext2D} context\r\n         */\r\n        disableSmoothing: function (context) {\r\n            var chrome = global.navigator.userAgent.match(/Chrom(e|ium)\\/([0-9]+)\\./);\r\n            var version = chrome ? parseInt(chrome[2], 10) : false;\r\n\r\n            context['imageSmoothingEnabled'] = false;\r\n            context['mozImageSmoothingEnabled'] = false;\r\n            context['oImageSmoothingEnabled'] = false;\r\n            if (version && version <= 29) {\r\n                context['webkitImageSmoothingEnabled'] = false;\r\n            }\r\n            context['msImageSmoothingEnabled'] = false;\r\n        }\r\n    };\r\n    J2D.prototype.util = J2D.util;\r\n\r\n    /* ------------------------------ Plugin ------------------------------ */\r\n\r\n    (J2D.initPlugin = function () {\r\n        if (window.j2dPlugin !== undefined) return null;\r\n        window.j2dPlugin = {pluginInit: true};\r\n\r\n        /**\r\n         * @param {J2D.defaults} [options]\r\n         * @returns {J2D|J2D[]|Array.<J2D>}\r\n         */\r\n        $.fn.j2d = function (options) {\r\n            this.filter('div.canvas:not([guid])').each(function () {\r\n                var options = $.extend(true, {}, J2D.defaults, options);\r\n\r\n                options.id = UUID.generate();\r\n\r\n                $(this).attr('guid', options.id);\r\n                var id = $(this).attr('id');\r\n                if (typeof id === 'undefined' || id === false) {\r\n                    $(this).attr('id', options.id);\r\n                }\r\n                var tabIndex = $(this).attr('tabindex');\r\n                if (typeof tabIndex === 'undefined' || tabIndex === false) {\r\n                    $(this).attr('tabindex', '-1');\r\n                }\r\n                $(this).data('j2d', new J2D($(this), options)).addClass('j2d');\r\n                $(this).click().focus();\r\n            });\r\n\r\n            var $array = [];\r\n            this.filter('div.canvas[guid]').each(function () {\r\n                $array.push($(this).data('j2d'));\r\n            });\r\n\r\n            return (1 === $array.length) ? $(this).data('j2d') : $array;\r\n        };\r\n\r\n        var isFullScreen = function () {\r\n            //noinspection JSUnresolvedVariable\r\n            return !!(document.webkitFullscreenElement\r\n                || document.webkitCurrentFullScreenElement\r\n                || document.mozFullScreenElement\r\n                || document.msFullscreenElement\r\n            );\r\n        };\r\n\r\n        $(document).on('fullscreenchange webkitfullscreenchange mozfullscreenchange MSFullscreenChange', function () {\r\n            var fullScreen = isFullScreen();\r\n            if (!fullScreen) {\r\n                $('div.canvas[guid].active').data('j2d').scene.resizeToFullPage(fullScreen);\r\n                $('div.canvas[guid]:not(.active)').toggle(!fullScreen);\r\n            }\r\n        });\r\n\r\n        $(document).on('click', 'div.canvas[guid].pause', function () {\r\n            $(this).data('j2d').resume();\r\n\r\n            var current = this;\r\n            $('div.canvas[guid]:not(.pause-disable):not(:focus)').each(function () {\r\n                if (current !== this) $(this).removeClass('active').data('j2d').pause();\r\n            });\r\n            $('div.canvas[guid].active.pause-disable:not(:focus)').each(function () {\r\n                if (current !== this) $(this).removeClass('active');\r\n            });\r\n        });\r\n\r\n        $(document).on('click touch mouseenter', 'div.canvas[guid]:not(.resume-by-click):not(:focus)', function () {\r\n            $(this).addClass('active').focus().data('j2d').resume();\r\n\r\n            var current = this;\r\n            $('div.canvas[guid]:not(.pause-disable):not(:focus)').each(function () {\r\n                if (current !== this) $(this).removeClass('active').data('j2d').pause();\r\n            });\r\n            $('div.canvas[guid].active.pause-disable:not(:focus)').each(function () {\r\n                if (current !== this) $(this).removeClass('active');\r\n            });\r\n        });\r\n\r\n        $(window).on('focus', function () {\r\n            $('div.canvas[guid].active').each(function () {\r\n                $(this).data('j2d').resume();\r\n            });\r\n        }).on('blur', function () {\r\n            $('div.canvas[guid]').each(function () {\r\n                $(this).data('j2d').pause();\r\n            });\r\n        });\r\n\r\n        $(window).on('resize', function () {\r\n            $('div.canvas[guid]').each(function () {\r\n                $(this).data('j2d').device.onResize();\r\n            });\r\n            var fullScreen = isFullScreen();\r\n            if (fullScreen) {\r\n                $('div.canvas[guid].active').data('j2d').scene.resizeToFullPage(fullScreen);\r\n            }\r\n        });\r\n    })();\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.J2D = J2D;\r\n    if (global.j2d === undefined) global.j2d.J2D = J2D;\r\n    return J2D;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, James Simpson of GoldFire Studios(howler.js)\r\n * @original_source https://github.com/goldfire/howler.js/blob/master/howler.js\r\n * @license BSD, MIT(howler.js)\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('media/Audio', ['utils/UUID', 'utils/Events'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(require('utils/UUID'), require('utils/Events'));\r\n    } else {\r\n        factory(root.j2d.utils.UUID, root.j2d.utils.Events);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function (UUID, Events) {\r\n    \"use strict\";\r\n\r\n    var cache = {};\r\n    var AudioNode = global.Audio;\r\n\r\n    /**\r\n     * @param {Audio.defaults|Object} [data]\r\n     * @param {MediaManager} [manager]\r\n     * @constructor\r\n     */\r\n    var Audio = function (data, manager) {\r\n        var audio = this;\r\n        audio.manager = manager !== undefined ? manager : null;\r\n        audio.events = !!audio.manager ? audio.manager.events : new Events();\r\n        audio.data = $.extend(true, {}, Audio.defaults, data);\r\n\r\n        audio.audioNode = [];\r\n\r\n        if (audio.data.id === null) {\r\n            audio.data.id = UUID.generate();\r\n        }\r\n\r\n        if (audio.manager) audio.manager.media.get('audios').add(audio.data.id, audio);\r\n\r\n        audio.load();\r\n    };\r\n\r\n    Audio.defaults = {\r\n        id: null,\r\n        src: [],\r\n        format: null,\r\n        autoPlay: false,\r\n\r\n        duration: 0,\r\n        loop: false,\r\n        sprite: {},\r\n        volume: 1,\r\n        muted: false,\r\n        pos3d: [0, 0, -0.5],\r\n\r\n        loaded: false,\r\n        onEndTimer: []\r\n    };\r\n\r\n    Audio.prototype._load = function (audio) {\r\n        var audioNode = new AudioNode();\r\n\r\n        audioNode.addEventListener('error', function () {\r\n            console.error({type: audioNode.error ? audioNode.error.code : 0});\r\n        }, false);\r\n\r\n        audio.audioNode.push(audioNode);\r\n\r\n        audioNode.src = audio.data.src;\r\n        audioNode.pos = 0;\r\n        audioNode.preload = 'auto';\r\n        audioNode.volume = (!!audio.manager)\r\n            ? (audio.manager.muted) ? 0 : audio.data.volume * (audio.manager.volume / 100)\r\n            : (audio.data.muted) ? 0 : audio.data.volume;\r\n\r\n        var listener = function () {\r\n            audio.data.duration = Math.ceil(audioNode.duration * 10) / 10;\r\n\r\n            if (Object.getOwnPropertyNames(audio.data.sprite).length === 0) {\r\n                audio.data.sprite = {default: [0, audio.data.duration * 1000]};\r\n            }\r\n\r\n            if (!audio.data.loaded) {\r\n                audio.data.loaded = true;\r\n                audio.events.trigger('load');\r\n            }\r\n\r\n            if (audio.data.autoPlay) {\r\n                audio.play();\r\n            }\r\n\r\n            audioNode.removeEventListener('canplaythrough', listener, false);\r\n        };\r\n        audioNode.addEventListener('canplaythrough', listener, false);\r\n        audioNode.load();\r\n\r\n        return audio;\r\n    };\r\n\r\n    Audio.prototype.load = function () {\r\n        var audio = this;\r\n        var url = '', extension = '';\r\n\r\n        if (audio.manager && (!!audio.manager.isSupportAudio)) {\r\n            console.warn('No audio support.');\r\n            return false;\r\n        }\r\n\r\n        var extractFormat = function (source, format) {\r\n            if (format) return format;\r\n\r\n            var extension = /^data:audio\\/([^;,]+);/i.exec(source);\r\n            if (!extension) {\r\n                extension = /\\.([^.]+)$/.exec(source.split('?', 1)[0]);\r\n            }\r\n\r\n            if (extension) {\r\n                return extension[1].toLowerCase();\r\n            } else {\r\n                console.warn('Could not extract format from passed URLs, please add format');\r\n            }\r\n            return null;\r\n        };\r\n\r\n        if (audio.data.src instanceof Array) {\r\n            for (var i = 0; i < audio.data.src.length; i++) {\r\n                url = audio.data.src[i];\r\n                extension = extractFormat(audio.data.src[i], audio.data.format);\r\n                if (null !== extension) break;\r\n            }\r\n            audio.data.src = url;\r\n        } else if (typeof audio.data.src === 'string') {\r\n            extension = extractFormat(audio.data.src, audio.data.format);\r\n        } else {\r\n            console.warn('Unknown audio source');\r\n            return false;\r\n        }\r\n\r\n        if (audio.manager && audio.manager.isSupportCodec[extension]) {\r\n            console.warn('Codec not support');\r\n            return false;\r\n        }\r\n\r\n        return audio._load(audio);\r\n    };\r\n\r\n    Audio.prototype._unload = function (audioNode) {\r\n        audioNode.src = '';\r\n    };\r\n\r\n    Audio.prototype.unload = function () {\r\n        var audio = this;\r\n\r\n        var nodes = audio.audioNode;\r\n        for (var i = 0; i < audio.audioNode.length; i++) {\r\n            if (!nodes[i].paused) {\r\n                audio.stop(nodes[i].id);\r\n                audio.events.trigger('unload', nodes[i].id);\r\n            }\r\n            audio._unload(nodes[i]);\r\n        }\r\n\r\n        for (i = 0; i < audio.data.onEndTimer.length; i++) {\r\n            clearTimeout(audio.data.onEndTimer[i].timer);\r\n        }\r\n\r\n        if (audio.manager) {\r\n            var audios = this.manager.get('audios');\r\n            var index = audios.indexOf(audio);\r\n            if (index !== null && index >= 0) {\r\n                audios.splice(index, 1);\r\n            }\r\n        }\r\n\r\n        delete cache[audio.data.src];\r\n        audio = null;\r\n    };\r\n\r\n    Audio.prototype.src = function (source) {\r\n        var audio = this;\r\n\r\n        if (source) {\r\n            audio.stop();\r\n            audio.data.src = source;\r\n            audio.data.loaded = false;\r\n            audio.load();\r\n        } //TODO:: else throw\r\n\r\n        return null;\r\n    };\r\n\r\n    Audio.prototype.play = function (sprite, callback) {\r\n        var audio = this;\r\n\r\n        if (typeof sprite === 'function') callback = sprite;\r\n        if (!sprite || typeof sprite === 'function') sprite = 'default';\r\n\r\n        if (!audio.data.loaded) {\r\n            audio.events.on('load', function () {\r\n                audio.play(sprite, callback);\r\n            });\r\n\r\n            return audio;\r\n        }\r\n\r\n        if (!audio.data.sprite[sprite]) {\r\n            if (typeof callback === 'function') callback();\r\n            return audio;\r\n        }\r\n\r\n        audio._inactiveNode(audio, function (node) {\r\n            node.sprite = sprite;\r\n\r\n            var pos = (node.pos > 0) ? node.pos : audio.data.sprite[sprite][0] / 1000;\r\n            var duration = audio.data.sprite[sprite][1] / 1000 - (pos - audio.data.sprite[sprite][0] / 1000);\r\n            var loop = !!(audio.data.loop || audio.data.sprite[sprite][2]);\r\n\r\n            var soundId = (typeof callback === 'string')\r\n                ? callback\r\n                : Math.round(Date.now() * Math.random()) + '', timerId;\r\n\r\n            (function () {\r\n                var data = {\r\n                    id: soundId,\r\n                    sprite: sprite,\r\n                    loop: loop\r\n                };\r\n\r\n                timerId = setTimeout(function () {\r\n                    if (loop) {\r\n                        audio.stop(data.id).play(sprite, data.id);\r\n                    } else {\r\n                        audio.stop(data.id);\r\n                    }\r\n\r\n                    audio.events.trigger('unload', soundId);\r\n                }, (duration / audio.data.rate) * 1000);\r\n\r\n                audio.data.onEndTimer.push({timer: timerId, id: data.id});\r\n            })();\r\n\r\n\r\n            if (node.readyState === 4 || !node.readyState && navigator.isCocoonJS) {\r\n                node.id = soundId;\r\n                node.currentTime = pos;\r\n\r\n                node.muted = audio.manager\r\n                    ? (audio.manager.muted || node.muted)\r\n                    : (audio.data.muted || node.muted);\r\n\r\n                node.volume = audio.manager\r\n                    ? audio.data.volume * (audio.manager.volume / 100)\r\n                    : audio.data.volume;\r\n\r\n                setTimeout(function () {\r\n                    node.play();\r\n                }, 0);\r\n            } else {\r\n                audio._clearEndTimer(soundId);\r\n\r\n                (function () {\r\n                    var audio = audio,\r\n                        playSprite = sprite,\r\n                        fn = callback,\r\n                        newNode = node;\r\n\r\n                    var listener = function () {\r\n                        audio.play(playSprite, fn);\r\n                        newNode.removeEventListener('canplaythrough', listener, false);\r\n                    };\r\n\r\n                    newNode.addEventListener('canplaythrough', listener, false);\r\n                })();\r\n\r\n                return audio;\r\n            }\r\n\r\n            audio.events.trigger('play');\r\n            if (typeof callback === 'function') callback(soundId);\r\n\r\n            return audio;\r\n        });\r\n\r\n        return audio;\r\n    };\r\n\r\n    Audio.prototype._pause = function (activeNode) {\r\n        activeNode.pause();\r\n        return false;\r\n    };\r\n\r\n    Audio.prototype.pause = function (id) {\r\n        var audio = this;\r\n\r\n        if (!audio.data.loaded) {\r\n            audio.events.on('play', function () {\r\n                audio.pause(id);\r\n            });\r\n            return audio;\r\n        }\r\n\r\n        audio._clearEndTimer(audio, id);\r\n\r\n        var activeNode = (id) ? audio._nodeById(id) : audio._activeNode(audio);\r\n        if (activeNode) {\r\n            activeNode.pos = audio.pos(null, id);\r\n            var result = audio._pause(activeNode);\r\n            if (result) return audio;\r\n        }\r\n\r\n        audio.events.trigger('pause');\r\n\r\n        return audio;\r\n    };\r\n\r\n    Audio.prototype._stop = function (activeNode) {\r\n        if (!isNaN(activeNode.duration)) {\r\n            activeNode.pause();\r\n            activeNode.currentTime = 0;\r\n        }\r\n        return false;\r\n    };\r\n\r\n    Audio.prototype.stop = function (id) {\r\n        var audio = this;\r\n\r\n        if (!audio.data.loaded) {\r\n            audio.events.on('play', function () {\r\n                audio.stop(id);\r\n            });\r\n\r\n            return audio;\r\n        }\r\n\r\n        audio._clearEndTimer(audio, id);\r\n\r\n        var activeNode = (id) ? audio._nodeById(audio, id) : audio._activeNode(audio);\r\n        if (activeNode) {\r\n            activeNode.pos = 0;\r\n            var result = audio._stop(activeNode);\r\n            if (result) return audio;\r\n        }\r\n\r\n        return audio;\r\n    };\r\n\r\n    Audio.prototype._mute = function (activeNode) {\r\n        activeNode.muted = true;\r\n    };\r\n\r\n    Audio.prototype.mute = function (id) {\r\n        var audio = this;\r\n\r\n        if (!audio.data.loaded) {\r\n            audio.events.on('play', function () {\r\n                audio.mute(id);\r\n            });\r\n            return audio;\r\n        }\r\n\r\n        var activeNode = (id) ? audio._nodeById(id) : audio._activeNode(audio);\r\n        if (activeNode) audio._mute();\r\n\r\n        return audio;\r\n    };\r\n\r\n    Audio.prototype._unMute = function (activeNode) {\r\n        activeNode.muted = false;\r\n    };\r\n\r\n    Audio.prototype.unMute = function (id) {\r\n        var audio = this;\r\n\r\n        if (!audio.data.loaded) {\r\n            audio.events.on('play', function () {\r\n                audio.unMute(id);\r\n            });\r\n            return audio;\r\n        }\r\n\r\n        var activeNode = (id) ? audio._nodeById(id) : audio._activeNode(audio);\r\n        if (activeNode) audio._unMute();\r\n\r\n        return audio;\r\n    };\r\n\r\n    Audio.prototype._volume = function (activeNode, vol) {\r\n        activeNode.volume = vol;\r\n    };\r\n\r\n    Audio.prototype.volume = function (vol, id) {\r\n        var audio = this;\r\n\r\n        vol = parseFloat(vol);\r\n\r\n        if (vol >= 0 && vol <= 1) {\r\n            audio.data.volume = vol;\r\n\r\n            if (!audio.data.loaded) {\r\n                audio.events.on('play', function () {\r\n                    audio.volume(vol, id);\r\n                });\r\n                return audio;\r\n            }\r\n\r\n            var activeNode = (id) ? audio._nodeById(id) : audio._activeNode(audio);\r\n            if (activeNode) {\r\n                vol = audio.manager\r\n                    ? vol * (audio.manager.volume / 100)\r\n                    : audio.data.volume;\r\n                audio._volume(vol);\r\n            }\r\n\r\n            return audio;\r\n        }\r\n        return audio.data.volume;\r\n    };\r\n\r\n    Audio.prototype.loop = function (loop) {\r\n        var audio = this;\r\n\r\n        if (typeof loop === 'boolean') {\r\n            audio.data.loop = loop;\r\n            return audio;\r\n        }\r\n        return audio.data.loop;\r\n    };\r\n\r\n    Audio.prototype.sprite = function (sprite) {\r\n        var audio = this;\r\n\r\n        if (typeof sprite === 'object') {\r\n            audio.data.sprite = sprite;\r\n            return audio;\r\n        }\r\n        return audio.data.sprite;\r\n    };\r\n\r\n    Audio.prototype._position = function (activeNode, v) {\r\n        return activeNode.currentTime;\r\n    };\r\n\r\n    Audio.prototype.pos = function (pos, id) {\r\n        var audio = this;\r\n\r\n        if (!audio.data.loaded) {\r\n            audio.events.on('load', function () {\r\n                audio.pos(pos);\r\n            });\r\n            return typeof pos === 'number' ? audio : audio.data.pos || 0;\r\n        }\r\n\r\n        pos = parseFloat(pos);\r\n\r\n        var activeNode = (id) ? audio._nodeById(id) : audio._activeNode(audio);\r\n        if (activeNode) {\r\n            if (pos >= 0) {\r\n                audio.pause(id);\r\n                activeNode.pos = pos;\r\n                audio.play(activeNode.sprite, id);\r\n                return audio;\r\n            } else {\r\n                return audio._position(activeNode, false);\r\n            }\r\n        } else if (pos >= 0) {\r\n            return audio;\r\n        } else {\r\n            for (var i = 0; i < audio.audioNode.length; i++) {\r\n                if (audio.audioNode[i].paused && audio.audioNode[i].readyState === 4) {\r\n                    return audio._position(audio.audioNode[i], true);\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    Audio.prototype._pos3d = function (activeNode, x, y, zsaz) {\r\n        return null;\r\n    };\r\n\r\n    Audio.prototype.pos3d = function (x, y, z, id) {\r\n        var audio = this;\r\n\r\n        y = (typeof y === 'undefined' || !y) ? 0 : y;\r\n        z = (typeof z === 'undefined' || !z) ? -0.5 : z;\r\n\r\n        if (!audio.data.loaded) {\r\n            audio.events.on('play', function () {\r\n                audio.pos3d(x, y, z, id);\r\n            });\r\n            return audio;\r\n        }\r\n\r\n        if (x >= 0 || x < 0) {\r\n            var activeNode = (id) ? audio._nodeById(id) : audio._activeNode(audio);\r\n            audio._pos3d(activeNode, x, y, z);\r\n        } else {\r\n            return audio.data.pos3d;\r\n        }\r\n\r\n        return audio;\r\n    };\r\n\r\n    /* Private */\r\n\r\n    Audio.prototype._nodeById = function (audio, id) {\r\n        var node = audio.audioNode[0];\r\n\r\n        for (var i = 0; i < audio.audioNode.length; i++) {\r\n            if (audio.audioNode[i].id === id) {\r\n                node = audio.audioNode[i];\r\n                break;\r\n            }\r\n        }\r\n\r\n        return node;\r\n    };\r\n\r\n    Audio.prototype._clearEndTimer = function (audio, id) {\r\n        var index = -1;\r\n\r\n        for (var i = 0; i < audio.data.onEndTimer.length; i++) {\r\n            if (audio.data.onEndTimer[i].id === id) {\r\n                index = i;\r\n                break;\r\n            }\r\n        }\r\n\r\n        var timer = audio.data.onEndTimer[index];\r\n        if (timer) {\r\n            clearTimeout(timer.timer);\r\n            audio.data.onEndTimer.splice(index, 1);\r\n        }\r\n    };\r\n\r\n    Audio.prototype._activeNode = function (audio) {\r\n        var node = null;\r\n\r\n        for (var i = 0; i < audio.audioNode.length; i++) {\r\n            if (!audio.audioNode[i].paused) {\r\n                node = audio.audioNode[i];\r\n                break;\r\n            }\r\n        }\r\n\r\n        audio._drainPool(audio);\r\n\r\n        return node;\r\n    };\r\n\r\n    Audio.prototype._inactiveNode = function (audio, callback) {\r\n        var node = null;\r\n\r\n        for (var i = 0; i < audio.audioNode.length; i++) {\r\n            if (audio.audioNode[i].paused && audio.audioNode[i].readyState === 4) {\r\n                callback(audio.audioNode[i]);\r\n                node = true;\r\n                break;\r\n            }\r\n        }\r\n\r\n        audio._drainPool(audio);\r\n\r\n        if (node) return;\r\n\r\n        audio.load();\r\n        var newNode = audio.audioNode[audio.audioNode.length - 1];\r\n        var listenerEvent = navigator.isCocoonJS ? 'canplaythrough' : 'loadedmetadata';\r\n        var listener = function () {\r\n            newNode.removeEventListener(listenerEvent, listener, false);\r\n            callback(newNode);\r\n        };\r\n        newNode.addEventListener(listenerEvent, listener, false);\r\n    };\r\n\r\n    Audio.prototype._drainPool = function (audio) {\r\n        var inactive = 0;\r\n\r\n        for (var i = 0; i < audio.audioNode.length; i++) {\r\n            if (audio.audioNode[i].paused) inactive++;\r\n        }\r\n\r\n        for (i = audio.audioNode.length - 1; i >= 0; i--) {\r\n            if (inactive <= 5) break;\r\n\r\n            if (audio.audioNode[i].paused) {\r\n                audio.audioNode.splice(i, 1);\r\n                inactive--;\r\n            }\r\n        }\r\n    };\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.Audio = Audio;\r\n    if (global.j2d === undefined) global.j2d.media.Audio = Audio;\r\n    return Audio;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, James Simpson of GoldFire Studios(howler.js)\r\n * @original_source https://github.com/goldfire/howler.js/blob/master/howler.js\r\n * @license BSD, MIT(howler.js)\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('media/Sound', ['utils/UUID', 'utils/Events', 'media/Audio'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(require('utils/UUID'), require('utils/Events'), require('media/Audio'));\r\n    } else {\r\n        factory(root.UUID, root.Events, root.Audio);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function (UUID, Events, Audio) {\r\n    \"use strict\";\r\n\r\n    var cache = {};\r\n    var audioContext;\r\n    var masterGain;\r\n\r\n    function createMasterGain() {\r\n        if (audioContext) {\r\n            masterGain = (audioContext.createGain === undefined)\r\n                ? audioContext.createGainNode()\r\n                : audioContext.createGain();\r\n            masterGain.gain.value = 1;\r\n            masterGain.connect(audioContext.destination);\r\n            return masterGain;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * @param {Audio.defaults|Object} [data]\r\n     * @param {MediaManager} [manager]\r\n     * @constructor\r\n     */\r\n    var Sound = function (data, manager) {\r\n        var sound = this;\r\n        Audio.call(this, data, manager);\r\n\r\n        sound.manager = manager;\r\n        sound.events = !!sound.manager ? sound.manager.events : new Events();\r\n        sound.data = $.extend(true, {}, Sound.defaults, data);\r\n        sound.audioNode = [];\r\n        audioContext = manager\r\n            ? manager.getAudioContext()\r\n            : new (global.AudioContext || global.webkitAudioContext);\r\n\r\n        masterGain = manager\r\n            ? manager.getMasterGain()\r\n            : createMasterGain();\r\n\r\n        if (sound.data.id === null) {\r\n            sound.data.id = UUID.generate();\r\n        }\r\n\r\n        if (audioContext && sound.data.buffer) {\r\n            _setupAudioNode(sound);\r\n        }\r\n\r\n        if (sound.manager && audioContext && sound.manager.data.iOSAutoEnable) {\r\n            sound.manager.iOSEnable = true;\r\n        }\r\n\r\n        if (sound.manager) sound.manager.media.get('sounds').add(sound.data.id, sound);\r\n\r\n        sound.load();\r\n    };\r\n\r\n    Sound.defaults = {\r\n        id: null,\r\n        src: [],\r\n        format: null,\r\n        autoPlay: false,\r\n\r\n        duration: 0,\r\n        loop: false,\r\n        sprite: {},\r\n        volume: 1,\r\n        muted: false,\r\n        pos3d: [0, 0, -0.5],\r\n        rate: 1,\r\n\r\n        loaded: false,\r\n        buffer: false,\r\n        model: null,\r\n        onEndTimer: []\r\n    };\r\n\r\n    Sound.prototype = Object.create(Audio.prototype);\r\n    Sound.prototype.constructor = Sound;\r\n\r\n    Sound.prototype._load = function (sound) {\r\n        loadBuffer(sound, sound.data.src);\r\n        return sound;\r\n    };\r\n\r\n    Sound.prototype._unload = function (soundNode) {\r\n        soundNode.disconnect(0);\r\n    };\r\n\r\n    Sound.prototype.play = function (sprite, callback) {\r\n        var sound = this;\r\n\r\n        if (typeof sprite === 'function')  callback = sprite;\r\n\r\n        if (!sprite || typeof sprite === 'function') sprite = 'default';\r\n\r\n        if (!sound.data.loaded) {\r\n            sound.events.on('load', function () {\r\n                sound.play(sprite, callback);\r\n            });\r\n\r\n            return sound;\r\n        }\r\n\r\n        if (!sound.data.sprite[sprite]) {\r\n            if (typeof callback === 'function') callback();\r\n            return sound;\r\n        }\r\n\r\n        sound._inactiveNode(sound, function (node) {\r\n            node.sprite = sprite;\r\n\r\n            var pos = (node.pos > 0) ? node.pos : sound.data.sprite[sprite][0] / 1000;\r\n            var duration = sound.data.sprite[sprite][1] / 1000 - node.pos;\r\n            if (node.pos > 0) pos = sound.data.sprite[sprite][0] / 1000 + pos;\r\n            var loop = !!(sound.data.loop || sound.data.sprite[sprite][2]);\r\n\r\n            var soundId = (typeof callback === 'string')\r\n                ? callback\r\n                : Math.round(Date.now() * Math.random()) + '', timerId;\r\n\r\n            (function () {\r\n                var data = {\r\n                    id: soundId,\r\n                    sprite: sprite,\r\n                    loop: loop\r\n                };\r\n\r\n                timerId = setTimeout(function () {\r\n                    if (audioContext && !loop) {\r\n                        sound._nodeById(sound, data.id).paused = true;\r\n                        sound._nodeById(sound, data.id).pos = 0;\r\n                        sound._clearEndTimer(sound, data.id);\r\n                    }\r\n                    sound.events.trigger('unload', soundId);\r\n                }, (duration / sound.data.rate) * 1000);\r\n\r\n                sound.data.onEndTimer.push({timer: timerId, id: data.id});\r\n            })();\r\n\r\n            var loopStart = sound.data.sprite[sprite][0] / 1000,\r\n                loopEnd = sound.data.sprite[sprite][1] / 1000;\r\n\r\n            node.id = soundId;\r\n            node.paused = false;\r\n            refreshBuffer(sound, [loop, loopStart, loopEnd], soundId);\r\n            sound.data.playStart = audioContext.currentTime;\r\n            node.gain.value = sound.data.volume;\r\n\r\n            if (typeof node.bufferSource.start === 'undefined') {\r\n                loop ? node.bufferSource.noteGrainOn(0, pos, 86400) : node.bufferSource.noteGrainOn(0, pos, duration);\r\n            } else {\r\n                loop ? node.bufferSource.start(0, pos, 86400) : node.bufferSource.start(0, pos, duration);\r\n            }\r\n\r\n            sound.events.trigger('play');\r\n            if (typeof callback === 'function') callback(soundId);\r\n\r\n            return sound;\r\n        });\r\n\r\n        return sound;\r\n    };\r\n\r\n    Sound.prototype._pause = function (activeNode) {\r\n        if (!activeNode.bufferSource || activeNode.paused) {\r\n            return true;\r\n        }\r\n\r\n        activeNode.paused = true;\r\n        if (activeNode.bufferSource.stop == undefined) {\r\n            activeNode.bufferSource.noteOff(0);\r\n        } else {\r\n            activeNode.bufferSource.stop(0);\r\n        }\r\n        return false;\r\n    };\r\n\r\n    Sound.prototype._stop = function (activeNode) {\r\n        if (!activeNode.bufferSource || activeNode.paused) {\r\n            return true;\r\n        }\r\n\r\n        activeNode.paused = true;\r\n\r\n        if (typeof activeNode.bufferSource.stop === 'undefined') {\r\n            activeNode.bufferSource.noteOff(0);\r\n        } else {\r\n            activeNode.bufferSource.stop(0);\r\n        }\r\n        return false;\r\n    };\r\n\r\n    Sound.prototype._mute = function (activeNode) {\r\n        activeNode.gain.value = 0;\r\n    };\r\n\r\n    Sound.prototype._unMute = function (activeNode) {\r\n        activeNode.gain.value = this.data.volume;\r\n    };\r\n\r\n    Sound.prototype._volume = function (activeNode, vol) {\r\n        activeNode.gain.value = vol;\r\n    };\r\n\r\n    Sound.prototype._position = function (activeNode, v) {\r\n        if (v !== undefined && v == true) return activeNode.pos;\r\n        return activeNode.pos + (audioContext.currentTime - this.data.playStart);\r\n    };\r\n\r\n    Sound.prototype._pos3d = function (activeNode, x, y, z) {\r\n        if (activeNode) {\r\n            this.data.pos3d = [x, y, z];\r\n            activeNode.panner.setPosition(x, y, z);\r\n            activeNode.panner.panningModel = this.data.model || 'HRTF';\r\n        }\r\n    };\r\n\r\n    Sound.prototype._setupAudioNode = function () {\r\n        var sound = this,\r\n            node = sound.audioNode,\r\n            index = sound.audioNode.length;\r\n\r\n        node[index] = (audioContext.createGain === undefined)\r\n            ? audioContext.createGainNode()\r\n            : audioContext.createGain();\r\n\r\n        node[index].gain.value = sound.data.volume;\r\n        node[index].paused = true;\r\n        node[index].pos = 0;\r\n        node[index].readyState = 4;\r\n        node[index].connect(masterGain);\r\n\r\n        node[index].panner = audioContext.createPanner();\r\n        node[index].panner.panningModel = sound.data.model || 'equalpower';\r\n        node[index].panner.setPosition(sound.data.pos3d[0], sound.data.pos3d[1], sound.data.pos3d[2]);\r\n        node[index].panner.connect(node[index]);\r\n\r\n        return node[index];\r\n    };\r\n\r\n\r\n    /* Private */\r\n\r\n    Sound.prototype._inactiveNode = function (sound, callback) {\r\n        var node = null;\r\n\r\n        for (var i = 0; i < sound.audioNode.length; i++) {\r\n            if (sound.audioNode[i].paused && sound.audioNode[i].readyState === 4) {\r\n                callback(sound.audioNode[i]);\r\n                node = true;\r\n                break;\r\n            }\r\n        }\r\n\r\n        sound._drainPool(sound);\r\n\r\n        if (node) return;\r\n\r\n        var newNode = sound._setupAudioNode();\r\n        callback(newNode);\r\n    };\r\n\r\n    Sound.prototype._drainPool = function (sound) {\r\n        var inactive = 0;\r\n\r\n        for (var i = 0; i < sound.audioNode.length; i++) {\r\n            if (sound.audioNode[i].paused) inactive++;\r\n        }\r\n\r\n        for (i = sound.audioNode.length - 1; i >= 0; i--) {\r\n            if (inactive <= 5) break;\r\n\r\n            if (sound.audioNode[i].paused) {\r\n                if (audioContext) sound.audioNode[i].disconnect(0);\r\n                sound.audioNode.splice(i, 1);\r\n                inactive--;\r\n            }\r\n        }\r\n    };\r\n\r\n\r\n    /* WebAudioAPI Helpers */\r\n    /**\r\n     * Buffer a sound from URL (or from cache) and decode to audio source (Web Audio API).\r\n     * @param  {Object} sound The Sound object for the sound to load.\r\n     * @param  {String} url The path to the sound file.\r\n     */\r\n    var loadBuffer = function (sound, url) {\r\n        if (url in cache) {\r\n            sound.data.duration = cache[url].duration;\r\n\r\n            loadSound(sound);\r\n            return;\r\n        }\r\n\r\n        if (/^data:[^;]+;base64,/.test(url)) {\r\n            var data = atob(url.split(',')[1]);\r\n            var dataView = new Uint8Array(data.length);\r\n            for (var i = 0; i < data.length; ++i) {\r\n                dataView[i] = data.charCodeAt(i);\r\n            }\r\n\r\n            decodeAudioData(dataView.buffer, sound, url);\r\n        } else {\r\n            var xhr = new XMLHttpRequest();\r\n            xhr.open('GET', url, true);\r\n            xhr.responseType = 'arraybuffer';\r\n            xhr.onload = function () {\r\n                decodeAudioData(xhr.response, sound, url);\r\n            };\r\n            xhr.onerror = function () {\r\n                if (audioContext) {\r\n                    sound.data.buffer = true;\r\n                    sound.audioNode = [];\r\n                    delete sound.gainNode;\r\n                    delete cache[url];\r\n                    sound.load();\r\n                }\r\n            };\r\n            try {\r\n                xhr.send();\r\n            } catch (e) {\r\n                xhr.onerror();\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Decode audio data from an array buffer.\r\n     * @param  {ArrayBuffer} arraybuffer The audio data.\r\n     * @param  {Object} sound The Sound object for the sound to load.\r\n     * @param  {String} url The path to the sound file.\r\n     */\r\n    var decodeAudioData = function (arraybuffer, sound, url) {\r\n        audioContext.decodeAudioData(\r\n            arraybuffer,\r\n            function (buffer) {\r\n                if (buffer) {\r\n                    cache[url] = buffer;\r\n                    loadSound(sound, buffer);\r\n                }\r\n            },\r\n            function (error) {\r\n                sound.events.trigger('loaderror', error);\r\n            }\r\n        );\r\n    };\r\n\r\n    /**\r\n     * Finishes loading the Web Audio API sound and fires the loaded event\r\n     * @param  {Object}  sound    The Sound object for the sound to load.\r\n     * @param  {Object} [buffer] The decoded buffer sound source.\r\n     */\r\n    var loadSound = function (sound, buffer) {\r\n        sound.data.duration = (buffer) ? buffer.duration : sound.data.duration;\r\n\r\n        if (Object.getOwnPropertyNames(sound.data.sprite).length === 0) {\r\n            sound.data.sprite = {default: [0, sound.data.duration * 1000]};\r\n        }\r\n\r\n        if (!sound.data.loaded) {\r\n            sound.data.loaded = true;\r\n            sound.events.trigger('load');\r\n        }\r\n\r\n        if (sound.data.autoPlay) {\r\n            sound.play();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Load the sound back into the buffer source.\r\n     * @param  {Object} sound   The sound to load.\r\n     * @param  {Array}  loop  Loop boolean, pos, and duration.\r\n     * @param  {String} id    (optional) The play instance ID.\r\n     */\r\n    var refreshBuffer = function (sound, loop, id) {\r\n        var node = sound._nodeById(sound, id);\r\n\r\n        node.bufferSource = audioContext.createBufferSource();\r\n        node.bufferSource.buffer = cache[sound.data.src];\r\n        node.bufferSource.connect(node.panner);\r\n        node.bufferSource.loop = loop[0];\r\n        if (loop[0]) {\r\n            node.bufferSource.loopStart = loop[1];\r\n            node.bufferSource.loopEnd = loop[1] + loop[2];\r\n        }\r\n        //noinspection JSPrimitiveTypeWrapperUsage\r\n        node.bufferSource.playbackRate.value = sound.data.rate;\r\n    };\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.Sound = Sound;\r\n    if (global.j2d === undefined) global.j2d.media.Sound = Sound;\r\n    return Sound;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('media/Video', ['jquery', 'utils/ArrayMap'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(require('jquery'), require('utils/ArrayMap'));\r\n    } else {\r\n        factory(root.jQuery, root.ArrayMap);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function ($, ArrayMap) {\r\n    \"use strict\";\r\n\r\n    var Video = function () {\r\n\r\n    };\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.Video = Video;\r\n    if (global.j2d === undefined) global.j2d.media.Video = Video;\r\n    return Video;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @original_source https://github.com/tweenjs/tween.js\r\n * @license BSD, MIT(tween.js)\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('transitions/Tween', ['jquery', '../nodes/BaseNode', 'utils/Events'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(require('jquery'), require('nodes/BaseNode'), require('utils/Events'));\r\n    } else {\r\n        factory(root.jQuery, root.j2d.nodes.BaseNode, root.j2d.utils.Events);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function ($, BaseNode, Events) {\r\n    \"use strict\";\r\n\r\n    var tweens = [];\r\n\r\n    var parseProperties = function (data) {\r\n        var result = {};\r\n        var temp;\r\n        for (var field in data) {\r\n            if (data.hasOwnProperty(field)) {\r\n                temp = null;\r\n                if (typeof data[field] === 'object') temp = parseProperties(data[field]);\r\n                if (typeof data[field] === 'number') temp = parseFloat(data[field]);\r\n                if (temp !== null) result[field] = temp;\r\n            }\r\n        }\r\n        return Object.keys(result).length > 0 ? result : null;\r\n    };\r\n\r\n    /**\r\n     * @constructor\r\n     * @param {BaseNode|{data: object}} node\r\n     * @param {Tween.defaults|Object} [data]\r\n     * @property {Tween.defaults} data\r\n     */\r\n    var Tween = function (node, data) {\r\n        var tween = this;\r\n        tween.data = $.extend(true, {}, Tween.defaults, data);\r\n        tween.node = node;\r\n        tween.events = new Events();\r\n\r\n        tween.data.startProperties = parseProperties(tween.node.data);\r\n    };\r\n\r\n    Tween.get = function (index) {\r\n        return (index === undefined) ? tweens : tweens[index];\r\n    };\r\n\r\n    Tween.add = function (tween) {\r\n        tweens.push(tween);\r\n    };\r\n\r\n    Tween.remove = function (tween) {\r\n        var i = tweens.indexOf(tween);\r\n        if (i !== -1) tweens.splice(i, 1);\r\n    };\r\n\r\n    Tween.update = function (time) {\r\n        if (tweens.length === 0) return false;\r\n        var i = 0;\r\n        time = time !== undefined ? time : global.performance.now();\r\n\r\n        while (i < tweens.length) {\r\n            if (tweens[i].update(time)) {\r\n                i++;\r\n            } else {\r\n                tweens.splice(i, 1);\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n\r\n    Tween.flush = function () {\r\n        tweens = [];\r\n    };\r\n\r\n    Tween.prototype.to = function (properties, duration) {\r\n        if (duration !== undefined) this.data.duration = duration;\r\n        this.data.endProperties = properties;\r\n        return this;\r\n    };\r\n\r\n    Tween.prototype.start = function (time) {\r\n        var tween = this;\r\n        Tween.add(this);\r\n\r\n        tween.data.isAnimated = true;\r\n        tween.data.isStarted = false;\r\n\r\n        tween.data.startTime = time !== undefined ? time : global.performance.now();\r\n        tween.data.startTime += tween.data.delay;\r\n\r\n        // for (var property in tween.data.endProperties) {\r\n        //     if (tween.data.endProperties.hasOwnProperty(property) && tween.data.startProperties.hasOwnProperty(property)) {\r\n        //         if (tween.data.endProperties[property] instanceof Array) {\r\n        //             if (tween.data.endProperties[property].length === 0) continue;\r\n        //             tween.data.endProperties[property] = [tween.node.data[property]].concat(tween.data.endProperties[property]);\r\n        //         }\r\n        //\r\n        //         if (tween.data.startProperties[property] === undefined) continue;\r\n        //\r\n        //         tween.data.startProperties[property] = tween.node.data[property];\r\n        //\r\n        //         if (!(tween.data.startProperties[property] instanceof Array)) {\r\n        //             tween.data.startProperties[property] *= 1.0;\r\n        //         }\r\n        //\r\n        //         tween.data.repeatProperties[property] = tween.data.startProperties[property] || 0;\r\n        //     }\r\n        // }\r\n\r\n        return this;\r\n    };\r\n\r\n    Tween.prototype.stop = function () {\r\n        var tween = this;\r\n        if (!tween.data.isAnimated) return this;\r\n\r\n        Tween.remove(this);\r\n        tween.data.isAnimated = false;\r\n\r\n        tween.events.trigger('stop', [tween.node]);\r\n\r\n        tween.stopChainedTweens();\r\n        return this;\r\n    };\r\n\r\n    Tween.prototype.stopChainedTweens = function () {\r\n        var tween = this;\r\n        for (i = 0; i < tween.data.chainedTweens.length; i++) {\r\n            tween.data.chainedTweens[i].stop();\r\n        }\r\n    };\r\n\r\n    Tween.prototype.delay = function (amount) {\r\n        this.data.delay = amount;\r\n        return this;\r\n    };\r\n\r\n    Tween.prototype.repeat = function (times) {\r\n        this.data.repeat = times;\r\n        return this;\r\n    };\r\n\r\n    Tween.prototype.yoyo = function (yoyo) {\r\n        this.data.yoyo = yoyo;\r\n        return this;\r\n    };\r\n\r\n    Tween.prototype.easing = function (easing) {\r\n        this.data.easingFunction = easing;\r\n        return this;\r\n    };\r\n\r\n    Tween.prototype.interpolation = function (interpolation) {\r\n        this.data.interpolationFunction = interpolation;\r\n        return this;\r\n    };\r\n\r\n    Tween.prototype.chain = function () {\r\n        this.data.chainedTweens = arguments;\r\n        return this;\r\n    };\r\n\r\n    Tween.prototype.old_update = function (time) {\r\n        var tween = this;\r\n\r\n        var property;\r\n        var elapsed;\r\n        var value;\r\n\r\n        if (time < tween.data.startTime) return true;\r\n\r\n        if (!tween.data.isStarted) {\r\n            tween.events.trigger('start', [tween.node]);\r\n            tween.data.isStarted = true;\r\n        }\r\n\r\n        elapsed = (time - tween.data.startTime) / tween.data.duration;\r\n        elapsed = elapsed > 1 ? 1 : elapsed;\r\n\r\n        value = tween.data.easingFunction(elapsed);\r\n\r\n        for (property in tween.data.endProperties) {\r\n            if (tween.data.endProperties.hasOwnProperty(property) && tween.data.startProperties.hasOwnProperty(property)) {\r\n                if (tween.data.startProperties[property] === undefined) continue;\r\n\r\n                var start = tween.data.startProperties[property] || 0;\r\n                var end = tween.data.endProperties[property];\r\n\r\n                if (end instanceof Array) {\r\n                    tween.node.data[property] = tween.data.interpolationFunction(end, value);\r\n                } else {\r\n                    if (typeof (end) === 'string') {\r\n                        end = (end.lastIndexOf('+', 0) === 0 || end.lastIndexOf('-', 0) === 0)\r\n                            ? start + parseFloat(end)\r\n                            : parseFloat(end);\r\n                    }\r\n                    if (typeof (end) === 'number') {\r\n                        tween.node.data[property] = start + (end - start) * value;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        tween.events.trigger('update', [tween.node]);\r\n\r\n        if (elapsed === 1) {\r\n            if (tween.data.repeat > 0) {\r\n                if (isFinite(tween.data.repeat)) {\r\n                    tween.data.repeat--;\r\n                }\r\n                for (property in tween.data.repeatProperties) {\r\n                    if (tween.data.repeatProperties.hasOwnProperty(property)) {\r\n                        if (typeof (tween.data.endProperties[property]) === 'string') {\r\n                            tween.data.repeatProperties[property] = tween.data.repeatProperties[property] + parseFloat(tween.data.endProperties[property]);\r\n                        }\r\n\r\n                        if (tween.data.yoyo) {\r\n                            var tmp = tween.data.repeatProperties[property];\r\n                            tween.data.repeatProperties[property] = tween.data.endProperties[property];\r\n                            tween.data.endProperties[property] = tmp;\r\n                        }\r\n\r\n                        tween.data.startProperties[property] = tween.data.repeatProperties[property];\r\n                    }\r\n                }\r\n\r\n                if (tween.data.yoyo) {\r\n                    tween.data.reversed = !tween.data.reversed;\r\n                }\r\n                tween.data.startTime = time + tween.data.delay;\r\n\r\n                return true;\r\n            } else {\r\n                tween.events.trigger('complete', [tween.node]);\r\n                for (i = 0; i < tween.data.chainedTweens.length; i++) {\r\n                    tween.data.chainedTweens[i].start(tween.data.startTime + tween.data.duration);\r\n                }\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n\r\n    var calcTween = function(endProperties, startProperties, value) {\r\n        var result = {};\r\n        var property;\r\n        var temp;\r\n\r\n        for (property in endProperties) {\r\n            if (endProperties.hasOwnProperty(property) && startProperties.hasOwnProperty(property)) {\r\n                temp = null;\r\n                if (typeof startProperties[property] === 'number') {\r\n                    temp = startProperties[property] + (endProperties[property] - startProperties[property]) * value;\r\n                }\r\n                if (typeof startProperties[property] === 'object') {\r\n                    temp = calcTween(endProperties[property], startProperties[property], value);\r\n                }\r\n\r\n                if (temp !== null) result[property] = temp;\r\n            }\r\n        }\r\n\r\n        return Object.keys(result).length > 0 ? result : null;\r\n    };\r\n\r\n    Tween.prototype.update = function (time) {\r\n        var tween = this;\r\n\r\n        var property;\r\n        var elapsed;\r\n        var data;\r\n\r\n        if (time < tween.data.startTime) return true;\r\n\r\n        if (!tween.data.isStarted) {\r\n            tween.events.trigger('start', [tween.node]);\r\n            tween.data.isStarted = true;\r\n        }\r\n\r\n        elapsed = (time - tween.data.startTime) / tween.data.duration;\r\n        elapsed = elapsed > 1 ? 1 : elapsed;\r\n\r\n        data = calcTween(tween.data.endProperties, tween.data.startProperties, tween.data.easingFunction(elapsed));\r\n        tween.node.import(data);\r\n\r\n        tween.events.trigger('update', [tween.node]);\r\n        //\r\n        // if (elapsed === 1) {\r\n        //     if (tween.data.repeat > 0) {\r\n        //         if (isFinite(tween.data.repeat)) {\r\n        //             tween.data.repeat--;\r\n        //         }\r\n        //         for (property in tween.data.repeatProperties) {\r\n        //             if (tween.data.repeatProperties.hasOwnProperty(property)) {\r\n        //                 if (typeof (tween.data.endProperties[property]) === 'string') {\r\n        //                     tween.data.repeatProperties[property] = tween.data.repeatProperties[property] + parseFloat(tween.data.endProperties[property]);\r\n        //                 }\r\n        //\r\n        //                 if (tween.data.yoyo) {\r\n        //                     var tmp = tween.data.repeatProperties[property];\r\n        //                     tween.data.repeatProperties[property] = tween.data.endProperties[property];\r\n        //                     tween.data.endProperties[property] = tmp;\r\n        //                 }\r\n        //\r\n        //                 tween.data.startProperties[property] = tween.data.repeatProperties[property];\r\n        //             }\r\n        //         }\r\n        //\r\n        //         if (tween.data.yoyo) {\r\n        //             tween.data.reversed = !tween.data.reversed;\r\n        //         }\r\n        //         tween.data.startTime = time + tween.data.delay;\r\n        //\r\n        //         return true;\r\n        //     } else {\r\n        //         tween.events.trigger('complete', [tween.node]);\r\n        //         for (i = 0; i < tween.data.chainedTweens.length; i++) {\r\n        //             tween.data.chainedTweens[i].start(tween.data.startTime + tween.data.duration);\r\n        //         }\r\n        //         return false;\r\n        //     }\r\n        // }\r\n        return true;\r\n    };\r\n\r\n    Tween.prototype.on = function (event, callback) {\r\n        this.events.on(event, callback);\r\n    };\r\n\r\n    Tween.prototype.off = function (event, callback) {\r\n        this.events.off(event, callback);\r\n    };\r\n\r\n    Tween.prototype.once = function (event, callback) {\r\n        this.events.once(event, callback);\r\n    };\r\n\r\n    Tween.prototype.flush = function (event) {\r\n        this.events.flush(event);\r\n    };\r\n\r\n    Tween.prototype.trigger = function (event, data) {\r\n        this.events.trigger(event, data);\r\n    };\r\n\r\n    /* Easing */\r\n    Tween.Easing = {\r\n        Linear: {\r\n            None: function (k) {\r\n                return k;\r\n            }\r\n        },\r\n\r\n        Quadratic: {\r\n            /**\r\n             * @return {number}\r\n             */\r\n            In: function (k) {\r\n                return k * k;\r\n            },\r\n\r\n            /**\r\n             * @return {number}\r\n             */\r\n            Out: function (k) {\r\n                return k * (2 - k);\r\n            },\r\n\r\n            /**\r\n             * @return {number}\r\n             */\r\n            InOut: function (k) {\r\n                if ((k *= 2) < 1) return 0.5 * k * k;\r\n                return -0.5 * (--k * (k - 2) - 1);\r\n            }\r\n        },\r\n\r\n        Cubic: {\r\n            /**\r\n             * @return {number}\r\n             */\r\n            In: function (k) {\r\n                return k * k * k;\r\n            },\r\n\r\n            /**\r\n             * @return {number}\r\n             */\r\n            Out: function (k) {\r\n                return --k * k * k + 1;\r\n            },\r\n\r\n            /**\r\n             * @return {number}\r\n             */\r\n            InOut: function (k) {\r\n                if ((k *= 2) < 1) return 0.5 * k * k * k;\r\n                return 0.5 * ((k -= 2) * k * k + 2);\r\n            }\r\n        },\r\n\r\n        Quartic: {\r\n            /**\r\n             * @return {number}\r\n             */\r\n            In: function (k) {\r\n                return k * k * k * k;\r\n            },\r\n\r\n            /**\r\n             * @return {number}\r\n             */\r\n            Out: function (k) {\r\n                return 1 - (--k * k * k * k);\r\n            },\r\n\r\n            /**\r\n             * @return {number}\r\n             */\r\n            InOut: function (k) {\r\n                if ((k *= 2) < 1)  return 0.5 * k * k * k * k;\r\n                return -0.5 * ((k -= 2) * k * k * k - 2);\r\n            }\r\n\r\n        },\r\n\r\n        Quintic: {\r\n            /**\r\n             * @return {number}\r\n             */\r\n            In: function (k) {\r\n                return k * k * k * k * k;\r\n            },\r\n\r\n            /**\r\n             * @return {number}\r\n             */\r\n            Out: function (k) {\r\n                return --k * k * k * k * k + 1;\r\n            },\r\n\r\n            /**\r\n             * @return {number}\r\n             */\r\n            InOut: function (k) {\r\n                if ((k *= 2) < 1) return 0.5 * k * k * k * k * k;\r\n                return 0.5 * ((k -= 2) * k * k * k * k + 2);\r\n            }\r\n\r\n        },\r\n\r\n        Sinusoidal: {\r\n            /**\r\n             * @return {number}\r\n             */\r\n            In: function (k) {\r\n                return 1 - Math.cos(k * Math.PI / 2);\r\n            },\r\n\r\n            /**\r\n             * @return {number}\r\n             */\r\n            Out: function (k) {\r\n                return Math.sin(k * Math.PI / 2);\r\n            },\r\n\r\n            /**\r\n             * @return {number}\r\n             */\r\n            InOut: function (k) {\r\n                return 0.5 * (1 - Math.cos(Math.PI * k));\r\n            }\r\n        },\r\n\r\n        Exponential: {\r\n            /**\r\n             * @return {number}\r\n             */\r\n            In: function (k) {\r\n                return k === 0 ? 0 : Math.pow(1024, k - 1);\r\n            },\r\n\r\n            /**\r\n             * @return {number}\r\n             */\r\n            Out: function (k) {\r\n                return k === 1 ? 1 : 1 - Math.pow(2, -10 * k);\r\n            },\r\n\r\n            /**\r\n             * @return {number}\r\n             */\r\n            InOut: function (k) {\r\n                if (k === 0) return 0;\r\n                if (k === 1) return 1;\r\n                if ((k *= 2) < 1) return 0.5 * Math.pow(1024, k - 1);\r\n\r\n                return 0.5 * (-Math.pow(2, -10 * (k - 1)) + 2);\r\n            }\r\n        },\r\n\r\n        Circular: {\r\n            /**\r\n             * @return {number}\r\n             */\r\n            In: function (k) {\r\n                return 1 - Math.sqrt(1 - k * k);\r\n            },\r\n\r\n            /**\r\n             * @return {number}\r\n             */\r\n            Out: function (k) {\r\n                return Math.sqrt(1 - (--k * k));\r\n            },\r\n\r\n            /**\r\n             * @return {number}\r\n             */\r\n            InOut: function (k) {\r\n                if ((k *= 2) < 1) return -0.5 * (Math.sqrt(1 - k * k) - 1);\r\n                return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);\r\n            }\r\n        },\r\n\r\n        Elastic: {\r\n            /**\r\n             * @return {number}\r\n             */\r\n            In: function (k) {\r\n                var s;\r\n                var a = 0.1;\r\n                var p = 0.4;\r\n\r\n                if (k === 0) return 0;\r\n                if (k === 1) return 1;\r\n\r\n                if (!a || a < 1) {\r\n                    a = 1;\r\n                    s = p / 4;\r\n                } else {\r\n                    s = p * Math.asin(1 / a) / (2 * Math.PI);\r\n                }\r\n\r\n                return -(a * Math.pow(2, 10 * (k -= 1)) * Math.sin((k - s) * (2 * Math.PI) / p));\r\n            },\r\n\r\n            /**\r\n             * @return {number}\r\n             */\r\n            Out: function (k) {\r\n                var s;\r\n                var a = 0.1;\r\n                var p = 0.4;\r\n\r\n                if (k === 0) return 0;\r\n                if (k === 1) return 1;\r\n\r\n                if (!a || a < 1) {\r\n                    a = 1;\r\n                    s = p / 4;\r\n                } else {\r\n                    s = p * Math.asin(1 / a) / (2 * Math.PI);\r\n                }\r\n\r\n                return (a * Math.pow(2, -10 * k) * Math.sin((k - s) * (2 * Math.PI) / p) + 1);\r\n            },\r\n\r\n            /**\r\n             * @return {number}\r\n             */\r\n            InOut: function (k) {\r\n\r\n                var s;\r\n                var a = 0.1;\r\n                var p = 0.4;\r\n\r\n                if (k === 0) return 0;\r\n                if (k === 1) return 1;\r\n\r\n                if (!a || a < 1) {\r\n                    a = 1;\r\n                    s = p / 4;\r\n                } else {\r\n                    s = p * Math.asin(1 / a) / (2 * Math.PI);\r\n                }\r\n\r\n                if ((k *= 2) < 1) {\r\n                    return -0.5 * (a * Math.pow(2, 10 * (k -= 1)) * Math.sin((k - s) * (2 * Math.PI) / p));\r\n                }\r\n\r\n                return a * Math.pow(2, -10 * (k -= 1)) * Math.sin((k - s) * (2 * Math.PI) / p) * 0.5 + 1;\r\n\r\n            }\r\n\r\n        },\r\n\r\n        Back: {\r\n            /**\r\n             * @return {number}\r\n             */\r\n            In: function (k) {\r\n                var s = 1.70158;\r\n\r\n                return k * k * ((s + 1) * k - s);\r\n            },\r\n\r\n            /**\r\n             * @return {number}\r\n             */\r\n            Out: function (k) {\r\n                var s = 1.70158;\r\n\r\n                return --k * k * ((s + 1) * k + s) + 1;\r\n            },\r\n\r\n            /**\r\n             * @return {number}\r\n             */\r\n            InOut: function (k) {\r\n                var s = 1.70158 * 1.525;\r\n                if ((k *= 2) < 1) return 0.5 * (k * k * ((s + 1) * k - s));\r\n\r\n                return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\r\n            }\r\n        },\r\n\r\n        Bounce: {\r\n            /**\r\n             * @return {number}\r\n             */\r\n            In: function (k) {\r\n                return 1 - Tween.Easing.Bounce.Out(1 - k);\r\n            },\r\n\r\n            /**\r\n             * @return {number}\r\n             */\r\n            Out: function (k) {\r\n                if (k < (1 / 2.75)) {\r\n                    return 7.5625 * k * k;\r\n                } else if (k < (2 / 2.75)) {\r\n                    return 7.5625 * (k -= (1.5 / 2.75)) * k + 0.75;\r\n                } else if (k < (2.5 / 2.75)) {\r\n                    return 7.5625 * (k -= (2.25 / 2.75)) * k + 0.9375;\r\n                } else {\r\n                    return 7.5625 * (k -= (2.625 / 2.75)) * k + 0.984375;\r\n                }\r\n            },\r\n\r\n            /**\r\n             * @return {number}\r\n             */\r\n            InOut: function (k) {\r\n                if (k < 0.5) return Tween.Easing.Bounce.In(k * 2) * 0.5;\r\n                return Tween.Easing.Bounce.Out(k * 2 - 1) * 0.5 + 0.5;\r\n            }\r\n        }\r\n    };\r\n\r\n    /* Interpolation */\r\n    Tween.Interpolation = {\r\n        Linear: function (v, k) {\r\n            var m = v.length - 1;\r\n            var f = m * k;\r\n            var i = Math.floor(f);\r\n            var fn = Tween.Interpolation.Utils.Linear;\r\n\r\n            if (k < 0) return fn(v[0], v[1], f);\r\n            if (k > 1) return fn(v[m], v[m - 1], m - f);\r\n\r\n            return fn(v[i], v[i + 1 > m ? m : i + 1], f - i);\r\n\r\n        },\r\n\r\n        /**\r\n         * @return {number}\r\n         */\r\n        Bezier: function (v, k) {\r\n            var b = 0;\r\n            var n = v.length - 1;\r\n            var pw = Math.pow;\r\n            var bn = Tween.Interpolation.Utils.Bernstein;\r\n\r\n            for (var i = 0; i <= n; i++) {\r\n                b += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i);\r\n            }\r\n\r\n            return b;\r\n\r\n        },\r\n\r\n        /**\r\n         * @return {number}\r\n         */\r\n        CatmullRom: function (v, k) {\r\n            var m = v.length - 1;\r\n            var f = m * k;\r\n            var i = Math.floor(f);\r\n            var fn = Tween.Interpolation.Utils.CatmullRom;\r\n\r\n            if (v[0] === v[m]) {\r\n                if (k < 0) i = Math.floor(f = m * (1 + k));\r\n\r\n                return fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i);\r\n            } else {\r\n                if (k < 0) return v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0]);\r\n                if (k > 1) return v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m]);\r\n\r\n                return fn(v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2], f - i);\r\n            }\r\n        },\r\n\r\n        Utils: {\r\n            Linear: function (p0, p1, t) {\r\n                return (p1 - p0) * t + p0;\r\n            },\r\n\r\n            /**\r\n             * @return {number}\r\n             */\r\n            Bernstein: function (n, i) {\r\n                var fc = Tween.Interpolation.Utils.Factorial;\r\n                return fc(n) / fc(i) / fc(n - i);\r\n            },\r\n\r\n            Factorial: (function () {\r\n                var a = [1];\r\n                return function (n) {\r\n                    var s = 1;\r\n                    if (a[n]) return a[n];\r\n\r\n                    for (var i = n; i > 1; i--) {\r\n                        s *= i;\r\n                    }\r\n                    a[n] = s;\r\n\r\n                    return s;\r\n                };\r\n            })(),\r\n\r\n            CatmullRom: function (p0, p1, p2, p3, t) {\r\n                var v0 = (p2 - p0) * 0.5;\r\n                var v1 = (p3 - p1) * 0.5;\r\n                var t2 = t * t;\r\n                var t3 = t * t2;\r\n\r\n                return (2 * p1 - 2 * p2 + v0 + v1) * t3 + (-3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1;\r\n            }\r\n        }\r\n    };\r\n\r\n    Tween.defaults = {\r\n        startProperties: {},\r\n        endProperties: {},\r\n        repeatProperties: {},\r\n        startTime: null,\r\n\r\n        chainedTweens: [],\r\n\r\n        duration: 1000,\r\n        repeat: 0,\r\n        delay: 0,\r\n\r\n        yoyo: false,\r\n\r\n        isAnimated: false,\r\n        isStarted: false,\r\n\r\n        easingFunction: Tween.Easing.Linear.None,\r\n        interpolationFunction: Tween.Interpolation.Linear\r\n    };\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.Tween = Tween;\r\n    if (global.j2d === undefined) global.j2d.transitions.Tween = Tween;\r\n    return Tween;\r\n}));\r\n\r\n\r\n\r\n\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('exceptions/BadFunctionCallException', ['exceptions/Exception'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(require('exceptions/Exception'));\r\n    } else {\r\n        factory(root.j2d.exceptions.Exception);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function (Exception) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * BadFunctionCallException\r\n     * Create custom exception with message\r\n     *\r\n     * @param {string} message\r\n     * @property {string} message\r\n     */\r\n    var BadFunctionCallException = function (message) {\r\n        Exception.call(this, message);\r\n\r\n        /**\r\n         * Convert exception to String\r\n         * @returns {string}\r\n         */\r\n        this.toString = function () {\r\n            return this.message;\r\n        }\r\n    };\r\n\r\n    BadFunctionCallException.prototype = Object.create(Exception.prototype);\r\n    BadFunctionCallException.prototype.constructor = BadFunctionCallException;\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.BadFunctionCallException = BadFunctionCallException;\r\n    if (global.j2d === undefined) global.j2d.exceptions.BadFunctionCallException = BadFunctionCallException;\r\n    return BadFunctionCallException;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('exceptions/BadMethodCallException', ['exceptions/Exception'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(require('exceptions/Exception'));\r\n    } else {\r\n        factory(root.j2d.exceptions.Exception);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function (Exception) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * BadMethodCallException\r\n     * Create custom exception with message\r\n     *\r\n     * @param {string} message\r\n     * @property {string} message\r\n     */\r\n    var BadMethodCallException = function (message) {\r\n        Exception.call(this, message);\r\n\r\n        /**\r\n         * Convert exception to String\r\n         * @returns {string}\r\n         */\r\n        this.toString = function () {\r\n            return this.message;\r\n        }\r\n    };\r\n\r\n    BadMethodCallException.prototype = Object.create(Exception.prototype);\r\n    BadMethodCallException.prototype.constructor = BadMethodCallException;\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.BadMethodCallException = BadMethodCallException;\r\n    if (global.j2d === undefined) global.j2d.exceptions.BadMethodCallException = BadMethodCallException;\r\n    return BadMethodCallException;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('exceptions/Exception', [], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory();\r\n    } else {\r\n        factory();\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function () {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * Default Exception\r\n     * Create custom exception with message\r\n     *\r\n     * @param {string} message\r\n     * @property {string} message\r\n     */\r\n    var Exception = function (message) {\r\n        Error.call(this, message);\r\n        this.message = message;\r\n\r\n        /**\r\n         * Convert exception to String\r\n         * @returns {string}\r\n         */\r\n        this.toString = function () {\r\n            return this.message;\r\n        }\r\n    };\r\n\r\n    Exception.prototype = Object.create(Error.prototype);\r\n    Exception.prototype.constructor = Exception;\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.Exception = Exception;\r\n    if (global.j2d === undefined) global.j2d.exceptions.Exception = Exception;\r\n    return Exception;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('exceptions/InvalidArgumentException', ['exceptions/Exception'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(require('exceptions/Exception'));\r\n    } else {\r\n        factory(root.j2d.exceptions.Exception);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function (Exception) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * InvalidArgumentException\r\n     * Create custom exception with message\r\n     *\r\n     * @param {string} message\r\n     * @property {string} message\r\n     */\r\n    var InvalidArgumentException = function (message) {\r\n        Exception.call(this, message);\r\n\r\n        /**\r\n         * Convert exception to String\r\n         * @returns {string}\r\n         */\r\n        this.toString = function () {\r\n            return this.message;\r\n        }\r\n    };\r\n\r\n    InvalidArgumentException.prototype = Object.create(Exception.prototype);\r\n    InvalidArgumentException.prototype.constructor = InvalidArgumentException;\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.InvalidArgumentException = InvalidArgumentException;\r\n    if (global.j2d === undefined) global.j2d.exceptions.InvalidArgumentException = InvalidArgumentException;\r\n    return InvalidArgumentException;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('exceptions/LengthException', ['exceptions/Exception'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(require('exceptions/Exception'));\r\n    } else {\r\n        factory(root.j2d.exceptions.Exception);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function (Exception) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * LengthException\r\n     * Create custom exception with message\r\n     *\r\n     * @param {string} message\r\n     * @property {string} message\r\n     */\r\n    var LengthException = function (message) {\r\n        Exception.call(this, message);\r\n\r\n        /**\r\n         * Convert exception to String\r\n         * @returns {string}\r\n         */\r\n        this.toString = function () {\r\n            return this.message;\r\n        }\r\n    };\r\n\r\n    LengthException.prototype = Object.create(Exception.prototype);\r\n    LengthException.prototype.constructor = LengthException;\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.LengthException = LengthException;\r\n    if (global.j2d === undefined) global.j2d.exceptions.LengthException = LengthException;\r\n    return LengthException;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('exceptions/LogicException', ['exceptions/Exception'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(require('exceptions/Exception'));\r\n    } else {\r\n        factory(root.j2d.exceptions.Exception);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function (Exception) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * LogicException\r\n     * Create custom exception with message\r\n     *\r\n     * @param {string} message\r\n     * @property {string} message\r\n     */\r\n    var LogicException = function (message) {\r\n        Exception.call(this, message);\r\n\r\n        /**\r\n         * Convert exception to String\r\n         * @returns {string}\r\n         */\r\n        this.toString = function () {\r\n            return this.message;\r\n        }\r\n    };\r\n\r\n    LogicException.prototype = Object.create(Exception.prototype);\r\n    LogicException.prototype.constructor = LogicException;\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.LogicException = LogicException;\r\n    if (global.j2d === undefined) global.j2d.exceptions.LogicException = LogicException;\r\n    return LogicException;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('exceptions/OutOfBoundsException', ['exceptions/Exception'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(require('exceptions/Exception'));\r\n    } else {\r\n        factory(root.j2d.exceptions.Exception);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function (Exception) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * OutOfBoundsException\r\n     * Create custom exception with message\r\n     *\r\n     * @param {string} message\r\n     * @property {string} message\r\n     */\r\n    var OutOfBoundsException = function (message) {\r\n        Exception.call(this, message);\r\n\r\n        /**\r\n         * Convert exception to String\r\n         * @returns {string}\r\n         */\r\n        this.toString = function () {\r\n            return this.message;\r\n        }\r\n    };\r\n\r\n    OutOfBoundsException.prototype = Object.create(Exception.prototype);\r\n    OutOfBoundsException.prototype.constructor = OutOfBoundsException;\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.OutOfBoundsException = OutOfBoundsException;\r\n    if (global.j2d === undefined) global.j2d.exceptions.OutOfBoundsException = OutOfBoundsException;\r\n    return OutOfBoundsException;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('exceptions/OutOfRangeException', ['exceptions/Exception'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(require('exceptions/Exception'));\r\n    } else {\r\n        factory(root.j2d.exceptions.Exception);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function (Exception) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * OutOfRangeException\r\n     * Create custom exception with message\r\n     *\r\n     * @param {string} message\r\n     * @property {string} message\r\n     */\r\n    var OutOfRangeException = function (message) {\r\n        Exception.call(this, message);\r\n\r\n        /**\r\n         * Convert exception to String\r\n         * @returns {string}\r\n         */\r\n        this.toString = function () {\r\n            return this.message;\r\n        }\r\n    };\r\n\r\n    OutOfRangeException.prototype = Object.create(Exception.prototype);\r\n    OutOfRangeException.prototype.constructor = OutOfRangeException;\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.OutOfRangeException = OutOfRangeException;\r\n    if (global.j2d === undefined) global.j2d.exceptions.OutOfRangeException = OutOfRangeException;\r\n    return OutOfRangeException;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('exceptions/RangeException', ['exceptions/Exception'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(require('exceptions/Exception'));\r\n    } else {\r\n        factory(root.j2d.exceptions.Exception);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function (Exception) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * RangeException\r\n     * Create custom exception with message\r\n     *\r\n     * @param {string} message\r\n     * @property {string} message\r\n     */\r\n    var RangeException = function (message) {\r\n        Exception.call(this, message);\r\n\r\n        /**\r\n         * Convert exception to String\r\n         * @returns {string}\r\n         */\r\n        this.toString = function () {\r\n            return this.message;\r\n        }\r\n    };\r\n\r\n    RangeException.prototype = Object.create(Exception.prototype);\r\n    RangeException.prototype.constructor = RangeException;\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.RangeException = RangeException;\r\n    if (global.j2d === undefined) global.j2d.exceptions.RangeException = RangeException;\r\n    return RangeException;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('exceptions/RuntimeException', ['exceptions/Exception'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(require('exceptions/Exception'));\r\n    } else {\r\n        factory(root.j2d.exceptions.Exception);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function (Exception) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * RuntimeException\r\n     * Create custom exception with message\r\n     *\r\n     * @param {string} message\r\n     * @property {string} message\r\n     */\r\n    var RuntimeException = function (message) {\r\n        Exception.call(this, message);\r\n\r\n        /**\r\n         * Convert exception to String\r\n         * @returns {string}\r\n         */\r\n        this.toString = function () {\r\n            return this.message;\r\n        }\r\n    };\r\n\r\n    RuntimeException.prototype = Object.create(Exception.prototype);\r\n    RuntimeException.prototype.constructor = RuntimeException;\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.RuntimeException = RuntimeException;\r\n    if (global.j2d === undefined) global.j2d.exceptions.RuntimeException = RuntimeException;\r\n    return RuntimeException;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('exceptions/UnexpectedValueException', ['exceptions/Exception'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(require('exceptions/Exception'));\r\n    } else {\r\n        factory(root.j2d.exceptions.Exception);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function (Exception) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * UnexpectedValueException\r\n     * Create custom exception with message\r\n     *\r\n     * @param {string} message\r\n     * @property {string} message\r\n     */\r\n    var UnexpectedValueException = function (message) {\r\n        Exception.call(this, message);\r\n\r\n        /**\r\n         * Convert exception to String\r\n         * @returns {string}\r\n         */\r\n        this.toString = function () {\r\n            return this.message;\r\n        }\r\n    };\r\n\r\n    UnexpectedValueException.prototype = Object.create(Exception.prototype);\r\n    UnexpectedValueException.prototype.constructor = UnexpectedValueException;\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.UnexpectedValueException = UnexpectedValueException;\r\n    if (global.j2d === undefined) global.j2d.exceptions.UnexpectedValueException = UnexpectedValueException;\r\n    return UnexpectedValueException;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('utils/ArrayMap', [], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory();\r\n    } else {\r\n        factory();\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function () {\r\n    \"use strict\";\r\n\r\n    var ArrayMap = function (args) {\r\n        Array.call(this, args);\r\n    };\r\n\r\n    ArrayMap.prototype = Object.create(Array.prototype);\r\n    ArrayMap.prototype.constructor = ArrayMap;\r\n\r\n    ArrayMap.prototype.last = function () {\r\n        return this[this.length - 1];\r\n    };\r\n\r\n    /**\r\n     * @param {ArrayMap.<T>} array\r\n     * @returns {boolean}\r\n     */\r\n    ArrayMap.prototype.equals = function (array) {\r\n        if (!array)\r\n            return false;\r\n\r\n        if (this.length != array.length)\r\n            return false;\r\n\r\n        for (var i = 0, l = this.length; i < l; i++) {\r\n            if (this[i] instanceof Array && array[i] instanceof Array) {\r\n                if (!this[i].equals(array[i]))\r\n                    return false;\r\n            }\r\n            else if (this[i] != array[i]) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    Object.defineProperty(ArrayMap.prototype, 'equals', {enumerable: false});\r\n\r\n    /**\r\n     * @param {string|Object} object\r\n     * @returns {boolean}\r\n     */\r\n    ArrayMap.prototype.contains = function (object) {\r\n        var i = this.length;\r\n        while (i--) {\r\n            if (this[i] === object) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    Object.defineProperty(ArrayMap.prototype, 'contains', {enumerable: false});\r\n\r\n    /**\r\n     * @param {Function} callback\r\n     * @returns {boolean}\r\n     */\r\n    ArrayMap.prototype.each = function (callback) {\r\n        if (!callback) return false;\r\n        var result = false;\r\n        for (var i = 0; i < this.length; i++) {\r\n            if ((result = callback(this[i], i)) == false) {\r\n                return result;\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    Object.defineProperty(ArrayMap.prototype, 'each', {enumerable: false});\r\n\r\n    /**\r\n     * @param {string|Object} key\r\n     * @param {*} value\r\n     * @returns {ArrayMap.<T>}\r\n     */\r\n    ArrayMap.prototype.add = function (key, value) {\r\n        if (this.contains(key))\r\n            this[key] = value;\r\n        else {\r\n            this.push(key);\r\n            this[key] = value;\r\n        }\r\n        return this;\r\n    };\r\n    Object.defineProperty(ArrayMap.prototype, 'add', {enumerable: false});\r\n\r\n    /**\r\n     * @param {string|Object} key\r\n     * @returns {*}\r\n     */\r\n    ArrayMap.prototype.get = function (key) {\r\n        return this.contains(key) ? this[key] : null;\r\n    };\r\n    Object.defineProperty(ArrayMap.prototype, 'get', {enumerable: false});\r\n\r\n    /**\r\n     * @param {string|Object} key\r\n     * @returns {ArrayMap.<T>}\r\n     */\r\n    ArrayMap.prototype.remove = function (key) {\r\n        for (var i = 0; i < this.length; ++i) {\r\n            if (this[i] == key) {\r\n                this.splice(i, 1);\r\n                delete this[key];\r\n                return this;\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    Object.defineProperty(ArrayMap.prototype, 'remove', {enumerable: false});\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.ArrayMap = ArrayMap;\r\n    if (global.j2d === undefined) global.j2d.utils.ArrayMap = ArrayMap;\r\n    return ArrayMap;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('utils/DeviceUtil', ['jquery', 'utils/Vector2dInteger'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(require('jquery'), require('utils/Vector2dInteger'));\r\n    } else {\r\n        factory(root.jQuery, root.j2d.utils.Vector2dInteger);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function ($, Vector2dInteger) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * Class utility for get system browser window size\r\n     */\r\n    var DeviceUtil = function () {\r\n        this.width = parseInt($(document).width()) < parseInt(screen.width) ? parseInt($(document).width()) : parseInt(screen.width);\r\n        this.height = parseInt($(document).height()) < parseInt(screen.height) ? parseInt($(document).height()) : parseInt(screen.height);\r\n    };\r\n\r\n    /**\r\n     * @returns {DeviceUtil}\r\n     */\r\n    DeviceUtil.prototype.onResize = function () {\r\n        this.width = window.innerWidth;\r\n        this.height = window.innerHeight;\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @returns {number}\r\n     */\r\n    DeviceUtil.prototype.getWidth = function () {\r\n        return this.width;\r\n    };\r\n\r\n    /**\r\n     * @returns {number}\r\n     */\r\n    DeviceUtil.prototype.getHeight = function () {\r\n        return this.height;\r\n    };\r\n\r\n    /**\r\n     * @returns {Vector2d}\r\n     */\r\n    DeviceUtil.prototype.getSize = function () {\r\n        return new Vector2dInteger(this.width, this.height);\r\n    };\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.DeviceUtil = DeviceUtil;\r\n    if (global.j2d === undefined) global.j2d.utils.DeviceUtil = DeviceUtil;\r\n    return DeviceUtil;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('utils/Events', [], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory();\r\n    } else {\r\n        factory();\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function () {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * @constructor\r\n     */\r\n    var Events = function () {\r\n        var events;\r\n        var once;\r\n\r\n        /**\r\n         * @param {string} [eventName]\r\n         */\r\n        this.flush = function (eventName) {\r\n            if (eventName !== undefined) {\r\n                if (events[eventName] !== undefined) {\r\n                    events[eventName] = new Array();\r\n                }\r\n                if (once[eventName] !== undefined) {\r\n                    once[eventName] = new Array();\r\n                }\r\n            } else {\r\n                once = new Array();\r\n                events = new Array();\r\n            }\r\n        };\r\n\r\n        this.flush();\r\n\r\n        /**\r\n         * @param {string} eventName\r\n         * @param {function} callback\r\n         */\r\n        this.on = function (eventName, callback) {\r\n            if (events[eventName] !== undefined) {\r\n                var stack = events[eventName];\r\n                if (stack.indexOf(callback) === -1) {\r\n                    stack.push(callback);\r\n                }\r\n            } else {\r\n                events[eventName] = new Array();\r\n                events[eventName].push(callback)\r\n            }\r\n        };\r\n\r\n        /**\r\n         * @param {string} eventName\r\n         * @param {function} callback\r\n         */\r\n        this.once = function (eventName, callback) {\r\n            if (once[eventName] !== undefined) {\r\n                var stack = once[eventName];\r\n                if (stack.indexOf(callback) === -1) {\r\n                    stack.push(callback);\r\n                }\r\n            } else {\r\n                once[eventName] = new Array();\r\n                once[eventName].push(callback)\r\n            }\r\n        };\r\n\r\n        /**\r\n         * @param {string} eventName\r\n         * @param {function} callback\r\n         */\r\n        this.off = function (eventName, callback) {\r\n            if (once[eventName] !== undefined) {\r\n                var stack = events[eventName];\r\n                if (stack.indexOf(callback) !== -1) {\r\n                    stack.splice(stack.indexOf(callback));\r\n                }\r\n            }\r\n        };\r\n\r\n        /**\r\n         * @param {string} eventName\r\n         * @param {Object} [data]\r\n         */\r\n        this.trigger = function (eventName, data) {\r\n            var stack, i;\r\n\r\n            if (events[eventName] !== undefined) {\r\n                stack = events[eventName];\r\n                for (i = 0; i < stack.length; i++) {\r\n                    stack[i].call(stack[i], data);\r\n                }\r\n            }\r\n\r\n            if (once[eventName] !== undefined) {\r\n                stack = once[eventName];\r\n                for (i = 0; i < stack.length; i++) {\r\n                    stack[i].call(stack[i], data);\r\n                }\r\n                this.flush(eventName);\r\n            }\r\n        };\r\n    };\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.Events = Events;\r\n    if (global.j2d === undefined) global.j2d.utils.Events = Events;\r\n    return Events;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('utils/MathUtil', [], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory();\r\n    } else {\r\n        factory();\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function () {\r\n    \"use strict\";\r\n\r\n    /**\r\n     *\r\n     */\r\n    var MathUtil = function () {\r\n    };\r\n\r\n    /**\r\n     * @param {number} number\r\n     * @returns {number}\r\n     */\r\n    MathUtil.number2Integer = function (number) {\r\n        return number >> 0;\r\n    };\r\n\r\n    /**\r\n     * @param {number} number\r\n     * @returns {boolean}\r\n     */\r\n    MathUtil.isInteger = function (number) {\r\n        return typeof number === \"number\" && isFinite(number)\r\n            && number > -9007199254740992 && number < 9007199254740992\r\n            && Math.floor(number) === number;\r\n    };\r\n\r\n    /**\r\n     * @param {number} min\r\n     * @param {number} max\r\n     * @param {number} opacity\r\n     * @returns {string}\r\n     */\r\n    MathUtil.randomColor = function (min, max, opacity) {\r\n        return 'rgba('\r\n            + MathUtil.random(min, max) + ', '\r\n            + MathUtil.random(min, max) + ', '\r\n            + MathUtil.random(min, max) + ', '\r\n            + opacity + ')';\r\n    };\r\n\r\n    /**\r\n     * @param {number} min\r\n     * @param {number} max\r\n     * @param {boolean} [omitZero]\r\n     * @returns {number}\r\n     */\r\n    MathUtil.random = function (min, max, omitZero) {\r\n        var random = (Math.floor(Math.random() * (max - min + 1) + min));\r\n        return (omitZero && random == 0)\r\n            ? MathUtil.random(min, max, omitZero)\r\n            : random;\r\n    };\r\n\r\n    /**\r\n     * @param {number} degree\r\n     * @returns {number}\r\n     */\r\n    MathUtil.degree2Radian = function (degree) {\r\n        return degree * (Math.PI / 180);\r\n    };\r\n\r\n    /**\r\n     * @param {number} radian\r\n     * @returns {number}\r\n     */\r\n    MathUtil.radian2Degree = function (radian) {\r\n        return radian * (180 / Math.PI);\r\n    };\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.MathUtil = MathUtil;\r\n    if (global.j2d === undefined) global.j2d.utils.MathUtil = MathUtil;\r\n    return MathUtil\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('utils/UUID', [], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory();\r\n    } else {\r\n        factory();\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function () {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * Class for generate uuid\r\n     */\r\n    var UUID = function () {\r\n\r\n    };\r\n\r\n    UUID.generate = function () {\r\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n            var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\r\n            return v.toString(16);\r\n        });\r\n    };\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.UUID = UUID;\r\n    if (global.j2d === undefined) global.j2d.utils.UUID = UUID;\r\n    return UUID;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('utils/Vector2d', [], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory();\r\n    } else {\r\n        factory();\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function () {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * @constructor\r\n     * @param {number} x\r\n     * @param {number} y\r\n     */\r\n    var Vector2d = function (x, y) {\r\n        this.x = x;\r\n        this.y = y;\r\n    };\r\n\r\n    /**\r\n     * @returns {number}\r\n     */\r\n    Vector2d.prototype.getX = function () {\r\n        return this.x;\r\n    };\r\n\r\n    /**\r\n     * @returns {number}\r\n     */\r\n    Vector2d.prototype.getY = function () {\r\n        return this.y;\r\n    };\r\n\r\n    /**\r\n     * @returns {{x: number, y: number}}\r\n     */\r\n    Vector2d.prototype.getVector = function () {\r\n        return {x: this.x, y: this.y};\r\n    };\r\n\r\n    /**\r\n     * @returns {Array.<number>}\r\n     */\r\n    Vector2d.prototype.toArray = function () {\r\n        return [this.x, this.y];\r\n    };\r\n\r\n    /**\r\n     * @param {Array.<number>} array\r\n     * @returns {Vector2d}\r\n     */\r\n    Vector2d.prototype.fromArray = function (array) {\r\n        this.x = array[0];\r\n        this.y = array[1];\r\n\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @returns {string}\r\n     */\r\n    Vector2d.prototype.toString = function () {\r\n        return \"(\" + this.x + \",\" + this.y + \")\";\r\n    };\r\n\r\n    /**\r\n     * @param {Vector2d} vector1\r\n     * @param {Vector2d} vector2\r\n     * @returns {number}\r\n     */\r\n    Vector2d.getDistance = function (vector1, vector2) {\r\n        return Math.sqrt(\r\n            Math.pow(vector2.getVector().x - vector1.getVector().x, 2) +\r\n            Math.pow(vector2.getVector().y - vector1.getVector().y, 2)\r\n        );\r\n    };\r\n\r\n    /**\r\n     * @param {Vector2d} vector1\r\n     * @param {Vector2d} vector2\r\n     * @returns {number}\r\n     */\r\n    Vector2d.getAngle = function (vector1, vector2) {\r\n        return Math.atan2(\r\n                vector2.getVector().y - vector1.getVector().y,\r\n                vector2.getVector().x - vector1.getVector().x\r\n            ) * (180 / Math.PI);\r\n    };\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.Vector2d = Vector2d;\r\n    if (global.j2d === undefined) global.j2d.utils.Vector2d = Vector2d;\r\n    return Vector2d\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('utils/Vector2dInteger', ['utils/Vector2d'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(require('utils/Vector2d'));\r\n    } else {\r\n        factory(root.j2d.utils.Vector2d);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function (Vector2d) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * @param {number} x\r\n     * @param {number} y\r\n     */\r\n    var Vector2dInteger = function (x, y) {\r\n        Vector2d.call(this, x >> 0, y >> 0);\r\n    };\r\n\r\n    Vector2dInteger.prototype = Object.create(Vector2d.prototype);\r\n    Vector2dInteger.prototype.constructor = Vector2dInteger;\r\n\r\n    /**\r\n     * @param {Array.<number>} array\r\n     * @returns {Vector2d|Vector2dInteger}\r\n     */\r\n    Vector2dInteger.prototype.fromArray = function (array) {\r\n        this.x = array[0] >> 0;\r\n        this.y = array[1] >> 0;\r\n\r\n        return this;\r\n    };\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.Vector2dInteger = Vector2dInteger;\r\n    if (global.j2d === undefined) global.j2d.utils.Vector2dInteger = Vector2dInteger;\r\n    return Vector2dInteger;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('io/InputManager', ['jquery', 'utils/ArrayMap', 'utils/Vector2d'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(require('jquery'), require('utils/ArrayMap'), require('utils/Vector2d'));\r\n    } else {\r\n        factory(root.jQuery, root.j2d.utils.ArrayMap, root.j2d.utils.Vector2d);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function ($, ArrayMap, Vector2d) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * @param {J2D} j2d\r\n     * @constructor\r\n     */\r\n    var InputManager = function (j2d) {\r\n        this.j2d = j2d;\r\n\r\n        /** @type string */\r\n        this.id = j2d.data.id;\r\n\r\n        /** @type Element|jQuery */\r\n        this.element = j2d.element;\r\n\r\n        this.data = {\r\n            mouse: {\r\n                startPosition: {\r\n                    x: 0,\r\n                    y: 0\r\n                },\r\n                currentPosition: {\r\n                    x: 0,\r\n                    y: 0\r\n                },\r\n                previousDistance: 0,\r\n                distance: 0\r\n            },\r\n            viewport: {\r\n                position: {\r\n                    x: 0,\r\n                    y: 0\r\n                }\r\n            },\r\n            enabled: false,\r\n            enableAdditionalData: false,\r\n            keysPressed: new ArrayMap(),\r\n            writeMode: false,\r\n            timePressed: 0,\r\n            preventAll: false,\r\n\r\n            cursor: {\r\n                enabled: false,\r\n                image: 'auto'\r\n            }\r\n        };\r\n\r\n        this.keyMap = {\r\n            //DEBUG_INFO: [[InputManager.key.KEY_CTRL, InputManager.key.KEY_F1], 'j2d.debug.toggleScreen', {}],\r\n            FULLSCREEN: [[InputManager.key.KEY_CTRL, InputManager.key.KEY_F11], 'j2d.scene.toggleFullScreen', {}]\r\n        };\r\n    };\r\n\r\n    /**\r\n     * @param e\r\n     * @param {boolean} [enableCallback]\r\n     * @returns {boolean}\r\n     */\r\n    var checkKeyMap = function (e, enableCallback) {\r\n        if (enableCallback === undefined) enableCallback = true;\r\n\r\n        var j2d = e.data.manager.j2d,\r\n            manager = e.data.manager,\r\n            keyCode = e.which,\r\n            keyMap = e.data.manager.keyMap;\r\n\r\n        for (var index in keyMap) {\r\n            if (keyMap.hasOwnProperty(index)) {\r\n                var value = keyMap[index];\r\n                if (!$.isArray(value[0]) && value[0] === keyCode && !!value[1]) {\r\n                    if (typeof value[1] === 'string') {\r\n                        value[1] = eval('(' + value[1] + ')');\r\n                    }\r\n                    if ((typeof value[1] === 'function') && enableCallback) {\r\n                        value[1](j2d, value[2]);\r\n                    }\r\n                    return true;\r\n                } else if ($.isArray(value[0])\r\n                    && manager.data.keysPressed.equals(value[0]) && !!value[1]\r\n                ) {\r\n                    if (typeof value[1] === 'string') {\r\n                        value[1] = eval('(' + value[1] + ')');\r\n                    }\r\n                    if (typeof value[1] === 'function' && enableCallback) {\r\n                        value[1](j2d, value[2]);\r\n                    }\r\n                    return true\r\n                }\r\n            }\r\n        }\r\n        return false\r\n    };\r\n    var events = {\r\n        onMouseClick: function (e) {\r\n            var manager = e.data.manager;\r\n            if (!manager.data.enabled || !manager.j2d.isPlay || !manager.j2d.element.hasClass('active')) return true;\r\n            var keysPressed = manager.data.keysPressed;\r\n            var keyCode = getKey(InputManager.key, e.which) || 'KEY_UNKNOWN_' + e.which;\r\n            var mouse = manager.data.mouse;\r\n\r\n            if (e.data.event !== 2) {\r\n                if (e.data.event === 0) {\r\n                    if (-1 === $.inArray(InputManager.key[keyCode], keysPressed)) {\r\n                        keysPressed.push(InputManager.key[keyCode]);\r\n\r\n                        if (manager.data.enableAdditionalData) {\r\n                            mouse.startPosition.x = e.pageX;\r\n                            mouse.startPosition.y = e.pageY;\r\n                            mouse.distance = 0;\r\n\r\n                            manager.data.timePressed = e.timeStamp;\r\n                        }\r\n                    }\r\n                    if (checkKeyMap(e, false) || manager.data.preventAll) {\r\n                        e.preventDefault();\r\n                    }\r\n                } else {\r\n                    if (checkKeyMap(e) || manager.data.preventAll) {\r\n                        e.preventDefault();\r\n                    }\r\n                    if (manager.data.enableAdditionalData) {\r\n                        mouse.previousDistance = mouse.distance;\r\n                        mouse.startPosition.x = 0;\r\n                        mouse.startPosition.y = 0;\r\n                    }\r\n\r\n                    keysPressed.splice(\r\n                        keysPressed.indexOf(InputManager.key[keyCode]), 1\r\n                    );\r\n                }\r\n                manager.element.trigger(e.data.event === 0 ?\r\n                    'mouseKeyDown' : 'mouseKeyUp', {keyCode: keyCode}\r\n                );\r\n            } else {\r\n                if (checkKeyMap(e, false)) {\r\n                    e.preventDefault();\r\n                }\r\n            }\r\n        },\r\n\r\n        onMouseWheel: function (e) {\r\n            var manager = e.data.manager;\r\n            if (!manager.data.enabled || !manager.j2d.isPlay || !manager.j2d.element.hasClass('active')) return true;\r\n            var keysPressed = manager.data.keysPressed;\r\n            var keyCode = (e.originalEvent.wheelDelta / 120 > 0) ?\r\n                getKey(InputManager.key, 4) : getKey(InputManager.key, 5);\r\n\r\n            e.which = (e.originalEvent.wheelDelta / 120 > 0) ? 4 : 5;\r\n\r\n            if (-1 === $.inArray(InputManager.key[keyCode], keysPressed)) {\r\n                keysPressed.push(InputManager.key[keyCode]);\r\n            }\r\n\r\n            if (checkKeyMap(e) || manager.data.preventAll) {\r\n                e.preventDefault();\r\n                manager.fixMouseWheel();\r\n            }\r\n\r\n            manager.element.trigger('mouseWheel', {keyCode: keyCode});\r\n        },\r\n\r\n        mouseWheelCancel: function (keysPressed, keyCode) {\r\n            keysPressed.splice(\r\n                keysPressed.indexOf(InputManager.key[keyCode]), 1\r\n            );\r\n        },\r\n\r\n        onMouseMove: function (e) {\r\n            var manager = e.data.manager;\r\n            var mouse = e.data.manager.data.mouse;\r\n\r\n            manager.data.mouse.currentPosition.x = e.pageX;\r\n            manager.data.mouse.currentPosition.y = e.pageY;\r\n\r\n            if (e.data.manager.data.enableAdditionalData) {\r\n                mouse.distance = Math.sqrt(\r\n                    Math.pow((mouse.currentPosition.x - mouse.startPosition.x), 2)\r\n                    + Math.pow((mouse.currentPosition.y - mouse.startPosition.y), 2)\r\n                ).toFixed(1);\r\n            }\r\n        },\r\n\r\n        onKeyboardPress: function (e) {\r\n            var manager = e.data.manager;\r\n            if (!manager.data.enabled || !manager.j2d.isPlay || !manager.element.hasClass('active')) return true;\r\n            var keysPressed = manager.data.keysPressed;\r\n            var keyCode = getKey(InputManager.key, e.which) || 'KEY_UNKNOWN_' + e.which;\r\n            if (e.data.event === 2 && true === manager.data.writeMode) {\r\n                var char = String.fromCharCode(e.which || e.keyCode);\r\n                e.preventDefault();\r\n                manager.element.focus().trigger('keyboardCharPress', {\r\n                    key: e.which || e.keyCode,\r\n                    keyCode: keyCode,\r\n                    char: char\r\n                });\r\n            }\r\n\r\n            if (e.data.event !== 2 && false === manager.data.writeMode) {\r\n                if (e.data.event === 0) {\r\n                    if (-1 === $.inArray(InputManager.key[keyCode], keysPressed)) {\r\n                        keysPressed.push(InputManager.key[keyCode]);\r\n                        if (manager.data.enableAdditionalData) {\r\n                            manager.data.timePressed = e.timeStamp;\r\n                        }\r\n                    }\r\n                    if (checkKeyMap(e, false) || manager.data.preventAll) {\r\n                        e.preventDefault();\r\n                    }\r\n                } else {\r\n                    if (checkKeyMap(e) || manager.data.preventAll) {\r\n                        e.preventDefault();\r\n                    }\r\n\r\n                    keysPressed.splice(\r\n                        keysPressed.indexOf(InputManager.key[keyCode]), 1\r\n                    );\r\n                }\r\n\r\n                manager.element.trigger(e.data.event === 0 ?\r\n                    'keyboardKeyDown' : 'keyboardKeyUp', {keyCode: keyCode, key: e.which || e.keyCode}\r\n                );\r\n            }\r\n\r\n            if (e.data.event !== 2 && true === manager.data.writeMode) {\r\n                manager.element.trigger(e.data.event === 0 ?\r\n                    'keyboardKeyDown' : 'keyboardKeyUp', {keyCode: keyCode, key: e.which || e.keyCode}\r\n                );\r\n            }\r\n        },\r\n\r\n        onTouchTap: function (e) {\r\n            var manager = e.data.manager;\r\n            if (!manager.data.enabled || !manager.j2d.isPlay || !manager.j2d.element.hasClass('active')) return true;\r\n            var keysPressed = manager.data.keysPressed;\r\n            var keyCode = getKey(InputManager.key, e.which + 1) || 'KEY_UNKNOWN_' + e.which;\r\n            var touch = e.originalEvent.touches[0] || e.originalEvent.changedTouches[0];\r\n            var mouse = manager.data.mouse;\r\n\r\n            if (e.data.event === 0) {\r\n                if (-1 === $.inArray(InputManager.key[keyCode], keysPressed)) {\r\n                    keysPressed.push(InputManager.key[keyCode]);\r\n                    if (manager.data.enableAdditionalData) {\r\n                        mouse.startPosition.x = touch.pageX;\r\n                        mouse.startPosition.y = touch.pageY;\r\n                        mouse.distance = 0;\r\n\r\n                        manager.data.timePressed = e.timeStamp;\r\n                    }\r\n                }\r\n                if (checkKeyMap(e, false) || manager.data.preventAll) {\r\n                    e.preventDefault();\r\n                }\r\n            } else {\r\n                if (checkKeyMap(e) || manager.data.preventAll) {\r\n                    e.preventDefault();\r\n                }\r\n\r\n                if (manager.data.enableAdditionalData) {\r\n                    mouse.previousDistance = mouse.distance;\r\n                    mouse.startPosition.x = 0;\r\n                    mouse.startPosition.y = 0;\r\n                }\r\n\r\n                keysPressed.splice(\r\n                    keysPressed.indexOf(InputManager.key[keyCode]), 1\r\n                );\r\n            }\r\n\r\n            manager.element.trigger(e.data.event === 0 ?\r\n                'mouseKeyDown' : 'mouseKeyUp', {keyCode: keyCode}\r\n            );\r\n        },\r\n\r\n        onTouchMove: function (e) {\r\n            var touch = e.originalEvent.touches[0] || e.originalEvent.changedTouches[0];\r\n            var mouse = e.data.manager.data.mouse;\r\n\r\n            mouse.currentPosition.x = touch.pageX.toFixed(0);\r\n            mouse.currentPosition.y = touch.pageY.toFixed(0);\r\n\r\n            if (e.data.manager.data.enableAdditionalData) {\r\n                mouse.distance = Math.sqrt(\r\n                    Math.pow((mouse.currentPosition.x - mouse.startPosition.x), 2)\r\n                    + Math.pow((mouse.currentPosition.y - mouse.startPosition.y), 2)\r\n                ).toFixed(1);\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * @param {InputManager} manager\r\n     */\r\n    var bindEvents = function (manager) {\r\n        var selector = '[guid=' + manager.id + ']';\r\n\r\n        $(document).on('contextmenu', selector, {manager: manager, event: 2}, events.onMouseClick);\r\n        $(document).on('mousedown', selector, {manager: manager, event: 0}, events.onMouseClick);\r\n        $(document).on('mouseup', selector, {manager: manager, event: 1}, events.onMouseClick);\r\n        $(document).on('mousewheel', selector, {manager: manager}, events.onMouseWheel);\r\n        $(document).on('mousemove', selector, {manager: manager}, events.onMouseMove);\r\n\r\n        $(document).on('keydown', null, {manager: manager, event: 0}, events.onKeyboardPress);\r\n        $(document).on('keyup', null, {manager: manager, event: 1}, events.onKeyboardPress);\r\n        $(document).on('keypress', null, {manager: manager, event: 2}, events.onKeyboardPress);\r\n\r\n        $(document).on('touchstart', selector, {manager: manager, event: 0}, events.onTouchTap);\r\n        $(document).on('touchend', selector, {manager: manager, event: 1}, events.onTouchTap);\r\n        $(document).on('touchmove ', selector, {manager: manager}, events.onTouchMove);\r\n    };\r\n\r\n    /**\r\n     * @param {InputManager} manager\r\n     */\r\n    var unbindEvents = function (manager) {\r\n        var selector = '[guid=' + manager.id + ']';\r\n\r\n        $(document).off('contextmenu', selector, {manager: manager, event: 1}, events.onMouseClick);\r\n        $(document).off('mousedown', selector, {manager: manager, event: 0}, events.onMouseClick);\r\n        $(document).off('mouseup', selector, {manager: manager, event: 1}, events.onMouseClick);\r\n        $(document).off('mousewheel', selector, {manager: manager}, events.onMouseWheel);\r\n        $(document).off('mousemove', selector, {manager: manager}, events.onMouseMove);\r\n\r\n        $(document).off('keydown', null, {manager: manager, event: 0}, events.onKeyboardPress);\r\n        $(document).off('keyup', null, {manager: manager, event: 1}, events.onKeyboardPress);\r\n        $(document).off('keypress', null, {manager: manager, event: 2}, events.onKeyboardPress);\r\n\r\n        $(document).off('touchstart', selector, {manager: manager, event: 0}, events.onTouchTap);\r\n        $(document).off('touchend', selector, {manager: manager, event: 1}, events.onTouchTap);\r\n        $(document).off('touchmove ', selector, {manager: manager}, events.onTouchMove);\r\n    };\r\n\r\n    /**\r\n     * @returns {InputManager}\r\n     */\r\n    InputManager.prototype.init = function () {\r\n        if (!this.data.enabled && global.j2dPlugin.pluginInit) {\r\n            bindEvents(this);\r\n\r\n            this.data.enabled = true;\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @returns {boolean}\r\n     */\r\n    InputManager.prototype.update = function () {\r\n        if (!this.data.enabled) return false;\r\n\r\n        var dX = this.j2d.scene.canvas.offsetWidth / this.j2d.scene.data.width,\r\n            dY = this.j2d.scene.canvas.offsetHeight / this.j2d.scene.data.height,\r\n            x = this.data.mouse.currentPosition.x / dX,\r\n            y = this.data.mouse.currentPosition.y / dY;\r\n\r\n        var offset = this.element.offset();\r\n\r\n        this.data.viewport.x = this.j2d.scene.viewport.x + x - offset.left;\r\n        this.data.viewport.y = this.j2d.scene.viewport.y + y - offset.top;\r\n        return true;\r\n    };\r\n\r\n    /**\r\n     * @returns {InputManager}\r\n     */\r\n    InputManager.prototype.flush = function () {\r\n        this.data.keysPressed.length = 0;\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @returns {InputManager}\r\n     */\r\n    InputManager.prototype.clear = function () {\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @returns {InputManager}\r\n     */\r\n    InputManager.prototype.fixMouseWheel = function () {\r\n        var keyPressed = this.data.keysPressed;\r\n        if (-1 !== $.inArray(InputManager.key.SCROLL_MOUSE_UP, keyPressed)) {\r\n            events.mouseWheelCancel(keyPressed, InputManager.key.SCROLL_MOUSE_UP);\r\n        } else if (-1 !== $.inArray(InputManager.key.SCROLL_MOUSE_DOWN, keyPressed)) {\r\n            events.mouseWheelCancel(keyPressed, InputManager.key.SCROLL_MOUSE_DOWN);\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @returns {InputManager}\r\n     */\r\n    InputManager.prototype.enable = function () {\r\n        if (!this.data.enabled) {\r\n            //bindEvents(this);\r\n            this.data.enabled = false;\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @returns {InputManager}\r\n     */\r\n    InputManager.prototype.disable = function () {\r\n        if (this.data.enabled) {\r\n            //unbindEvents(this);\r\n            this.data.enabled = false;\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @param {string} newKeyMap\r\n     * @returns {string}\r\n     */\r\n    InputManager.prototype.load = function (newKeyMap) {\r\n        var oldKeyMap = JSON.stringify(this.keyMap);\r\n        this.keyMap = JSON.parse(newKeyMap);\r\n        return oldKeyMap;\r\n    };\r\n\r\n    /**\r\n     * @returns {string}\r\n     */\r\n    InputManager.prototype.save = function () {\r\n        return JSON.stringify(this.keyMap);\r\n    };\r\n\r\n    /**\r\n     * KeyMap Manager\r\n     *\r\n     * @param mapObject\r\n     * @returns {InputManager}\r\n     */\r\n    InputManager.prototype.setKeys = function (mapObject) {\r\n        this.keyMap = $.extend(true, {}, this.keyMap, mapObject);\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @param {InputManager} manager\r\n     * @param {Array.<number>|number[]} keyList\r\n     * @returns {{keyList:, time:number}|boolean}\r\n     */\r\n    var getPressData = function (manager, keyList) {\r\n        if (!manager.data.enableAdditionalData) return true;\r\n        return {\r\n            keyList: keyList,\r\n            time: Date.now() - manager.data.timePressed\r\n        };\r\n    };\r\n\r\n    /**\r\n     * @returns {{current: number, previous: number}}\r\n     */\r\n    InputManager.prototype.getMouseMoveDistance = function () {\r\n        if (!this.data.enableAdditionalData) return 0;\r\n        return {current: this.data.mouse.distance, previous: this.data.mouse.previousDistance};\r\n    };\r\n\r\n    /* +Input Checkers **/\r\n    /**\r\n     * @param {Array.<number>|number[]|number} keyList\r\n     * @returns {boolean}\r\n     */\r\n    InputManager.prototype.checkPressedKeyList = function (keyList) {\r\n        if ($.isArray(keyList)) {\r\n            if (keyList.length !== this.data.keysPressed.length) {\r\n                return false;\r\n            } else if (this.data.keysPressed.equals(keyList)) {\r\n                this.fixMouseWheel();\r\n                return getPressData(this, keyList);\r\n            }\r\n            this.fixMouseWheel();\r\n            return false;\r\n        }\r\n        //if (!this.data.keysPressed.equals([])) console.log(this.data.keysPressed);\r\n        if (isNaN(keyList)) return false;\r\n        if (-1 !== this.data.keysPressed.indexOf(keyList)) {\r\n            this.fixMouseWheel();\r\n            return getPressData(this, keyList);\r\n        }\r\n        this.fixMouseWheel();\r\n        return false;\r\n    };\r\n\r\n    /**\r\n     * @param {string} key\r\n     * @returns {boolean}\r\n     */\r\n    InputManager.prototype.checkPressedKeyMap = function (key) {\r\n        if (this.keyMap[key] === undefined) return false;\r\n        var keyList = this.keyMap[key][0];\r\n\r\n        return this.checkPressedKeyList(keyList);\r\n    };\r\n\r\n    InputManager.prototype.getPosition = function () {\r\n        return new Vector2d(this.data.viewport.x + 0.5, this.data.viewport.y + 0.3);\r\n    };\r\n\r\n    //InputManager.prototype.onNode = function (id) {\r\n    //    if (!id.layer.visible) return false;\r\n    //    return (this.data.viewport.x > id.options.position.x && this.data.viewport.x < id.options.position.x + id.options.size.x) &&\r\n    //        (this.data.viewport.y > id.options.position.y && this.data.viewport.y < id.options.position.y + id.options.size.y);\r\n    //};\r\n    /* -Input Checkers **/\r\n\r\n    /* +Input Write Mode **/\r\n    /**\r\n     * @param {boolean} mode\r\n     * @returns {InputManager}\r\n     */\r\n    InputManager.prototype.setWriteMode = function (mode) {\r\n        this.data.writeMode = !!mode;\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @returns {boolean}\r\n     */\r\n    InputManager.prototype.isWriteMode = function () {\r\n        return !!this.data.writeMode;\r\n    };\r\n    /* -Input Write Mode **/\r\n\r\n    /**\r\n     * @param {string} image\r\n     * @returns {InputManager}\r\n     */\r\n    InputManager.prototype.setCursorImage = function (image) {\r\n        this.data.cursor.image = 'url(\"' + image + '\"), auto';\r\n        $(this.element).css('cursor', this.data.cursor.image);\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @param {boolean} enable\r\n     * @returns {InputManager}\r\n     */\r\n    InputManager.prototype.toggleCursor = function (enable) {\r\n        if (enable !== undefined) {\r\n            this.data.cursor.enable = !!enable;\r\n        } else {\r\n            this.data.cursor.enable = !this.data.cursor.enable;\r\n        }\r\n\r\n        if (!this.data.cursor.enable) {\r\n            this.data.cursor.image = $(this.j2d.element).css('cursor');\r\n            $(this.element).css('cursor', 'none');\r\n        } else {\r\n            $(this.element).css('cursor', this.data.cursor.image);\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @returns {boolean}\r\n     */\r\n    InputManager.prototype.isCursorVisible = function () {\r\n        return !!this.data.cursor.enable;\r\n    };\r\n    /** -Cursor **/\r\n\r\n    /** static keys arrayList **/\r\n    InputManager.key = {\r\n        KEY_MOUSE_LEFT: 1,\r\n        KEY_MOUSE_MIDDLE: 2,\r\n        KEY_MOUSE_RIGHT: 3,\r\n\r\n        SCROLL_MOUSE_UP: 4,\r\n        SCROLL_MOUSE_DOWN: 5,\r\n\r\n        KEY_BACKSPACE: 8,\r\n        KEY_TAB: 9,\r\n        KEY_ENTER: 13,\r\n        KEY_SHIFT: 16,\r\n        KEY_CTRL: 17,\r\n        KEY_ALT: 18,\r\n        KEY_PAUSE: 19,\r\n        KEY_BREAK: 19,\r\n        KEY_CAPS_LOCK: 20,\r\n        KEY_ESCAPE: 27,\r\n        KEY_SPACE_BAR: 32,\r\n        KEY_PAGE_UP: 33,\r\n        KEY_PAGE_DOWN: 34,\r\n        KEY_END: 35,\r\n        KEY_HOME: 36,\r\n        KEY_LEFT_ARROW: 37,\r\n        KEY_UP_ARROW: 38,\r\n        KEY_RIGHT_ARROW: 39,\r\n        KEY_DOWN_ARROW: 40,\r\n        KEY_INSERT: 45,\r\n        KEY_DELETE: 46,\r\n        KEY_0: 48,\r\n        KEY_1: 49,\r\n        KEY_2: 50,\r\n        KEY_3: 51,\r\n        KEY_4: 52,\r\n        KEY_5: 53,\r\n        KEY_6: 54,\r\n        KEY_7: 55,\r\n        KEY_8: 56,\r\n        KEY_9: 57,\r\n        KEY_A: 65,\r\n        KEY_B: 66,\r\n        KEY_C: 67,\r\n        KEY_D: 68,\r\n        KEY_E: 69,\r\n        KEY_F: 70,\r\n        KEY_G: 71,\r\n        KEY_H: 72,\r\n        KEY_I: 73,\r\n        KEY_J: 74,\r\n        KEY_K: 75,\r\n        KEY_L: 76,\r\n        KEY_M: 77,\r\n        KEY_N: 78,\r\n        KEY_O: 79,\r\n        KEY_P: 80,\r\n        KEY_Q: 81,\r\n        KEY_R: 82,\r\n        KEY_S: 83,\r\n        KEY_T: 84,\r\n        KEY_U: 85,\r\n        KEY_V: 86,\r\n        KEY_W: 87,\r\n        KEY_X: 88,\r\n        KEY_Y: 89,\r\n        KEY_Z: 90,\r\n        KEY_LEFT_WINDOW_KEY: 91,\r\n        KEY_RIGHT_WINDOW_KEY: 92,\r\n        KEY_SELECT_KEY: 93,\r\n        KEY_NUMPAD_0: 96,\r\n        KEY_NUMPAD_1: 97,\r\n        KEY_NUMPAD_2: 98,\r\n        KEY_NUMPAD_3: 99,\r\n        KEY_NUMPAD_4: 100,\r\n        KEY_NUMPAD_5: 101,\r\n        KEY_NUMPAD_6: 102,\r\n        KEY_NUMPAD_7: 103,\r\n        KEY_NUMPAD_8: 104,\r\n        KEY_NUMPAD_9: 105,\r\n        KEY_MULTIPLY: 106,\r\n        KEY_ADD: 107,\r\n        KEY_SUBTRACT: 109,\r\n        KEY_DECIMAL_POINT: 110,\r\n        KEY_DIVIDE: 111,\r\n        KEY_F1: 112,\r\n        KEY_F2: 113,\r\n        KEY_F3: 114,\r\n        KEY_F4: 115,\r\n        KEY_F5: 116,\r\n        KEY_F6: 117,\r\n        KEY_F7: 118,\r\n        KEY_F8: 119,\r\n        KEY_F9: 120,\r\n        KEY_F10: 121,\r\n        KEY_F11: 122,\r\n        KEY_F12: 123,\r\n        KEY_NUM_LOCK: 144,\r\n        KEY_SCROLL_LOCK: 145,\r\n        KEY_SEMI_COLON: 186,\r\n        KEY_EQUAL_SIGN: 187,\r\n        KEY_COMMA: 188,\r\n        KEY_DASH: 189,\r\n        KEY_PERIOD: 190,\r\n        KEY_FORWARD_SLASH: 191,\r\n        KEY_GRAVE_ACCENT: 192,\r\n        KEY_OPEN_BRACKET: 219,\r\n        KEY_BACK_SLASH: 220,\r\n        KEY_CLOSE_BRACKET: 221,\r\n        KEY_SINGLE_QUOTE: 222,\r\n        KEY_LEFT_COMMAND: 224,\r\n        KEY_RIGHT_COMMAND: 224\r\n    };\r\n\r\n    /**\r\n     * @param {Object} object\r\n     * @param {number} value\r\n     * @returns {T}\r\n     */\r\n    function getKey(object, value) {\r\n        return Object.keys(object).filter(function (key) {\r\n            return object[key] === value\r\n        })[0];\r\n    }\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.InputManager = InputManager;\r\n    if (global.j2d === undefined) global.j2d.io.InputManager = InputManager;\r\n    return InputManager;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, James Simpson of GoldFire Studios(howler.js)\r\n * @original_source https://github.com/goldfire/howler.js/blob/master/howler.js\r\n * @license BSD, MIT(howler.js)\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('io/MediaManager', [\r\n            'jquery',\r\n            'utils/ArrayMap',\r\n            'utils/Events',\r\n            'media/Audio',\r\n            'media/Sound'\r\n        ], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(\r\n            require('jquery'),\r\n            require('utils/ArrayMap'),\r\n            require('utils/Events'),\r\n            require('media/Audio'),\r\n            require('media/Sound')\r\n        );\r\n    } else {\r\n        factory(\r\n            root.jQuery,\r\n            root.j2d.utils.ArrayMap,\r\n            root.j2d.utils.Events,\r\n            root.j2d.media.Audio,\r\n            root.j2d.media.Sound\r\n        );\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function ($, ArrayMap, Events, Audio, Sound) {\r\n    \"use strict\";\r\n\r\n    var AudioNode = global.Audio;\r\n    var audioContext = false;\r\n    var html5Audio = false;\r\n\r\n    try {\r\n        //noinspection JSUnresolvedVariable\r\n        var AudioContext = global.AudioContext || global.webkitAudioContext;\r\n        audioContext = new AudioContext();\r\n    } catch (e) {\r\n        console.warn('Web Audio API is not supported in your browser');\r\n    }\r\n\r\n    try {\r\n        //noinspection JSUnresolvedFunction\r\n        html5Audio = !!new AudioNode();\r\n    } catch (e) {\r\n        console.warn('HTML5 Audio is not supported in your browser');\r\n    }\r\n\r\n    if (audioContext) {\r\n        var masterGain = (audioContext.createGain === undefined)\r\n            ? audioContext.createGainNode()\r\n            : audioContext.createGain();\r\n        masterGain.gain.value = 1;\r\n        masterGain.connect(audioContext.destination);\r\n    }\r\n\r\n    /* MediaManager */\r\n\r\n    /**\r\n     * @param {J2D} j2d\r\n     * @param {MediaManager.defaults|Object|undefined} [data]\r\n     * @constructor\r\n     */\r\n    var MediaManager = function (j2d, data) {\r\n        if (data === undefined) data = {};\r\n        var soundManager = this;\r\n        this.j2d = j2d;\r\n        this.data = $.extend(true, {}, MediaManager.defaults, data);\r\n        this.events = new Events();\r\n        this.media = new ArrayMap();\r\n\r\n        this.media.add('sounds', new ArrayMap());\r\n        this.media.add('audios', new ArrayMap());\r\n        this.media.add('videos', new ArrayMap());\r\n\r\n        this.volume = this.data.volume * 100;\r\n        this.iOSEnabled = false;\r\n\r\n        if (audioContext || html5Audio) {\r\n            var test = new AudioNode();\r\n            this.data.codecs = {\r\n                mp3: !!test.canPlayType('audio/mpeg;').replace(/^no$/, ''),\r\n                opus: !!test.canPlayType('audio/ogg; codecs=\"opus\"').replace(/^no$/, ''),\r\n                ogg: !!test.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, ''),\r\n                wav: !!test.canPlayType('audio/wav; codecs=\"1\"').replace(/^no$/, ''),\r\n                aac: !!test.canPlayType('audio/aac;').replace(/^no$/, ''),\r\n                m4a: !!(test.canPlayType('audio/x-m4a;') || test.canPlayType('audio/m4a;') || test.canPlayType('audio/aac;')).replace(/^no$/, ''),\r\n                mp4: !!(test.canPlayType('audio/x-mp4;') || test.canPlayType('audio/mp4;') || test.canPlayType('audio/aac;')).replace(/^no$/, ''),\r\n                weba: !!test.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/, '')\r\n            };\r\n            test = null;\r\n        }\r\n\r\n        Object.defineProperty(this, 'volume', {\r\n            get: function () {\r\n                return soundManager.data.volume * 100;\r\n            },\r\n            set: function (value) {\r\n                soundManager.data.volume = parseFloat(value / 100);\r\n\r\n                if (value >= 0 && value <= 1) {\r\n                    if (audioContext) {\r\n                        masterGain.gain.value = soundManager.data.volume;\r\n                    } else {\r\n                        var sounds = soundManager.media.get('sounds');\r\n                        for (var key in sounds) {\r\n                            if (sounds.hasOwnProperty(key) && !sounds[key].webAudio) {\r\n                                for (var i = 0; i < sounds[key].audioNode.length; i++) {\r\n                                    sounds[key].audioNode[i].volume = sounds[key].volume * soundManager.data.volume;\r\n                                }\r\n                            }\r\n                        }\r\n                        sounds = null;\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(this, 'muted', {\r\n            get: function () {\r\n                return !!soundManager.data.muted;\r\n            },\r\n            set: function (value) {\r\n                soundManager.data.muted = !!value;\r\n\r\n                if (audioContext) {\r\n                    masterGain.gain.value = soundManager.data.muted ? 0 : soundManager.data.volume;\r\n                } else {\r\n                    var sounds = soundManager.media.get('sounds');\r\n                    for (var key in sounds) {\r\n                        if (sounds.hasOwnProperty(key) && sounds[key].webAudio === false) {\r\n                            for (var i = 0; i < sounds[key].audioNode.length; i++) {\r\n                                sounds[key].audioNode[i].muted = soundManager.data.muted;\r\n                            }\r\n                        }\r\n                    }\r\n                    sounds = null;\r\n                }\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(this, 'iOSEnable', {\r\n            get: function () {\r\n                return !!soundManager.data.iOSAutoEnable;\r\n            },\r\n            set: function (value) {\r\n                if (audioContext && (soundManager.iOSEnabled || !/iPhone|iPad|iPod/i.test(navigator.userAgent))) {\r\n                    return value;\r\n                }\r\n                soundManager.iOSEnabled = false;\r\n\r\n                var unlock = function () {\r\n                    var buffer = audioContext.createBuffer(1, 1, 22050);\r\n                    var source = audioContext.createBufferSource();\r\n                    source.buffer = buffer;\r\n                    source.connect(audioContext.destination);\r\n\r\n                    if (source.start === undefined) {\r\n                        source.noteOn(0);\r\n                    } else {\r\n                        source.start(0);\r\n                    }\r\n\r\n                    setTimeout(function () {\r\n                        if ((source.playbackState === source.PLAYING_STATE\r\n                            || source.playbackState === source.FINISHED_STATE)) {\r\n                            soundManager.iOSEnabled = true;\r\n                            soundManager.data.iOSAutoEnable = false;\r\n\r\n                            global.removeEventListener('touchend', unlock, false);\r\n                        }\r\n                    }, 0);\r\n                };\r\n                global.addEventListener('touchend', unlock, false);\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(this, 'isSupportAudio', {\r\n            get: function () {\r\n                return !audioContext && !html5Audio;\r\n            }\r\n        });\r\n    };\r\n\r\n    MediaManager.defaults = {\r\n        volume: 1,\r\n        muted: false,\r\n        codecs: {},\r\n        iOSAutoEnable: true\r\n    };\r\n\r\n    MediaManager.prototype.getAudioContext = function () {\r\n        return audioContext;\r\n    };\r\n\r\n    MediaManager.prototype.getMasterGain = function () {\r\n        return masterGain;\r\n    };\r\n\r\n    MediaManager.prototype.mute = function () {\r\n        this.muted = true;\r\n        return this;\r\n    };\r\n\r\n    MediaManager.prototype.unMute = function () {\r\n        this.muted = false;\r\n        return this;\r\n    };\r\n\r\n    MediaManager.prototype.isSupportCodec = function (fileExtension) {\r\n        return !!this.data.codecs[fileExtension];\r\n    };\r\n\r\n    MediaManager.prototype.addSound = function (data) {\r\n        new Sound(data, this);\r\n        return this;\r\n    };\r\n\r\n    MediaManager.prototype.addAudio = function (data) {\r\n        new Audio(data, this);\r\n        return this;\r\n    };\r\n\r\n    MediaManager.prototype.addVideo = function (data) {\r\n        //new Video(this, data);\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @param {string} id\r\n     * @returns {Sound}\r\n     */\r\n    MediaManager.prototype.sound = function (id) {\r\n        return this.media.get('sounds').get(id);\r\n    };\r\n\r\n    MediaManager.prototype.audio = function (id) {\r\n        return this.media.get('audios').get(id);\r\n    };\r\n\r\n    MediaManager.prototype.video = function (id) {\r\n        return this.media.get('videos').get(id);\r\n    };\r\n\r\n    MediaManager.prototype.removeSound = function (id) {\r\n        if (this.media.get('sounds').contains(id)) {\r\n            this.media.get('sounds').get(id).stop();\r\n            this.media.get('sounds').remove(id);\r\n        }\r\n        return this;\r\n    };\r\n\r\n    MediaManager.prototype.removeAudio = function (id) {\r\n        if (this.media.get('audios').contains(id)) {\r\n            this.media.get('audios').get(id).stop();\r\n            this.media.get('audios').remove(id);\r\n        }\r\n        return this;\r\n    };\r\n\r\n    MediaManager.prototype.removeVideo = function (id) {\r\n        if (this.media.get('videos').contains(id)) {\r\n            this.media.get('videos').get(id).stop();\r\n            this.media.get('videos').remove(id);\r\n        }\r\n        return this;\r\n    };\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.MediaManager = MediaManager;\r\n    if (global.j2d === undefined) global.j2d.io.MediaManager = MediaManager;\r\n    return MediaManager;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('nodes/AnimatedNode', [\r\n            'jquery',\r\n            'nodes/BaseNode',\r\n            'utils/Vector2d',\r\n            'transitions/Tween'\r\n        ], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(\r\n            require('jquery'),\r\n            require('nodes/BaseNode'),\r\n            require('utils/Vector2d'),\r\n            require('transitions/Tween')\r\n        );\r\n    } else {\r\n        factory(\r\n            root.jQuery,\r\n            root.j2d.nodes.BaseNode,\r\n            root.j2d.utils.Vector2d,\r\n            root.j2d.transitions.Tween\r\n        );\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function ($, BaseNode, Vector2d, Tween) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * @abstract\r\n     * @constructor\r\n     * @param {BaseNode.defaults|AnimatedNode.defaults|Object} [data]\r\n     * @property {BaseNode.defaults|AnimatedNode.defaults} data\r\n     */\r\n    var AnimatedNode = function (data) {\r\n        BaseNode.call(this, $.extend(true, {}, AnimatedNode.defaults, data));\r\n    };\r\n\r\n    AnimatedNode.prototype = Object.create(BaseNode.prototype);\r\n    AnimatedNode.prototype.constructor = AnimatedNode;\r\n\r\n    AnimatedNode.defaults = {\r\n        type: 'AnimatedNode'\r\n    };\r\n\r\n    /**\r\n     * @param {Vector2d|BaseNode} position\r\n     * @param {number} [duration]\r\n     * @param {boolean} [durationAsSpeed]\r\n     */\r\n    AnimatedNode.prototype.moveTo = function (position, duration, durationAsSpeed) {\r\n        if (duration === undefined || typeof duration !== 'number') duration = 1000.0;\r\n\r\n        if (typeof position === 'object') {\r\n            var tween = new Tween(this);\r\n\r\n            if (position instanceof Vector2d) {\r\n                if (durationAsSpeed) duration = Vector2d.getDistance(this.getPosition(), position) / duration;\r\n                tween.to({\r\n                    position: {\r\n                        x: position.getVector().x,\r\n                        y: position.getVector().y\r\n                    }\r\n                }, duration);\r\n            } else if (position instanceof BaseNode) {\r\n                if (durationAsSpeed) duration = Vector2d.getDistance(this.getPosition(), position.getPosition()) / duration;\r\n                tween.to({\r\n                    position: {\r\n                        x: position.getPosition().getVector().x,\r\n                        y: position.getPosition().getVector().y\r\n                    }\r\n                }, duration);\r\n            }\r\n\r\n            tween.start();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * @param {Vector2d|BaseNode} size\r\n     * @param {number} [duration]\r\n     * @param {boolean} [durationAsSpeed]\r\n     */\r\n    AnimatedNode.prototype.resizeTo = function (size, duration, durationAsSpeed) {\r\n        if (duration === undefined || typeof duration !== 'number') duration = 1000.0;\r\n        if (typeof position === 'object') {\r\n            var tween = new Tween(this);\r\n\r\n            if (size instanceof Vector2d) {\r\n                if (durationAsSpeed) duration = Vector2d.getDistance(this.getSize(), size) / duration;\r\n                tween.to({\r\n                    size: {\r\n                        x: size.getVector().x,\r\n                        y: size.getVector().y\r\n                    }\r\n                }, duration);\r\n            } else if (size instanceof BaseNode) {\r\n                if (durationAsSpeed) duration = Vector2d.getDistance(this.getSize(), size.getSize()) / duration;\r\n                tween.to({\r\n                    size: {\r\n                        x: size.getSize().getVector().x,\r\n                        y: size.getSize().getVector().y\r\n                    }\r\n                }, duration);\r\n            }\r\n\r\n            tween.start();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * @param {number|BaseNode} angle\r\n     * @param {number} [duration]\r\n     */\r\n    AnimatedNode.prototype.rotateTo = function (angle, duration) {\r\n        if (duration === undefined || typeof duration !== 'number') duration = 1000.0;\r\n        var tween = new Tween(this);\r\n\r\n        if (typeof angle === 'number') {\r\n            tween.to({angle: angle % 360}, duration);\r\n        } else if (typeof angle === 'object' && angle instanceof BaseNode) {\r\n            tween.to({\r\n                angle: Vector2d.getAngle(angle.getPosition(), this.getPosition())\r\n            }, duration);\r\n        }\r\n\r\n        tween.start();\r\n    };\r\n\r\n    /**\r\n     * @param {number} [velocity]\r\n     */\r\n    AnimatedNode.prototype.turn = function (velocity) {\r\n        if (velocity === undefined || typeof velocity !== 'number') velocity = 1.0;\r\n        this.angle += velocity;\r\n    };\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.AnimatedNode = AnimatedNode;\r\n    if (global.j2d === undefined) global.j2d.nodes.AnimatedNode = AnimatedNode;\r\n    return AnimatedNode;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('nodes/BaseNode', ['jquery', 'utils/Vector2d', 'utils/UUID'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(require('jquery'), require('utils/Vector2d'), require('utils/UUID'));\r\n    } else {\r\n        factory(root.jQuery, root.j2d.utils.Vector2d, root.j2d.utils.UUID);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function ($, Vector2d, UUID) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * @abstract\r\n     * @constructor\r\n     * @param {BaseNode.defaults|Object} [data]\r\n     * @property {BaseNode.defaults} data\r\n     */\r\n    var BaseNode = function (data) {\r\n        var baseNode = this;\r\n        this.data = $.extend(true, {}, BaseNode.defaults, data);\r\n\r\n        if (this.data.id === null) {\r\n            this.data.id = UUID.generate();\r\n        }\r\n\r\n        Object.defineProperty(this, 'opacity', {\r\n            get: function () {\r\n                return baseNode.data.opacity;\r\n            },\r\n            set: function (value) {\r\n                baseNode.data.opacity = value;\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(this, 'visible', {\r\n            get: function () {\r\n                return baseNode.data.visible;\r\n            },\r\n            set: function (value) {\r\n                baseNode.data.visible = !!value;\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(this, 'angle', {\r\n            get: function () {\r\n                return baseNode.data.angle;\r\n            },\r\n            set: function (value) {\r\n                baseNode.data.angle = value % 360;\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(this, 'scale', {\r\n            get: function () {\r\n                return baseNode.data.scale;\r\n            },\r\n            set: function (value) {\r\n                baseNode.data.scale = value;\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(this, 'cache', {\r\n            get: function () {\r\n                return baseNode.data.enabledCache;\r\n            },\r\n            set: function (value) {\r\n                baseNode.data.enabledCache = !!value;\r\n            }\r\n        });\r\n    };\r\n\r\n    BaseNode.defaults = {\r\n        /** @type {string|null} */\r\n        id: null,\r\n        type: 'BaseNode',\r\n\r\n        position: {\r\n            x: 0.0,\r\n            y: 0.0\r\n        },\r\n        size: {\r\n            x: 0.0,\r\n            y: 0.0\r\n        },\r\n        offset: {\r\n            x: 0.0,\r\n            y: 0.0\r\n        },\r\n\r\n        visible: true,\r\n        angle: 0.0,\r\n        scale: 1.0,\r\n        opacity: 1.0,\r\n\r\n        cache: null,\r\n        enabledCache: false // TODO:: Collections & AnimatedPrimitiveNode\r\n    };\r\n\r\n    /**\r\n     * @param {BaseNode.defaults|Object} data\r\n     */\r\n    BaseNode.prototype.import = function (data) {\r\n        this.data = $.extend(true, {}, this.data, data);\r\n    };\r\n\r\n    /**\r\n     * @returns {BaseNode.defaults}\r\n     */\r\n    BaseNode.prototype.export = function () {\r\n        return this.data;\r\n    };\r\n\r\n    /**\r\n     * @returns {Vector2d}\r\n     */\r\n    BaseNode.prototype.getPosition = function () {\r\n        return new Vector2d(this.data.position.x, this.data.position.y);\r\n    };\r\n\r\n    /**\r\n     * @param {Vector2d|BaseNode} position\r\n     * @returns {BaseNode}\r\n     */\r\n    BaseNode.prototype.setPosition = function (position) {\r\n        if (position !== undefined) {\r\n            if (position instanceof Vector2d) {\r\n                this.data.position = position.getVector();\r\n            } else if (position instanceof BaseNode) {\r\n                this.data.position = position.getPosition().getVector();\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @returns {Vector2d}\r\n     */\r\n    BaseNode.prototype.getSize = function () {\r\n        return new Vector2d(this.data.size.x, this.data.size.y);\r\n    };\r\n\r\n    /**\r\n     * @param {Vector2d|BaseNode} size\r\n     * @returns {BaseNode}\r\n     */\r\n    BaseNode.prototype.setSize = function (size) {\r\n        if (size !== undefined) {\r\n            if (size instanceof Vector2d) {\r\n                this.data.size = size.getVector();\r\n            } else if (size instanceof BaseNode) {\r\n                this.data.size = size.getSize().getVector();\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @returns {Vector2d}\r\n     */\r\n    BaseNode.prototype.getOffset = function () {\r\n        return new Vector2d(this.data.offset.x, this.data.offset.y);\r\n    };\r\n\r\n    /**\r\n     * @param {Vector2d|BaseNode} offset\r\n     * @returns {BaseNode}\r\n     */\r\n    BaseNode.prototype.setOffset = function (offset) {\r\n        if (offset !== undefined) {\r\n            if (offset instanceof Vector2d) {\r\n                this.data.offset = offset.getVector();\r\n            } else if (offset instanceof BaseNode) {\r\n                this.data.offset = offset.getOffset().getVector();\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /* ------------------------------ Render ------------------------------ */\r\n\r\n    /**\r\n     * Must be override this in child!\r\n     *\r\n     * @deprecated\r\n     * @overridable\r\n     *\r\n     * @param {CanvasRenderingContext2D} context\r\n     * @param {{offset: {x: number, y: number}, size: {x: number, y: number}, scale: number, angle: number}} viewport\r\n     * @param {CollectionNode} collection\r\n     * @param {object} data\r\n     * @returns {BaseNode}\r\n     */\r\n    BaseNode.prototype.render = function (context, viewport, collection, data) {\r\n        // throw new Exception('Trying to render base node.'); // TODO:: exceptions\r\n        return this;\r\n    };\r\n\r\n    //TODO:: Fix on fullscreen\r\n    /**\r\n     * @param {{offset: {x: number, y: number}, size: {x: number, y: number}, scale: number, angle: number}} viewport\r\n     * @returns {boolean}\r\n     */\r\n    BaseNode.prototype.inViewport = function (viewport) {\r\n        return !((this.data.position.x > viewport.offset.x + viewport.size.x\r\n        || this.data.position.x + viewport.size.x < viewport.offset.x)\r\n        || (this.data.position.y > viewport.offset.y + viewport.size.y\r\n        || this.data.position.y + viewport.size.y < viewport.offset.y));\r\n    };\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.BaseNode = BaseNode;\r\n    if (global.j2d === undefined) global.j2d.nodes.BaseNode = BaseNode;\r\n    return BaseNode;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('nodes/CameraNode', ['jquery', 'nodes/BaseNode', 'nodes/AnimatedNode'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(require('jquery'), require('nodes/BaseNode'), require('nodes/AnimatedNode'));\r\n    } else {\r\n        factory(root.jQuery, root.j2d.nodes.BaseNode, root.j2d.nodes.AnimatedNode);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function ($, BaseNode, AnimatedNode) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * @param {BaseNode.defaults|AnimatedNode.defaults|CameraNode.defaults|Object} [data]\r\n     * @constructor\r\n     * @property {BaseNode.defaults|AnimatedNode.defaults|CameraNode.defaults} data\r\n     */\r\n    var CameraNode = function (data) {\r\n        BaseNode.call(this, $.extend(true, {}, CameraNode.defaults, data));\r\n    };\r\n\r\n    CameraNode.prototype = Object.create(AnimatedNode.prototype);\r\n    CameraNode.prototype.constructor = CameraNode;\r\n\r\n    CameraNode.defaults = {\r\n        type: 'CameraNode'\r\n    };\r\n\r\n    /**\r\n     * @param {{x: number, y: number, offsetX: number, offsetY: number}} screen\r\n     * @param {Function|callback} calculate\r\n     * @returns {{offset: {x: number, y: number}, size: {x: number, y: number}, scale: number, angle: number}}\r\n     */\r\n    CameraNode.prototype.getCameraViewport = function (screen, calculate) {\r\n        return calculate(screen, {\r\n            offset: this.data.position,\r\n            size: this.data.size,\r\n            angle: this.data.angle,\r\n            scale: this.data.scale\r\n        });\r\n    };\r\n\r\n    /* ------------------------------ Render ------------------------------ */\r\n\r\n    /**\r\n     * @override\r\n     *\r\n     * @param {CanvasRenderingContext2D} context\r\n     * @param {{offset: {x: number, y: number}, size: {x: number, y: number}, scale: number, angle: number}} viewport\r\n     * @param {CollectionNode} collection\r\n     * @param {object} data\r\n     * @returns {CameraNode}\r\n     */\r\n    CameraNode.prototype.render = function (context, viewport, collection, data) {\r\n        return this;\r\n    };\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.CameraNode = CameraNode;\r\n    if (global.j2d === undefined) global.j2d.nodes.CameraNode = CameraNode;\r\n    return CameraNode;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('nodes/CollectionNode', ['jquery', 'nodes/BaseNode', 'nodes/AnimatedNode', 'utils/ArrayMap'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(\r\n            require('jquery'),\r\n            require('nodes/BaseNode'),\r\n            require('nodes/AnimatedNode'),\r\n            require('utils/ArrayMap')\r\n        );\r\n    } else {\r\n        factory(root.jQuery, root.j2d.nodes.BaseNode, root.j2d.nodes.AnimatedNode, root.j2d.utils.ArrayMap);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function ($, BaseNode, AnimatedNode, ArrayMap) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * @param {BaseNode.defaults|AnimatedNode.defaults|CollectionNode.defaults|Object} [data]\r\n     * @constructor\r\n     * @property {BaseNode.defaults|AnimatedNode.defaults|CollectionNode.defaults} data\r\n     */\r\n    var CollectionNode = function (data) {\r\n        var collectionNode = this;\r\n        AnimatedNode.call(this, $.extend(true, {}, CollectionNode.defaults, data));\r\n\r\n        if (this.data.collection === null) {\r\n            this.data.collection = new ArrayMap();\r\n        }\r\n\r\n        Object.defineProperty(this, 'zIndex', {\r\n            get: function () {\r\n                return 1000 - collectionNode.data.zIndex;\r\n            },\r\n            set: function (value) {\r\n                collectionNode.data.zIndex = 1000 + value;\r\n            }\r\n        });\r\n    };\r\n\r\n    CollectionNode.prototype = Object.create(AnimatedNode.prototype);\r\n    CollectionNode.prototype.constructor = CollectionNode;\r\n\r\n    CollectionNode.defaults = {\r\n        type: 'CollectionNode',\r\n        /** @type {ArrayMap|null} */\r\n        collection: null,\r\n        zIndex: 1000\r\n    };\r\n\r\n    /**\r\n     * @param {BaseNode|CollectionNode} node\r\n     * @param {string} key\r\n     * @returns {CollectionNode}\r\n     */\r\n    CollectionNode.prototype.add = function (node, key) {\r\n        if (node instanceof BaseNode) {\r\n            key = key || node.data.id;\r\n            this.data.collection.add(key, node);\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @param {BaseNode|CollectionNode|null} node\r\n     * @param {string} key\r\n     * @returns {CollectionNode}\r\n     */\r\n    CollectionNode.prototype.remove = function (node, key) {\r\n        if (node instanceof BaseNode) {\r\n            this.data.collection.remove(this.data.collection[node.data.id]);\r\n        }\r\n        if (typeof key === 'string' && node === null) {\r\n            this.data.collection.remove(key);\r\n        }\r\n\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @param {string} key\r\n     * @returns {boolean}\r\n     */\r\n    CollectionNode.prototype.has = function (key) {\r\n        return this.data.collection[key] !== undefined;\r\n    };\r\n\r\n    /**\r\n     * @param {string} key\r\n     * @returns {BaseNode|CollectionNode|boolean}\r\n     */\r\n    CollectionNode.prototype.get = function (key) {\r\n        if (this.data.collection[key] !== undefined) {\r\n            return this.data.collection[key];\r\n        }\r\n        return false;\r\n    };\r\n\r\n    /**\r\n     * @returns {CollectionNode}\r\n     */\r\n    CollectionNode.prototype.flush = function () {\r\n        this.data.collection.length = 0;\r\n        return this;\r\n    };\r\n\r\n    /* ------------------------------ Render ------------------------------ */\r\n\r\n    /**\r\n     * @override\r\n     *\r\n     * @param {CanvasRenderingContext2D} context\r\n     * @param {{offset: {x: number, y: number}, size: {x: number, y: number}, scale: number, angle: number}} viewport\r\n     * @param {CollectionNode} collection\r\n     * @param {object} data\r\n     * @returns {CollectionNode}\r\n     */\r\n    CollectionNode.prototype.render = function (context, viewport, collection, data) {\r\n        var collectionNode = this;\r\n\r\n        if (this.data.collection.length !== 0) {\r\n            this.data.collection.each(function (index) {\r\n                if (collectionNode.data.collection.hasOwnProperty(index)\r\n                    && collectionNode.data.collection[index] instanceof BaseNode) {\r\n                    collectionNode.data.collection[index].render(context, viewport, collection, data);\r\n                }\r\n            });\r\n        }\r\n        return this;\r\n    };\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.CollectionNode = CollectionNode;\r\n    if (global.j2d === undefined) global.j2d.nodes.CollectionNode = CollectionNode;\r\n    return CollectionNode;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('nodes/RectNode', ['jquery', 'nodes/BaseNode', 'nodes/AnimatedNode', 'utils/MathUtil'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(\r\n            require('jquery'),\r\n            require('nodes/BaseNode'),\r\n            require('nodes/AnimatedNode'),\r\n            require('utils/MathUtil'));\r\n    } else {\r\n        factory(root.jQuery, root.j2d.nodes.BaseNode, root.j2d.nodes.AnimatedNode, root.j2d.utils.MathUtil);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function ($, BaseNode, AnimatedNode, MathUtil) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * @param {BaseNode.defaults|AnimatedNode.defaults|RectNode.defaults|Object} [data]\r\n     * @constructor\r\n     * @property {BaseNode.defaults|AnimatedNode.defaults|RectNode.defaults} data\r\n     */\r\n    var RectNode = function (data) {\r\n        BaseNode.call(this, $.extend(true, {}, RectNode.defaults, data));\r\n    };\r\n\r\n    RectNode.prototype = Object.create(AnimatedNode.prototype);\r\n    RectNode.prototype.constructor = RectNode;\r\n\r\n    RectNode.defaults = {\r\n        type: 'RectNode',\r\n        color: '#000000'\r\n    };\r\n\r\n    /**\r\n     * @returns {string}\r\n     */\r\n    RectNode.prototype.getColor = function () {\r\n        return this.data.color;\r\n    };\r\n\r\n    /**\r\n     * @param {string} color\r\n     * @returns {RectNode}\r\n     */\r\n    RectNode.prototype.setColor = function (color) {\r\n        this.data.color = color;\r\n        return this;\r\n    };\r\n\r\n\r\n    /* ------------------------------ Draw ------------------------------ */\r\n\r\n    /**\r\n     * @param {CanvasRenderingContext2D} context\r\n     * @param {{offset: {x: number, y: number}, size: {x: number, y: number}, scale: number, angle: number}} viewport\r\n     * @param {CollectionNode} collection\r\n     * @param {object} data\r\n     * @returns {null}\r\n     */\r\n    RectNode.prototype.draw = function (context, viewport, collection, data) {\r\n        if (this.data.visible && this.inViewport(viewport)) {\r\n            //console.log(this.inViewport(viewport));\r\n            if (this.data.opacity !== 1.0) {\r\n                var tempOpacity = context.globalAlpha;\r\n                context.globalAlpha = this.data.opacity;\r\n            }\r\n\r\n            if (this.data.angle || viewport.angle !== 0.0) {\r\n                context.save();\r\n\r\n                context.translate(\r\n                    this.getPosition().x - viewport.offset.x,\r\n                    this.getPosition().y - viewport.offset.y);\r\n                context.rotate(MathUtil.degree2Radian(this.data.angle + viewport.angle));\r\n                context.translate(\r\n                    -(this.getPosition().x - viewport.offset.x),\r\n                    -(this.getPosition().y - viewport.offset.y));\r\n            }\r\n\r\n            context.fillStyle = this.data.color;\r\n            context.lineWidth = 0;\r\n\r\n            context.fillRect(\r\n                this.data.position.x - viewport.offset.x,\r\n                this.data.position.y - viewport.offset.y,\r\n                this.data.size.x * this.data.scale * viewport.scale,\r\n                this.data.size.y * this.data.scale * viewport.scale\r\n            );\r\n\r\n            if (this.data.angle || viewport.angle !== 0.0) {\r\n                context.restore();\r\n            }\r\n\r\n            if (this.data.opacity !== 1.0) {\r\n                context.globalAlpha = tempOpacity;\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n\r\n    /* ------------------------------ Render ------------------------------ */\r\n\r\n    /**\r\n     * @override\r\n     *\r\n     * @param {CanvasRenderingContext2D} context\r\n     * @param {{offset: {x: number, y: number}, size: {x: number, y: number}, scale: number, angle: number}} viewport\r\n     * @param {CollectionNode} collection\r\n     * @param {object} data\r\n     * @returns {RectNode}\r\n     */\r\n    RectNode.prototype.render = function (context, viewport, collection, data) {\r\n        this.draw(context, viewport, collection, data);\r\n        return this;\r\n    };\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.RectNode = RectNode;\r\n    if (global.j2d === undefined) global.j2d.nodes.RectNode = RectNode;\r\n    return RectNode;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('core/FrameManager', ['utils/ArrayMap', 'transitions/Tween'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(require('utils/ArrayMap'), require('transitions/Tween'));\r\n    } else {\r\n        factory(root.j2d.utils.ArrayMap, root.j2d.transitions.Tween);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global,\r\n    /**\r\n     * @param {Function} ArrayMap\r\n     * @param {Tween} Tween\r\n     * @returns {FrameManager}\r\n     */\r\n    function (ArrayMap, Tween) {\r\n        \"use strict\";\r\n\r\n        /** @type FrameManager */\r\n        var instance;\r\n        var engineStack = new ArrayMap(), dataStack = new ArrayMap();\r\n        var timestamp = 0;\r\n\r\n        var options = {\r\n            frameLimit: 60,\r\n            frameRun: false,\r\n            breakAnimationFrame: false\r\n        };\r\n\r\n        var requestAnimationFrame = (function () {\r\n            return global.requestAnimationFrame ||\r\n                global.webkitRequestAnimationFrame ||\r\n                global.mozRequestAnimationFrame ||\r\n                global.oRequestAnimationFrame ||\r\n                global.msRequestAnimationFrame ||\r\n                (function (callback) {\r\n                    if (!options.breakAnimationFrame) {\r\n                        if (timestamp >= Number.MAX_SAFE_INTEGER - 1) timestamp = 0;\r\n                        if (timestamp === 0) timestamp = Date.now();\r\n\r\n                        global.setTimeout(callback.bind(this, Date.now() - timestamp), 1000.0 / options.frameLimit);\r\n                    } else {\r\n                        options.breakAnimationFrame = false\r\n                    }\r\n                });\r\n        })();\r\n\r\n        var cancelAnimationFrame = (function () {\r\n            timestamp = 0;\r\n            return global.cancelAnimationFrame ||\r\n                global.webkitCancelAnimationFrame ||\r\n                global.mozCancelAnimationFrame ||\r\n                global.oCancelAnimationFrame ||\r\n                global.msCancelAnimationFrame;\r\n        })();\r\n\r\n\r\n        /**\r\n         * @constructor\r\n         */\r\n        var FrameManager = function () {\r\n        };\r\n\r\n        /**\r\n         * @param {string} name\r\n         * @param {Function|callback} engine\r\n         * @param {Object} [params]\r\n         * @returns {FrameManager}\r\n         */\r\n        FrameManager.prototype.start = function (name, engine, params) {\r\n            var data = {\r\n                j2d: null,\r\n                frameLimit: options.frameLimit,\r\n                now: 0,\r\n                deltaTime: 0,\r\n                lastTime: 0,\r\n                sceneStartTime: 0,\r\n                sceneSkipTime: 0,\r\n\r\n                asyncUpdate: true,\r\n                asyncRender: true\r\n            };\r\n\r\n            if (params.frameLimit !== undefined && params.frameLimit <= options.frameLimit) data.frameLimit = params.frameLimit;\r\n\r\n            if (params.j2d !== undefined) {\r\n                data.j2d = params.j2d;\r\n            } else {\r\n                throw 'j2d not transported to FrameManager.start(id, engine, {... j2d: j2d ...});';\r\n            }\r\n\r\n            data.interval = 1000.0 / data.frameLimit;\r\n            data.lastTime = Date.now();\r\n\r\n            engineStack.add(name, engine);\r\n            dataStack.add(name, data);\r\n            if (!options.frameRun) this.pulse();\r\n\r\n            return this;\r\n        };\r\n\r\n        /**\r\n         * @param {string} name\r\n         * @returns {FrameManager}\r\n         */\r\n        FrameManager.prototype.stop = function (name) {\r\n            engineStack.remove(name);\r\n            dataStack.remove(name);\r\n            return this;\r\n        };\r\n\r\n        /**\r\n         * @returns {FrameManager}\r\n         */\r\n        FrameManager.prototype.pulse = function () {\r\n            this.runMainLoop(Date.now());\r\n            return this;\r\n        };\r\n\r\n        /**\r\n         * @param {number} timestamp\r\n         * @param {FrameManager} [frameManager]\r\n         */\r\n        FrameManager.prototype.runMainLoop = function (timestamp, frameManager) {\r\n            if (frameManager === undefined) frameManager = this;\r\n\r\n            if (engineStack.length <= 0 && options.frameRun) {\r\n                options.breakAnimationFrame = true;\r\n                options.frameRun = false;\r\n                return cancelAnimationFrame(this.runMainLoop);\r\n            }\r\n            options.frameRun = true;\r\n\r\n            requestAnimationFrame(function (timestamp) {\r\n                frameManager.runMainLoop(timestamp, frameManager);\r\n            });\r\n\r\n            engineStack.each(function (index) {\r\n                if (engineStack.hasOwnProperty(index) && 'object' === typeof engineStack[index]) {\r\n                    var engine = engineStack[index];\r\n                    var data = dataStack[index];\r\n\r\n                    data.now = Date.now();\r\n                    data.deltaTime = (data.now - data.lastTime) / 100.0;\r\n\r\n                    if (data.j2d.data.io && !data.j2d.data.pause) data.j2d.data.io.update();\r\n\r\n                    if (!data.j2d.data.pause) {\r\n                        if (engine.update !== undefined && 'function' === typeof engine.update) {\r\n                            if (data.asyncUpdate) {\r\n                                setTimeout(engine.update.bind(this, timestamp, data), 0);\r\n                                setTimeout(Tween.update, 0);\r\n                            } else {\r\n                                engine.update(timestamp, data);\r\n                                Tween.update();\r\n                            }\r\n                        }\r\n\r\n                        if ((data.deltaTime * 100.0) > data.interval) {\r\n                            data.lastTime = data.now - ((data.deltaTime * 100.0) % data.interval);\r\n\r\n                            if (engine.render !== undefined && 'function' === typeof engine.render) {\r\n                                if (data.asyncRender) {\r\n                                    setTimeout(engine.render.bind(this, timestamp, data), 0);\r\n                                } else {\r\n                                    engine.render(timestamp, data);\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    if (data.j2d.data.io && !data.j2d.data.pause) data.j2d.data.io.clear();\r\n                }\r\n            });\r\n        };\r\n\r\n        /**\r\n         * @param {number} frameLimit\r\n         * @returns {FrameManager}\r\n         */\r\n        FrameManager.prototype.setDefaultFrameLimit = function (frameLimit) {\r\n            if (frameLimit <= 60 && frameLimit > 0) {\r\n                options.frameLimit = frameLimit\r\n            }\r\n            return this;\r\n        };\r\n\r\n        /**\r\n         * @singleton\r\n         * @returns {FrameManager}\r\n         */\r\n        FrameManager.Init = function () {\r\n            if (global.J2D !== undefined) {\r\n                return global.instanceFrameManager || (global.instanceFrameManager = new FrameManager());\r\n            } else {\r\n                return instance || (instance = new FrameManager());\r\n            }\r\n        };\r\n\r\n        if (typeof module === 'object' && typeof module.exports === 'object') module.exports.FrameManager = FrameManager;\r\n        if (global.j2d === undefined) global.j2d.core.FrameManager = FrameManager;\r\n        return FrameManager;\r\n    }\r\n));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('core/LayersManager', ['utils/ArrayMap', 'nodes/BaseNode', 'nodes/CollectionNode', 'utils/UUID'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(\r\n            require('utils/ArrayMap'),\r\n            require('nodes/BaseNode'),\r\n            require('nodes/CollectionNode'),\r\n            require('utils/UUID')\r\n        );\r\n    } else {\r\n        factory(root.j2d.utils.ArrayMap, root.j2d.nodes.BaseNode, root.j2d.nodes.CollectionNode, root.j2d.utils.UUID);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function (ArrayMap, BaseNode, CollectionNode, UUID) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * @constructor\r\n     */\r\n    var LayersManager = function () {\r\n        /** @type CollectionNode */\r\n        this.globalCollection = new CollectionNode({id: 'GlobalLayer'});\r\n\r\n        /** @type Array.<CollectionNode>|CollectionNode[] */\r\n        this.layers = [];\r\n\r\n        /** @type number */\r\n        this.index = 1000;\r\n    };\r\n\r\n    /**\r\n     * @param {string} name\r\n     * @param {number} [zIndex]\r\n     * @param {CollectionNode|undefined} [node]\r\n     * @returns {LayersManager}\r\n     */\r\n    LayersManager.prototype.addLayer = function (name, zIndex, node) {\r\n        name = name || UUID.generate();\r\n\r\n        if (node === undefined || node instanceof CollectionNode) {\r\n            if (zIndex === undefined) {\r\n                zIndex = this.index;\r\n                this.index++;\r\n            } else {\r\n                zIndex += 1000;\r\n            }\r\n\r\n            node = node || new CollectionNode({id: name, zIndex: zIndex});\r\n\r\n            this.globalCollection.add(node, name);\r\n            this.layers[zIndex] = node;\r\n\r\n            return this;\r\n        }\r\n        // throw new InvalidArgumentException('Unknown node type to add as layers');\r\n    };\r\n\r\n    /**\r\n     * @param {string} name\r\n     * @returns {LayersManager}\r\n     */\r\n    LayersManager.prototype.removeLayer = function (name) {\r\n        delete this.layers[this.globalCollection.get(name).zIndex];\r\n        this.globalCollection.remove(null, name);\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @param {string} name\r\n     * @returns {CollectionNode|null}\r\n     */\r\n    LayersManager.prototype.getLayer = function (name) {\r\n        if (this.globalCollection.has(name)) {\r\n            return this.globalCollection.get(name);\r\n        }\r\n        return null;\r\n    };\r\n\r\n    /**\r\n     * @param {string} name\r\n     * @param {number} zIndex\r\n     * @returns {LayersManager}\r\n     */\r\n    LayersManager.prototype.setZIndex = function (name, zIndex) {\r\n        if (this.globalCollection.has(name)) {\r\n            delete this.layers[this.globalCollection.get(name).zIndex];\r\n            this.globalCollection.get(name).zIndex = zIndex;\r\n            this.layers[zIndex] = this.globalCollection.get(name);\r\n        }\r\n        return this;\r\n    };\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.LayersManager = LayersManager;\r\n    if (global.j2d === undefined) global.j2d.core.LayersManager = LayersManager;\r\n    return LayersManager;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n/*\r\n * TODO:: GameStateManager to Scene\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('core/SceneManager', [\r\n            'jquery',\r\n            'core/WebGL2D',\r\n            'core/FrameManager',\r\n            'core/ViewportManager',\r\n            'core/LayersManager'\r\n        ], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(\r\n            require('jquery'),\r\n            require('core/WebGL2D'),\r\n            require('core/FrameManager'),\r\n            require('core/ViewportManager'),\r\n            require('core/LayersManager')\r\n        );\r\n    } else {\r\n        factory(\r\n            root.jQuery,\r\n            root.WebGL2D,\r\n            root.j2d.core.FrameManager,\r\n            root.j2d.core.ViewportManager,\r\n            root.j2d.core.LayersManager\r\n        );\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function ($, WebGL2D, FrameManager, ViewportManager, LayersManager) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * @param {J2D} j2d\r\n     * @constructor\r\n     *\r\n     * @property {SceneManager.defaults} data\r\n     *\r\n     * @property {string} backgroundColor\r\n     * @property {number} opacity\r\n     * @property {boolean} visible\r\n     * @property {number} zIndex\r\n     * @property {{x:number, y:number}} viewport\r\n     */\r\n    var SceneManager = function (j2d) {\r\n        var sceneManager = this;\r\n\r\n        /** @type J2D */\r\n        this.j2d = j2d;\r\n\r\n        /** @type {HTMLCanvasElement} */\r\n        this.canvas = null;\r\n\r\n        /** @type {CanvasRenderingContext2D} */\r\n        this.context = null;\r\n\r\n        /** @type {FrameManager} */\r\n        this.frameManager = FrameManager.Init();\r\n\r\n        /** @type {LayersManager} */\r\n        this.layersManager = new LayersManager();\r\n\r\n        /** @type {ViewportManager} */\r\n        this.viewportManager = new ViewportManager();\r\n\r\n        this.initLayers();\r\n\r\n        Object.defineProperty(this, 'backgroundColor', {\r\n            get: function () {\r\n                return sceneManager.data.backgroundColor;\r\n            },\r\n            set: function (value) {\r\n                sceneManager.data.backgroundColor = value;\r\n                sceneManager.context.fillStyle = value;\r\n                sceneManager.context.fillRect(0, 0, sceneManager.data.width, sceneManager.data.height);\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(this, 'opacity', {\r\n            get: function () {\r\n                return sceneManager.data.opacity;\r\n            },\r\n            set: function (value) {\r\n                sceneManager.data.opacity = value;\r\n                sceneManager.canvas.style.opacity = value;\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(this, 'visible', {\r\n            get: function () {\r\n                return sceneManager.data.visible;\r\n            },\r\n            set: function (value) {\r\n                sceneManager.data.visible = !!value;\r\n                sceneManager.canvas.style.display = (!!value) ? 'block' : 'none';\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(this, 'zIndex', {\r\n            get: function () {\r\n                return 1000 - sceneManager.data.zIndex;\r\n            },\r\n            set: function (value) {\r\n                sceneManager.data.zIndex = 1000 + value;\r\n                sceneManager.canvas.style.zIndex = 1000 + value;\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(this, 'viewport', {\r\n            get: function () {\r\n                return sceneManager.data.viewport;\r\n            },\r\n            set: function () {\r\n            }\r\n        });\r\n    };\r\n\r\n    SceneManager.defaults = {\r\n        width: 0,\r\n        height: 0,\r\n\r\n        originalWidth: 0,\r\n        originalHeight: 0,\r\n        originalMargin: 0,\r\n\r\n        visible: true,\r\n        position: 'absolute',\r\n        top: 0,\r\n        left: 0,\r\n        zIndex: 1000,\r\n        opacity: 1.0,\r\n        backgroundColor: false,\r\n\r\n        frameLimit: 60,\r\n\r\n        enableFullScreen: false,\r\n\r\n        viewport: {x: 0, y: 0},\r\n\r\n        /** @type Function */\r\n        gameState: function () {\r\n            this.id = 'DefaultGameState';\r\n        }\r\n    };\r\n\r\n    /**\r\n     * @returns {SceneManager}\r\n     */\r\n    SceneManager.prototype.fixGameStateRender = function () {\r\n        var sceneManager = this;\r\n        if (typeof this.data.gameState === 'function' && this.data.gameState.prototype.render === undefined) {\r\n            this.data.gameState.prototype.render = function (timestamp, data) {\r\n                sceneManager.clear().fillBackground().render(data);\r\n            };\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @param {SceneManager.defaults|Object|undefined} options\r\n     * @returns {SceneManager}\r\n     */\r\n    SceneManager.prototype.init = function (options) {\r\n        this.data = $.extend(true, {}, SceneManager.defaults, options);\r\n\r\n        this.j2d.trigger('beforeInit');\r\n\r\n        this.data.originalWidth = this.data.width;\r\n        this.data.originalHeight = this.data.height;\r\n        this.data.originalMargin = this.j2d.element.css('margin');\r\n\r\n        this.j2d.element.width(this.data.width).height(this.data.height);\r\n\r\n        this.initCanvas();\r\n\r\n        this.viewportManager.setScreen({\r\n            x: this.data.width,\r\n            y: this.data.height\r\n        }).setDefaultViewport({\r\n            offset: {\r\n                x: 0.0,\r\n                y: 0.0\r\n            },\r\n            size: {\r\n                x: this.data.width,\r\n                y: this.data.height\r\n            },\r\n            scale: 1.0,\r\n            angle: 0.0\r\n        });\r\n\r\n        this.j2d.trigger('afterInit');\r\n\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @returns {SceneManager}\r\n     */\r\n    SceneManager.prototype.initLayers = function () {\r\n        if (!this.layersManager.getLayer('scene')) {\r\n            this.layersManager.addLayer('scene', 0);\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @returns {SceneManager}\r\n     */\r\n    SceneManager.prototype.initCanvas = function () {\r\n        if ($(this.j2d.element.selector + ' canvas').length === 0) {\r\n            this.canvas = document.createElement('canvas');\r\n\r\n            this.canvas.width = this.data.width;\r\n            this.canvas.height = this.data.height;\r\n            this.canvas.style.zIndex = this.data.zIndex;\r\n            this.canvas.style.position = this.data.position;\r\n\r\n            this.canvas.style.left = this.data.left;\r\n            this.canvas.style.top = this.data.top;\r\n\r\n            if (this.j2d.data.webGL) {\r\n                WebGL2D.enable(this.canvas);\r\n                this.context = this.canvas.getContext('WebGL-2d');\r\n            } else {\r\n                this.context = this.canvas.getContext('2d');\r\n            }\r\n\r\n            if (!this.j2d.data.smoothing) {\r\n                this.j2d.util.disableSmoothing(this.context);\r\n            }\r\n\r\n            this.context.shadowColor = 'rgba(0,0,0,0)';\r\n            if (this.data.backgroundColor) this.backgroundColor = this.data.backgroundColor;\r\n            if (this.data.opacity) this.opacity = this.data.opacity;\r\n            if (this.data.visible) this.visible = this.data.visible;\r\n            if (this.data.zIndex) this.zIndex = 1000 - this.data.zIndex;\r\n\r\n            this.j2d.element.append(this.canvas);\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @param {{x:number, y:number}|Vector2d} [pos]\r\n     * @param {{x:number, y:number}|Vector2d} [size]\r\n     * @returns {SceneManager}\r\n     */\r\n    SceneManager.prototype.clear = function (pos, size) {\r\n        if (pos !== undefined && size !== undefined) {\r\n            this.context.clearRect(pos.x - this.viewport.x, pos.y - this.viewport.y, size.x, size.y);\r\n        } else {\r\n            this.context.clearRect(0, 0, this.data.width, this.data.height);\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @param {number} width\r\n     * @param {number} height\r\n     * @returns {SceneManager}\r\n     */\r\n    SceneManager.prototype.resize = function (width, height) {\r\n        this.canvas.width = this.data.width = width;\r\n        this.canvas.height = this.data.height = height;\r\n\r\n        if (this.data.backgroundColor) {\r\n            this.context.save();\r\n\r\n            this.clear();\r\n            this.backgroundColor = this.data.backgroundColor;\r\n\r\n            this.context.restore();\r\n        }\r\n        if (!this.j2d.data.smoothing) {\r\n            this.j2d.util.disableSmoothing(this.context);\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @param {Function|callback} gameState\r\n     * @returns {SceneManager}\r\n     */\r\n    SceneManager.prototype.setGameState = function (gameState) {\r\n        this.data.gameState = gameState || function () {\r\n                console.warn('Error in game state function!');\r\n            };\r\n        this.frameManager.stop(this.j2d.data.id);\r\n\r\n        this.fixGameStateRender();\r\n        this.frameManager.start(this.j2d.data.id, new this.data.gameState(), {\r\n            j2d: this.j2d,\r\n            frameLimit: this.data.frameLimit\r\n        });\r\n\r\n        this.j2d.trigger('changedGameState');\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @param {Function|callback} callback\r\n     * @param {*} data\r\n     * @returns {SceneManager}\r\n     */\r\n    SceneManager.prototype.async = function (callback, data) {\r\n        setTimeout(callback.call(callback, data), 0);\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @returns {SceneManager}\r\n     */\r\n    SceneManager.prototype.start = function () {\r\n        if (this.j2d.data.io) {\r\n            this.j2d.data.io.init();\r\n        }\r\n        this.j2d.trigger('beforeStart');\r\n\r\n        this.frameManager.stop(this.j2d.data.id);\r\n\r\n        this.fixGameStateRender();\r\n        this.frameManager.start(this.j2d.data.id, new this.data.gameState(), {\r\n            j2d: this.j2d,\r\n            frameLimit: this.data.frameLimit\r\n        });\r\n\r\n        this.j2d.trigger('afterStart');\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @returns {SceneManager}\r\n     */\r\n    SceneManager.prototype.stop = function () {\r\n        this.frameManager.stop(this.j2d.data.id);\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @param {boolean} [fullscreen]\r\n     * @returns {SceneManager}\r\n     */\r\n    SceneManager.prototype.fullScreen = function (fullscreen) {\r\n        var element = document.getElementById(this.j2d.element.attr('id'));\r\n\r\n        if (undefined === element.requestFullscreen) {\r\n            //noinspection JSUnresolvedVariable\r\n            element.requestFullscreen = element.webkitRequestFullscreen\r\n                || element.webkitRequestFullScreen\r\n                || element.mozRequestFullScreen\r\n                || element.msRequestFullscreen;\r\n        }\r\n\r\n        if (undefined === document.exitFullscreen) {\r\n            //noinspection JSUnresolvedVariable\r\n            document.exitFullscreen = document.webkitExitFullscreen\r\n                || document.webkitCancelFullScreen\r\n                || document.mozCancelFullScreen\r\n                || document.msExitFullscreen;\r\n        }\r\n        if (fullscreen) {\r\n            element.requestFullscreen();\r\n        } else {\r\n            document.exitFullscreen();\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @param {boolean} [fullscreen]\r\n     * @returns {SceneManager}\r\n     */\r\n    SceneManager.prototype.resizeToFullPage = function (fullscreen) {\r\n        $('div.canvas[guid]:not(.active)').toggle(fullscreen);\r\n\r\n        var j2d = this.j2d;\r\n        var sceneManager = this;\r\n\r\n        if (fullscreen) {\r\n            sceneManager.data.originalWidth = sceneManager.data.width;\r\n            sceneManager.data.originalHeight = sceneManager.data.height;\r\n\r\n            sceneManager.resize(j2d.device.width, j2d.device.height);\r\n            sceneManager.data.enableFullscreen = true;\r\n\r\n            j2d.element\r\n                .width(j2d.device.width)\r\n                .height(j2d.device.height)\r\n                .css('margin', 0);\r\n\r\n            sceneManager.viewportManager.setScreen({\r\n                x: j2d.device.width,\r\n                y: j2d.device.height\r\n            }).setOffset({\r\n                x: -(j2d.device.width - sceneManager.data.originalWidth) / 2,\r\n                y: -(j2d.device.height - sceneManager.data.originalHeight) / 2\r\n            });\r\n        } else {\r\n            sceneManager.resize(sceneManager.data.originalWidth, sceneManager.data.originalHeight);\r\n            sceneManager.data.enableFullscreen = false;\r\n\r\n            j2d.element\r\n                .width(sceneManager.data.originalWidth)\r\n                .height(sceneManager.data.originalHeight)\r\n                .css('margin', sceneManager.data.originalMargin);\r\n\r\n            sceneManager.viewportManager.setScreen({\r\n                x: sceneManager.data.originalWidth,\r\n                y: sceneManager.data.originalHeight\r\n            }).setOffset({\r\n                x: 0,\r\n                y: 0\r\n            });\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @param {J2D} j2d\r\n     * @param {{fullscreen: boolean}} data\r\n     * @returns {SceneManager}\r\n     */\r\n    SceneManager.prototype.toggleFullScreen = function (j2d, data) {\r\n        if (data === undefined) {\r\n            data = {fullscreen: false};\r\n        }\r\n        if (!j2d.scene.enableFullscreen || data.fullscreen) {\r\n            j2d.scene.fullScreen(true);\r\n        } else {\r\n            j2d.scene.fullScreen(false);\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @returns {CollectionNode|null}\r\n     */\r\n    SceneManager.prototype.getSceneLayer = function () {\r\n        return this.layersManager.getLayer('scene');\r\n    };\r\n\r\n    /**\r\n     * @returns {SceneManager}\r\n     */\r\n    SceneManager.prototype.fillBackground = function () {\r\n        if (this.data.backgroundColor) {\r\n            this.backgroundColor = this.data.backgroundColor;\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @param {Object} data\r\n     * @returns {SceneManager}\r\n     */\r\n    SceneManager.prototype.render = function (data) {\r\n        var sceneManager = this;\r\n        sceneManager.layersManager.layers.forEach(function (value, index) {\r\n            sceneManager.layersManager.layers[index].render(\r\n                sceneManager.context,\r\n                sceneManager.viewportManager.getViewport(),\r\n                sceneManager.layersManager.globalCollection,\r\n                data || {}\r\n            );\r\n        });\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @param {BaseNode} node\r\n     * @param {string} [key]\r\n     * @returns {SceneManager}\r\n     */\r\n    SceneManager.prototype.add = function (node, key) {\r\n        if (this.layersManager.globalCollection.has('scene')) {\r\n            this.layersManager.globalCollection.get('scene').add(node, key);\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @param {BaseNode} [node]\r\n     * @param {string} [key]\r\n     * @returns {SceneManager}\r\n     */\r\n    SceneManager.prototype.remove = function (node, key) {\r\n        if (this.layersManager.globalCollection.has('scene')) {\r\n            this.layersManager.globalCollection.get('scene').remove(node, key);\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @param {CameraNode} node\r\n     * @returns {SceneManager}\r\n     */\r\n    SceneManager.prototype.registerCamera = function (node) {\r\n        this.viewportManager.addCamera(node.data.id, node);\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * Hack to mode without Cameras\r\n     * @returns {SceneManager}\r\n     */\r\n    var updateNoCamerasViewport = function (scene) {\r\n        // This hack use deprecated method, i known.\r\n        scene.viewportManager.setViewport(\r\n            new Vector2d(0, 0),\r\n            new Vector2d(scene.data.width, scene.data.height)\r\n        );\r\n\r\n        return scene;\r\n    };\r\n    /**\r\n     * @param {CameraNode} [node]\r\n     * @returns {SceneManager}\r\n     */\r\n    SceneManager.prototype.updateViewport = function (node) {\r\n        if (node === undefined) return updateNoCamerasViewport(this);\r\n        this.viewportManager.updateViewport(node.data.id);\r\n        return this;\r\n    };\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.SceneManager = SceneManager;\r\n    if (global.j2d === undefined) global.j2d.core.SceneManager = SceneManager;\r\n    return SceneManager;\r\n}));\r\n","/**\r\n * J2D (jQuery Canvas Graphic Engine plugin)\r\n *\r\n * @authors DeVinterX, Skaner(j2Ds)\r\n * @license BSD\r\n * @version 0.2.0-dev\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('core/ViewportManager', ['utils/ArrayMap', 'nodes/CameraNode', 'utils/Vector2d'], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory(require('utils/ArrayMap'), require('nodes/CameraNode'), require('utils/Vector2d'));\r\n    } else {\r\n        factory(root.j2d.utils.ArrayMap, root.j2d.nodes.CameraNode, root.j2d.utils.Vector2d);\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function (ArrayMap, CameraNode, Vector2d) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * @param {{x: number, y: number, offsetX: number, offsetY: number}} screen\r\n     * @param {{offset: {x: number, y: number}, size: {x: number, y: number}, scale: number, angle: number}} viewport\r\n     * @returns {{offset: {x: number, y: number}, size: {x: number, y: number}, scale: number, angle: number}}\r\n     */\r\n    var calculateScale = function (screen, viewport) {\r\n        var data = {\r\n            offset: {x: 0, y: 0},\r\n            size: {x: 0, y: 0},\r\n            scale: 1.0,\r\n            angle: viewport.angle\r\n        };\r\n\r\n        data.offset.x = screen.offsetX + viewport.offset.x;\r\n        data.offset.y = screen.offsetY + viewport.offset.y;\r\n\r\n        data.size.x = (screen.x < viewport.size.x) ? screen.x : viewport.size.x;\r\n        data.size.y = (screen.y < viewport.size.y) ? screen.y : viewport.size.y;\r\n\r\n        data.scale = viewport.scale * (((screen.x / viewport.size.x) + (screen.y / viewport.size.y)) / 2);\r\n        return data;\r\n    };\r\n\r\n    /**\r\n     * @constructor\r\n     *\r\n     * @property {ArrayMap.<CameraNode>|CameraNode[]} cameras\r\n     * @property {string} camera\r\n     * @property {{x: number, y: number, offsetX: number, offsetY: number}} screen\r\n     * @property {boolean} init\r\n     * @property {{offset: {x: number, y: number}, size: {x: number, y: number}, scale: number, angle: number}} data\r\n     */\r\n    var ViewportManager = function () {\r\n        /** @type ArrayMap.<CameraNode>|CameraNode[] */\r\n        this.cameras = new ArrayMap();\r\n\r\n        /** @type string */\r\n        this.camera = 'No active cameras';\r\n\r\n        /** @type {{x: number, y: number, offsetX: number, offsetY: number}} */\r\n        this.screen = {\r\n            x: 0,\r\n            y: 0,\r\n            offsetX: 0,\r\n            offsetY: 0\r\n        };\r\n\r\n        this.init = false;\r\n\r\n        this.data = {\r\n            offset: {x: 0.0, y: 0.0},\r\n            size: {x: 0.0, y: 0.0},\r\n            scale: 1.0,\r\n            angle: 0.0\r\n        };\r\n    };\r\n\r\n    /**\r\n     * @param {{x: number|undefined, y: number|undefined}|Array<number>} data\r\n     * @returns {ViewportManager}\r\n     */\r\n    ViewportManager.prototype.setScreen = function (data) {\r\n        if (typeof data == 'object') {\r\n            if (data instanceof Array && data.length == 2) {\r\n                this.screen = {\r\n                    x: data[0],\r\n                    y: data[1],\r\n                    offsetX: this.screen.offsetX,\r\n                    offsetY: this.screen.offsetY\r\n                };\r\n                return this;\r\n            }\r\n            if (data.x !== undefined && data.y !== undefined) {\r\n                this.screen = {\r\n                    x: data.x,\r\n                    y: data.y,\r\n                    offsetX: this.screen.offsetX,\r\n                    offsetY: this.screen.offsetY\r\n                };\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @param {{x: number|undefined, y: number|undefined}|Array<number>} data\r\n     * @returns {ViewportManager}\r\n     */\r\n    ViewportManager.prototype.setOffset = function (data) {\r\n        if (typeof data == 'object') {\r\n            if (data instanceof Array && data.length == 2) {\r\n                this.screen = {\r\n                    x: this.screen.x,\r\n                    y: this.screen.y,\r\n                    offsetX: data[0],\r\n                    offsetY: data[1]\r\n                };\r\n                return this;\r\n            }\r\n            if (data.x !== undefined && data.y !== undefined) {\r\n                this.screen = {\r\n                    x: this.screen.x,\r\n                    y: this.screen.y,\r\n                    offsetX: data.x,\r\n                    offsetY: data.y\r\n                };\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @param {string} key\r\n     * @param {CameraNode} node\r\n     * @returns {ViewportManager}\r\n     */\r\n    ViewportManager.prototype.addCamera = function (key, node) {\r\n        if (node instanceof CameraNode) {\r\n            this.cameras.add(key, node);\r\n            return this;\r\n        }\r\n        // throw new InvalidArgumentException('Unknown camera node type');\r\n    };\r\n\r\n    /**\r\n     * @param {string} key\r\n     * @returns {ViewportManager}\r\n     */\r\n    ViewportManager.prototype.removeCamera = function (key) {\r\n        this.cameras.remove(key);\r\n        if (this.camera == key) {\r\n            this.camera = 'No active cameras';\r\n            this.data = {\r\n                offset: {x: 0.0, y: 0.0},\r\n                size: {x: 0.0, y: 0.0},\r\n                scale: 1.0,\r\n                angle: 0.0\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @param {string} key\r\n     * @returns {ViewportManager}\r\n     */\r\n    ViewportManager.prototype.updateViewport = function (key) {\r\n        if (this.cameras[key] !== undefined && this.cameras[key] instanceof CameraNode) {\r\n            this.data = this.cameras[key].getCameraViewport(this.screen, calculateScale);\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @deprecated Please use CameraNode\r\n     *\r\n     * @param {Vector2d|null} [offset]\r\n     * @param {Vector2d|null} [size]\r\n     * @returns {ViewportManager}\r\n     */\r\n    ViewportManager.prototype.setViewport = function (offset, size) {\r\n        if (offset !== undefined && typeof offset == 'object') {\r\n            if (offset instanceof Vector2d) {\r\n                this.data.offset = offset.getVector();\r\n            }\r\n        }\r\n\r\n        if (size !== undefined && typeof size == 'object') {\r\n            if (size instanceof Vector2d) {\r\n                this.data.size = size.getVector();\r\n            }\r\n        }\r\n\r\n        this.data = calculateScale(this.screen, this.data);\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @param {{offset: {x: number, y: number}, size: {x: number, y: number}, scale: number, angle: number}} viewport\r\n     * @returns {ViewportManager}\r\n     */\r\n    ViewportManager.prototype.setDefaultViewport = function (viewport) {\r\n        if (!this.init) {\r\n            this.data = viewport;\r\n            this.init = true;\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * @returns {{offset: {x: number, y: number}, size: {x: number, y: number}, scale: number, angle: number}}\r\n     */\r\n    ViewportManager.prototype.getViewport = function () {\r\n        return this.data;\r\n    };\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.ViewportManager = ViewportManager;\r\n    if (global.j2d === undefined) global.j2d.core.ViewportManager = ViewportManager;\r\n    return ViewportManager;\r\n}));\r\n","/**\r\n *  WebGL-2D.js - HTML5 Canvas2D API in a WebGL context\r\n *\r\n *  Created by Corban Brook <corbanbrook@gmail.com> on 2011-03-02.\r\n *  Amended to by Bobby Richter <secretrobotron@gmail.com> on 2011-03-03\r\n *  CubicVR.js by Charles Cliffe <cj@cubicproductions.com> on 2011-03-03\r\n */\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('core/WebGL2D', [], factory);\r\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\r\n        module.exports = factory();\r\n    } else {\r\n        factory();\r\n    }\r\n}(typeof window !== 'undefined' ? window : global, function () {\r\n    \"use strict\";\r\n\r\n    // Vector & Matrix libraries from CubicVR.js\r\n    var M_PI = 3.1415926535897932384626433832795028841968;\r\n    var M_TWO_PI = 2.0 * M_PI;\r\n    var M_HALF_PI = M_PI / 2.0;\r\n\r\n    function isPOT(value) {\r\n        return value > 0 && ((value - 1) & value) === 0;\r\n    }\r\n\r\n    var vec3 = {\r\n        length: function (pt) {\r\n            return Math.sqrt(pt[0] * pt[0] + pt[1] * pt[1] + pt[2] * pt[2]);\r\n        },\r\n\r\n        normalize: function (pt) {\r\n            var d = Math.sqrt((pt[0] * pt[0]) + (pt[1] * pt[1]) + (pt[2] * pt[2]));\r\n            if (d === 0) {\r\n                return [0, 0, 0];\r\n            }\r\n            return [pt[0] / d, pt[1] / d, pt[2] / d];\r\n        },\r\n\r\n        dot: function (v1, v2) {\r\n            return v1[0] * v2[0] + v1[1] * v2[1] + v1[2] * v2[2];\r\n        },\r\n\r\n        angle: function (v1, v2) {\r\n            return Math.acos((v1[0] * v2[0] + v1[1] * v2[1] + v1[2] * v2[2]) / (Math.sqrt(v1[0] * v1[0] + v1[1] * v1[1] + v1[2] * v1[2]) * Math.sqrt(v2[0] * v2[0] + v2[1] * v2[1] + v2[2] * v2[2])));\r\n        },\r\n\r\n        cross: function (vectA, vectB) {\r\n            return [vectA[1] * vectB[2] - vectB[1] * vectA[2], vectA[2] * vectB[0] - vectB[2] * vectA[0], vectA[0] * vectB[1] - vectB[0] * vectA[1]];\r\n        },\r\n\r\n        multiply: function (vectA, constB) {\r\n            return [vectA[0] * constB, vectA[1] * constB, vectA[2] * constB];\r\n        },\r\n\r\n        add: function (vectA, vectB) {\r\n            return [vectA[0] + vectB[0], vectA[1] + vectB[1], vectA[2] + vectB[2]];\r\n        },\r\n\r\n        subtract: function (vectA, vectB) {\r\n            return [vectA[0] - vectB[0], vectA[1] - vectB[1], vectA[2] - vectB[2]];\r\n        },\r\n\r\n        equal: function (a, b) {\r\n            var epsilon = 0.0000001;\r\n            if ((a === undefined) && (b === undefined)) {\r\n                return true;\r\n            }\r\n            if ((a === undefined) || (b === undefined)) {\r\n                return false;\r\n            }\r\n            return (Math.abs(a[0] - b[0]) < epsilon && Math.abs(a[1] - b[1]) < epsilon && Math.abs(a[2] - b[2]) < epsilon);\r\n        }\r\n    };\r\n\r\n    var mat3 = {\r\n        identity: [1.0, 0.0, 0.0,\r\n            0.0, 1.0, 0.0,\r\n            0.0, 0.0, 1.0],\r\n\r\n        multiply: function (m1, m2) {\r\n            var m10 = m1[0], m11 = m1[1], m12 = m1[2], m13 = m1[3], m14 = m1[4], m15 = m1[5], m16 = m1[6], m17 = m1[7], m18 = m1[8],\r\n                m20 = m2[0], m21 = m2[1], m22 = m2[2], m23 = m2[3], m24 = m2[4], m25 = m2[5], m26 = m2[6], m27 = m2[7], m28 = m2[8];\r\n\r\n            m2[0] = m20 * m10 + m23 * m11 + m26 * m12;\r\n            m2[1] = m21 * m10 + m24 * m11 + m27 * m12;\r\n            m2[2] = m22 * m10 + m25 * m11 + m28 * m12;\r\n            m2[3] = m20 * m13 + m23 * m14 + m26 * m15;\r\n            m2[4] = m21 * m13 + m24 * m14 + m27 * m15;\r\n            m2[5] = m22 * m13 + m25 * m14 + m28 * m15;\r\n            m2[6] = m20 * m16 + m23 * m17 + m26 * m18;\r\n            m2[7] = m21 * m16 + m24 * m17 + m27 * m18;\r\n            m2[8] = m22 * m16 + m25 * m17 + m28 * m18;\r\n        },\r\n\r\n        vec2_multiply: function (m1, m2) {\r\n            var mOut = [];\r\n            mOut[0] = m2[0] * m1[0] + m2[3] * m1[1] + m2[6];\r\n            mOut[1] = m2[1] * m1[0] + m2[4] * m1[1] + m2[7];\r\n            return mOut;\r\n        },\r\n\r\n        transpose: function (m) {\r\n            return [m[0], m[3], m[6], m[1], m[4], m[7], m[2], m[5], m[8]];\r\n        }\r\n    }; //mat3\r\n\r\n    // Transform library from CubicVR.js\r\n    function Transform(mat) {\r\n        return this.clearStack(mat);\r\n    }\r\n\r\n    var STACK_DEPTH_LIMIT = 16;\r\n\r\n    Transform.prototype.clearStack = function (init_mat) {\r\n        this.m_stack = [];\r\n        this.m_cache = [];\r\n        this.c_stack = 0;\r\n        this.valid = 0;\r\n        this.result = null;\r\n\r\n        for (var i = 0; i < STACK_DEPTH_LIMIT; i++) {\r\n            this.m_stack[i] = this.getIdentity();\r\n        }\r\n\r\n        if (init_mat !== undefined) {\r\n            this.m_stack[0] = init_mat;\r\n        } else {\r\n            this.setIdentity();\r\n        }\r\n    }; //clearStack\r\n\r\n    Transform.prototype.setIdentity = function () {\r\n        this.m_stack[this.c_stack] = this.getIdentity();\r\n        if (this.valid === this.c_stack && this.c_stack) {\r\n            this.valid--;\r\n        }\r\n    };\r\n\r\n    Transform.prototype.getIdentity = function () {\r\n        return [1.0, 0.0, 0.0,\r\n            0.0, 1.0, 0.0,\r\n            0.0, 0.0, 1.0];\r\n    };\r\n\r\n    Transform.prototype.getResult = function () {\r\n        if (!this.c_stack) {\r\n            return this.m_stack[0];\r\n        }\r\n\r\n        var m = mat3.identity;\r\n\r\n        if (this.valid > this.c_stack - 1) {\r\n            this.valid = this.c_stack - 1;\r\n        }\r\n\r\n        for (var i = this.valid; i < this.c_stack + 1; i++) {\r\n            m = mat3.multiply(this.m_stack[i], m);\r\n            this.m_cache[i] = m;\r\n        }\r\n\r\n        this.valid = this.c_stack - 1;\r\n\r\n        this.result = this.m_cache[this.c_stack];\r\n\r\n        return this.result;\r\n    };\r\n\r\n    Transform.prototype.pushMatrix = function () {\r\n        this.c_stack++;\r\n        this.m_stack[this.c_stack] = this.getIdentity();\r\n    };\r\n\r\n    Transform.prototype.popMatrix = function () {\r\n        if (this.c_stack === 0) {\r\n            return;\r\n        }\r\n        this.c_stack--;\r\n    };\r\n\r\n    var translateMatrix = Transform.prototype.getIdentity();\r\n\r\n    Transform.prototype.translate = function (x, y) {\r\n        translateMatrix[6] = x;\r\n        translateMatrix[7] = y;\r\n\r\n        mat3.multiply(translateMatrix, this.m_stack[this.c_stack]);\r\n\r\n        /*\r\n         if (this.valid === this.c_stack && this.c_stack) {\r\n         this.valid--;\r\n         }\r\n         */\r\n    };\r\n\r\n    var trMatrix = Transform.prototype.getIdentity();\r\n\r\n    Transform.prototype.tr = function (a, b, c, d, e, f) {\r\n        trMatrix[0] = a;\r\n        trMatrix[1] = b;\r\n        trMatrix[3] = c;\r\n        trMatrix[4] = d;\r\n        trMatrix[6] = e;\r\n        trMatrix[7] = f;\r\n\r\n        mat3.multiply(trMatrix, this.m_stack[this.c_stack]);\r\n    };\r\n\r\n    var scaleMatrix = Transform.prototype.getIdentity();\r\n\r\n    Transform.prototype.scale = function (x, y) {\r\n        scaleMatrix[0] = x;\r\n        scaleMatrix[4] = y;\r\n\r\n        mat3.multiply(scaleMatrix, this.m_stack[this.c_stack]);\r\n\r\n        /*\r\n         if (this.valid === this.c_stack && this.c_stack) {\r\n         this.valid--;\r\n         }\r\n         */\r\n    };\r\n\r\n    var rotateMatrix = Transform.prototype.getIdentity();\r\n\r\n    Transform.prototype.rotate = function (ang) {\r\n        var sAng, cAng;\r\n\r\n        sAng = Math.sin(-ang);\r\n        cAng = Math.cos(-ang);\r\n\r\n        rotateMatrix[0] = cAng;\r\n        rotateMatrix[3] = sAng;\r\n        rotateMatrix[1] = -sAng;\r\n        rotateMatrix[4] = cAng;\r\n\r\n        mat3.multiply(rotateMatrix, this.m_stack[this.c_stack]);\r\n\r\n        /*\r\n         if (this.valid === this.c_stack && this.c_stack) {\r\n         this.valid--;\r\n         }\r\n         */\r\n    };\r\n\r\n    var WebGL2D = global.WebGL2D = function WebGL2D(canvas, options) {\r\n        this.canvas = canvas;\r\n        this.options = options || {};\r\n        this.gl = undefined;\r\n        this.fs = undefined;\r\n        this.vs = undefined;\r\n        this.shaderProgram = undefined;\r\n        this.transform = new Transform();\r\n        this.shaderPool = [];\r\n        this.maxTextureSize = undefined;\r\n\r\n        // Save a reference to the WebGL2D instance on the canvas object\r\n        canvas.gl2d = this;\r\n\r\n        // Store getContext function for later use\r\n        canvas.$getContext = canvas.getContext;\r\n\r\n        // Override getContext function with \"webgl-2d\" enabled version\r\n        canvas.getContext = (function (gl2d) {\r\n            return function (context) {\r\n                if ((gl2d.options.force || context === \"WebGL-2d\") && !(canvas.width === 0 || canvas.height === 0)) {\r\n                    if (gl2d.gl) {\r\n                        return gl2d.gl;\r\n                    }\r\n\r\n                    var gl = gl2d.gl = gl2d.canvas.$getContext(\"experimental-webgl\");\r\n\r\n                    // If we failed to get a WebGL context, return a normal 2D context instead.\r\n                    if ((typeof (gl) === \"undefined\") || (gl === null)) {\r\n                        return gl2d.canvas.$getContext(\"2d\");\r\n                    }\r\n\r\n                    gl2d.initShaders();\r\n                    gl2d.initBuffers();\r\n\r\n                    // Append Canvas2D API features to the WebGL context\r\n                    gl2d.initCanvas2DAPI();\r\n\r\n                    // Disables writing to dest-alpha\r\n                    // gl.colorMask(1,1,1,0)\r\n\r\n                    // Depth options\r\n                    //gl.enable(gl.DEPTH_TEST);\r\n                    //gl.depthFunc(gl.LEQUAL);\r\n\r\n                    // Blending options\r\n                    // See http://stackoverflow.com/questions/11521035/blending-with-html-background-in-webgl\r\n                    gl.enable(gl.BLEND);\r\n                    gl.blendFuncSeparate(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\r\n\r\n                    gl2d.maxTextureSize = gl.getParameter(gl.MAX_TEXTURE_SIZE);\r\n\r\n                    return gl;\r\n                } else {\r\n                    return gl2d.canvas.$getContext(context);\r\n                }\r\n            };\r\n        }(this));\r\n\r\n        this.postInit();\r\n    };\r\n\r\n    // Enables WebGL2D on your canvas\r\n    WebGL2D.enable = function (canvas, options) {\r\n        return canvas.gl2d || new WebGL2D(canvas, options);\r\n    };\r\n\r\n\r\n    // Shader Pool BitMasks, i.e. sMask = (shaderMask.texture+shaderMask.stroke)\r\n    var shaderMask = {\r\n        texture: 1,\r\n        crop: 2,\r\n        path: 4\r\n    };\r\n\r\n\r\n    // Fragment shader source\r\n    WebGL2D.prototype.getFragmentShaderSource = function getFragmentShaderSource(sMask) {\r\n        var fsSource = [\r\n            \"#ifdef GL_ES\",\r\n            \"precision highp float;\",\r\n            \"#endif\",\r\n\r\n            \"#define hasTexture \" + ((sMask & shaderMask.texture) ? \"1\" : \"0\"),\r\n            \"#define hasCrop \" + ((sMask & shaderMask.crop) ? \"1\" : \"0\"),\r\n\r\n            \"varying vec4 vColor;\",\r\n\r\n            \"#if hasTexture\",\r\n            \"varying vec2 vTextureCoord;\",\r\n            \"uniform sampler2D uSampler;\",\r\n            \"#if hasCrop\",\r\n            \"uniform vec4 uCropSource;\",\r\n            \"#endif\",\r\n            \"#endif\",\r\n\r\n            \"void main(void) {\",\r\n            \"#if hasTexture\",\r\n            \"#if hasCrop\",\r\n            \"gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x * uCropSource.z, vTextureCoord.y * uCropSource.w) + uCropSource.xy);\",\r\n            \"#else\",\r\n            \"gl_FragColor = texture2D(uSampler, vTextureCoord);\",\r\n            \"#endif\",\r\n            \"#else\",\r\n            \"gl_FragColor = vColor;\",\r\n            \"#endif\",\r\n            \"}\"\r\n        ].join(\"\\n\");\r\n\r\n        return fsSource;\r\n    };\r\n\r\n    WebGL2D.prototype.getVertexShaderSource = function getVertexShaderSource(stackDepth, sMask) {\r\n        stackDepth = stackDepth || 1;\r\n\r\n        var vsSource = [\r\n            \"#define hasTexture \" + ((sMask & shaderMask.texture) ? \"1\" : \"0\"),\r\n            \"attribute vec4 aVertexPosition;\",\r\n\r\n            \"#if hasTexture\",\r\n            \"varying vec2 vTextureCoord;\",\r\n            \"#endif\",\r\n\r\n            \"uniform vec4 uColor;\",\r\n            \"uniform mat3 uTransforms[\" + stackDepth + \"];\",\r\n\r\n            \"varying vec4 vColor;\",\r\n\r\n            \"uniform mat4 pMatrix;\",\r\n\r\n            \"mat3 crunchStack(void) {\",\r\n            \"mat3 result = uTransforms[0];\",\r\n            \"for (int i = 1; i < \" + stackDepth + \"; ++i) {\",\r\n            \"result = uTransforms[i] * result;\",\r\n            \"}\",\r\n            \"return result;\",\r\n            \"}\",\r\n\r\n            \"void main(void) {\",\r\n            \"vec3 position = crunchStack() * vec3(aVertexPosition.x, aVertexPosition.y, 1.0);\",\r\n            \"gl_Position = pMatrix * vec4(position, 1.0);\",\r\n            \"vColor = uColor;\",\r\n            \"#if hasTexture\",\r\n            \"vTextureCoord = aVertexPosition.zw;\",\r\n            \"#endif\",\r\n            \"}\"\r\n        ].join(\"\\n\");\r\n        return vsSource;\r\n    };\r\n\r\n\r\n    // Initialize fragment and vertex shaders\r\n    WebGL2D.prototype.initShaders = function initShaders(transformStackDepth, sMask) {\r\n        var gl = this.gl;\r\n\r\n        transformStackDepth = transformStackDepth || 1;\r\n        sMask = sMask || 0;\r\n        var storedShader = this.shaderPool[transformStackDepth];\r\n\r\n        if (!storedShader) {\r\n            storedShader = this.shaderPool[transformStackDepth] = [];\r\n        }\r\n        storedShader = storedShader[sMask];\r\n\r\n        if (storedShader) {\r\n            gl.useProgram(storedShader);\r\n            this.shaderProgram = storedShader;\r\n        } else {\r\n            var fs = this.fs = gl.createShader(gl.FRAGMENT_SHADER);\r\n            gl.shaderSource(this.fs, this.getFragmentShaderSource(sMask));\r\n            gl.compileShader(this.fs);\r\n\r\n            if (!gl.getShaderParameter(this.fs, gl.COMPILE_STATUS)) {\r\n                throw \"fragment shader error: \" + gl.getShaderInfoLog(this.fs);\r\n            }\r\n\r\n            var vs = this.vs = gl.createShader(gl.VERTEX_SHADER);\r\n            gl.shaderSource(this.vs, this.getVertexShaderSource(transformStackDepth, sMask));\r\n            gl.compileShader(this.vs);\r\n\r\n            if (!gl.getShaderParameter(this.vs, gl.COMPILE_STATUS)) {\r\n                throw \"vertex shader error: \" + gl.getShaderInfoLog(this.vs);\r\n            }\r\n\r\n\r\n            var shaderProgram = this.shaderProgram = gl.createProgram();\r\n            shaderProgram.stackDepth = transformStackDepth;\r\n            gl.attachShader(shaderProgram, fs);\r\n            gl.attachShader(shaderProgram, vs);\r\n            gl.linkProgram(shaderProgram);\r\n\r\n            if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {\r\n                throw \"Could not initialise shaders.\";\r\n            }\r\n\r\n            gl.useProgram(shaderProgram);\r\n\r\n            shaderProgram.vertexPositionAttribute = gl.getAttribLocation(shaderProgram, \"aVertexPosition\");\r\n            gl.enableVertexAttribArray(shaderProgram.vertexPositionAttribute);\r\n\r\n            shaderProgram.uColor = gl.getUniformLocation(shaderProgram, 'uColor');\r\n            shaderProgram.uSampler = gl.getUniformLocation(shaderProgram, 'uSampler');\r\n            shaderProgram.uCropSource = gl.getUniformLocation(shaderProgram, 'uCropSource');\r\n\r\n            shaderProgram.pMatrix = gl.getUniformLocation(shaderProgram, 'pMatrix');\r\n\r\n            shaderProgram.uTransforms = [];\r\n            for (var i = 0; i < transformStackDepth; ++i) {\r\n                shaderProgram.uTransforms[i] = gl.getUniformLocation(shaderProgram, 'uTransforms[' + i + ']');\r\n            } //for\r\n            this.shaderPool[transformStackDepth][sMask] = shaderProgram;\r\n        } //if\r\n\r\n        pMatrix[0] = 2 / this.canvas.width;\r\n        pMatrix[5] = -2 / this.canvas.height;\r\n\r\n        gl.uniformMatrix4fv(this.shaderProgram.pMatrix, false, pMatrix);\r\n\r\n        gl.viewport(0, 0, this.canvas.width, this.canvas.height);\r\n\r\n        return this.shaderProgram;\r\n    };\r\n\r\n    // 2D Vertices and Texture UV coords\r\n    var rectVerts = new Float32Array([\r\n        0, 0, 0, 0,\r\n        0, 1, 0, 1,\r\n        1, 1, 1, 1,\r\n        1, 0, 1, 0\r\n    ]);\r\n\r\n    var pMatrix = new Float32Array(16);\r\n    pMatrix[10] = 1;\r\n    pMatrix[11] = 1;\r\n    pMatrix[12] = -1;\r\n    pMatrix[13] = 1;\r\n\r\n    WebGL2D.prototype.initBuffers = function initBuffers() {\r\n        var gl = this.gl;\r\n\r\n        gl.rectVertexPositionBuffer = gl.createBuffer();\r\n        gl.rectVertexColorBuffer = gl.createBuffer();\r\n\r\n        gl.pathVertexPositionBuffer = gl.createBuffer();\r\n        gl.pathVertexColorBuffer = gl.createBuffer();\r\n\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, gl.rectVertexPositionBuffer);\r\n        gl.bufferData(gl.ARRAY_BUFFER, rectVerts, gl.STATIC_DRAW);\r\n    };\r\n\r\n    // Maintains an array of all WebGL2D instances\r\n    WebGL2D.instances = [];\r\n\r\n    WebGL2D.prototype.postInit = function () {\r\n        WebGL2D.instances.push(this);\r\n    };\r\n\r\n    // Extends gl context with Canvas2D API\r\n    WebGL2D.prototype.initCanvas2DAPI = function initCanvas2DAPI() {\r\n        var gl2d = this,\r\n            gl = this.gl;\r\n\r\n\r\n        // Rendering Canvas for text fonts\r\n        var textCanvas = document.createElement(\"canvas\");\r\n        textCanvas.width = gl2d.canvas.width;\r\n        textCanvas.height = gl2d.canvas.height;\r\n        var textCtx = textCanvas.getContext(\"2d\");\r\n\r\n        var reRGBAColor = /^rgb(a)?\\(\\s*(-?[\\d]+)(%)?\\s*,\\s*(-?[\\d]+)(%)?\\s*,\\s*(-?[\\d]+)(%)?\\s*,?\\s*(-?[\\d\\.]+)?\\s*\\)$/;\r\n        var reHSLAColor = /^hsl(a)?\\(\\s*(-?[\\d\\.]+)\\s*,\\s*(-?[\\d\\.]+)%\\s*,\\s*(-?[\\d\\.]+)%\\s*,?\\s*(-?[\\d\\.]+)?\\s*\\)$/;\r\n        var reHex6Color = /^#([0-9A-Fa-f]{6})$/;\r\n        var reHex3Color = /^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/;\r\n\r\n        function hue2rgb(p, q, t) {\r\n            if (t < 0) t += 1;\r\n            if (t > 1) t -= 1;\r\n            if (t < 1 / 6) return p + (q - p) * 6 * t;\r\n            if (t < 1 / 2) return q;\r\n            if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\r\n            return p;\r\n        }\r\n\r\n        // http://axonflux.com/handy-rgb-to-hsl-and-rgb-to-hsv-color-model-c\r\n        function HSLAToRGBA(h, s, l, a) {\r\n            var r, g, b, p, q;\r\n\r\n            // Clamp and Normalize values\r\n            h = (((h % 360) + 360) % 360) / 360;\r\n            s = s > 100 ? 1 : s / 100;\r\n            s = s < 0 ? 0 : s;\r\n            l = l > 100 ? 1 : l / 100;\r\n            l = l < 0 ? 0 : l;\r\n\r\n            if (s == 0) {\r\n                r = g = b = l; // achromatic\r\n            } else {\r\n                q = l < 0.5 ? l * (1 + s) : l + s - l * s;\r\n                p = 2 * l - q;\r\n\r\n                r = hue2rgb(p, q, h + 1 / 3);\r\n                g = hue2rgb(p, q, h);\r\n                b = hue2rgb(p, q, h - 1 / 3);\r\n            }\r\n\r\n            return [r, g, b, a];\r\n        }\r\n\r\n\r\n        // Converts rgb(a) color string to gl color vector\r\n        function colorStringToVec4(value) {\r\n            var result = [], match, channel, isPercent, hasAlpha, alphaChannel, sameType;\r\n\r\n            if ((match = reRGBAColor.exec(value))) {\r\n                hasAlpha = match[1], alphaChannel = parseFloat(match[8]);\r\n\r\n                if ((hasAlpha && isNaN(alphaChannel)) || (!hasAlpha && !isNaN(alphaChannel))) {\r\n                    return false;\r\n                }\r\n\r\n                sameType = match[3];\r\n\r\n                for (var i = 2; i < 8; i += 2) {\r\n                    channel = match[i], isPercent = match[i + 1];\r\n\r\n                    if (isPercent !== sameType) {\r\n                        return false;\r\n                    }\r\n\r\n                    // Clamp and normalize values\r\n                    if (isPercent) {\r\n                        channel = channel > 100 ? 1 : channel / 100;\r\n                        channel = channel < 0 ? 0 : channel;\r\n                    } else {\r\n                        channel = channel > 255 ? 1 : channel / 255;\r\n                        channel = channel < 0 ? 0 : channel;\r\n                    }\r\n\r\n                    result.push(channel);\r\n                }\r\n\r\n                result.push(hasAlpha ? alphaChannel : 1.0);\r\n            } else if ((match = reHSLAColor.exec(value))) {\r\n                hasAlpha = match[1], alphaChannel = parseFloat(match[5]);\r\n                result = HSLAToRGBA(match[2], match[3], match[4], parseFloat(hasAlpha && alphaChannel ? alphaChannel : 1.0));\r\n            } else if ((match = reHex6Color.exec(value))) {\r\n                var colorInt = parseInt(match[1], 16);\r\n                result = [((colorInt & 0xFF0000) >> 16) / 255, ((colorInt & 0x00FF00) >> 8) / 255, (colorInt & 0x0000FF) / 255, 1.0];\r\n            } else if ((match = reHex3Color.exec(value))) {\r\n                var hexString = \"#\" + [match[1], match[1], match[2], match[2], match[3], match[3]].join(\"\");\r\n                result = colorStringToVec4(hexString);\r\n            } else if (value.toLowerCase() in colorKeywords) {\r\n                result = colorStringToVec4(colorKeywords[value.toLowerCase()]);\r\n            } else if (value.toLowerCase() === \"transparent\") {\r\n                result = [0, 0, 0, 0];\r\n            } else {\r\n                // Color keywords not yet implemented, ie \"orange\", return hot pink\r\n                return false;\r\n            }\r\n\r\n            return result;\r\n        }\r\n\r\n        function colorVecToString(vec4) {\r\n            return \"rgba(\" + (vec4[0] * 255) + \", \" + (vec4[1] * 255) + \", \" + (vec4[2] * 255) + \", \" + parseFloat(vec4[3]) + \")\";\r\n        }\r\n\r\n        var colorKeywords = {\r\n            aliceblue: \"#f0f8ff\",\r\n            antiquewhite: \"#faebd7\",\r\n            aqua: \"#00ffff\",\r\n            aquamarine: \"#7fffd4\",\r\n            azure: \"#f0ffff\",\r\n            beige: \"#f5f5dc\",\r\n            bisque: \"#ffe4c4\",\r\n            black: \"#000000\",\r\n            blanchedalmond: \"#ffebcd\",\r\n            blue: \"#0000ff\",\r\n            blueviolet: \"#8a2be2\",\r\n            brown: \"#a52a2a\",\r\n            burlywood: \"#deb887\",\r\n            cadetblue: \"#5f9ea0\",\r\n            chartreuse: \"#7fff00\",\r\n            chocolate: \"#d2691e\",\r\n            coral: \"#ff7f50\",\r\n            cornflowerblue: \"#6495ed\",\r\n            cornsilk: \"#fff8dc\",\r\n            crimson: \"#dc143c\",\r\n            cyan: \"#00ffff\",\r\n            darkblue: \"#00008b\",\r\n            darkcyan: \"#008b8b\",\r\n            darkgoldenrod: \"#b8860b\",\r\n            darkgray: \"#a9a9a9\",\r\n            darkgreen: \"#006400\",\r\n            darkkhaki: \"#bdb76b\",\r\n            darkmagenta: \"#8b008b\",\r\n            darkolivegreen: \"#556b2f\",\r\n            darkorange: \"#ff8c00\",\r\n            darkorchid: \"#9932cc\",\r\n            darkred: \"#8b0000\",\r\n            darksalmon: \"#e9967a\",\r\n            darkseagreen: \"#8fbc8f\",\r\n            darkslateblue: \"#483d8b\",\r\n            darkslategray: \"#2f4f4f\",\r\n            darkturquoise: \"#00ced1\",\r\n            darkviolet: \"#9400d3\",\r\n            deeppink: \"#ff1493\",\r\n            deepskyblue: \"#00bfff\",\r\n            dimgray: \"#696969\",\r\n            dodgerblue: \"#1e90ff\",\r\n            firebrick: \"#b22222\",\r\n            floralwhite: \"#fffaf0\",\r\n            forestgreen: \"#228b22\",\r\n            fuchsia: \"#ff00ff\",\r\n            gainsboro: \"#dcdcdc\",\r\n            ghostwhite: \"#f8f8ff\",\r\n            gold: \"#ffd700\",\r\n            goldenrod: \"#daa520\",\r\n            gray: \"#808080\",\r\n            green: \"#008000\",\r\n            greenyellow: \"#adff2f\",\r\n            grey: \"#808080\",\r\n            honeydew: \"#f0fff0\",\r\n            hotpink: \"#ff69b4\",\r\n            indianred: \"#cd5c5c\",\r\n            indigo: \"#4b0082\",\r\n            ivory: \"#fffff0\",\r\n            khaki: \"#f0e68c\",\r\n            lavender: \"#e6e6fa\",\r\n            lavenderblush: \"#fff0f5\",\r\n            lawngreen: \"#7cfc00\",\r\n            lemonchiffon: \"#fffacd\",\r\n            lightblue: \"#add8e6\",\r\n            lightcoral: \"#f08080\",\r\n            lightcyan: \"#e0ffff\",\r\n            lightgoldenrodyellow: \"#fafad2\",\r\n            lightgrey: \"#d3d3d3\",\r\n            lightgreen: \"#90ee90\",\r\n            lightpink: \"#ffb6c1\",\r\n            lightsalmon: \"#ffa07a\",\r\n            lightseagreen: \"#20b2aa\",\r\n            lightskyblue: \"#87cefa\",\r\n            lightslategray: \"#778899\",\r\n            lightsteelblue: \"#b0c4de\",\r\n            lightyellow: \"#ffffe0\",\r\n            lime: \"#00ff00\",\r\n            limegreen: \"#32cd32\",\r\n            linen: \"#faf0e6\",\r\n            magenta: \"#ff00ff\",\r\n            maroon: \"#800000\",\r\n            mediumaquamarine: \"#66cdaa\",\r\n            mediumblue: \"#0000cd\",\r\n            mediumorchid: \"#ba55d3\",\r\n            mediumpurple: \"#9370d8\",\r\n            mediumseagreen: \"#3cb371\",\r\n            mediumslateblue: \"#7b68ee\",\r\n            mediumspringgreen: \"#00fa9a\",\r\n            mediumturquoise: \"#48d1cc\",\r\n            mediumvioletred: \"#c71585\",\r\n            midnightblue: \"#191970\",\r\n            mintcream: \"#f5fffa\",\r\n            mistyrose: \"#ffe4e1\",\r\n            moccasin: \"#ffe4b5\",\r\n            navajowhite: \"#ffdead\",\r\n            navy: \"#000080\",\r\n            oldlace: \"#fdf5e6\",\r\n            olive: \"#808000\",\r\n            olivedrab: \"#6b8e23\",\r\n            orange: \"#ffa500\",\r\n            orangered: \"#ff4500\",\r\n            orchid: \"#da70d6\",\r\n            palegoldenrod: \"#eee8aa\",\r\n            palegreen: \"#98fb98\",\r\n            paleturquoise: \"#afeeee\",\r\n            palevioletred: \"#d87093\",\r\n            papayawhip: \"#ffefd5\",\r\n            peachpuff: \"#ffdab9\",\r\n            peru: \"#cd853f\",\r\n            pink: \"#ffc0cb\",\r\n            plum: \"#dda0dd\",\r\n            powderblue: \"#b0e0e6\",\r\n            purple: \"#800080\",\r\n            red: \"#ff0000\",\r\n            rosybrown: \"#bc8f8f\",\r\n            royalblue: \"#4169e1\",\r\n            saddlebrown: \"#8b4513\",\r\n            salmon: \"#fa8072\",\r\n            sandybrown: \"#f4a460\",\r\n            seagreen: \"#2e8b57\",\r\n            seashell: \"#fff5ee\",\r\n            sienna: \"#a0522d\",\r\n            silver: \"#c0c0c0\",\r\n            skyblue: \"#87ceeb\",\r\n            slateblue: \"#6a5acd\",\r\n            slategray: \"#708090\",\r\n            snow: \"#fffafa\",\r\n            springgreen: \"#00ff7f\",\r\n            steelblue: \"#4682b4\",\r\n            tan: \"#d2b48c\",\r\n            teal: \"#008080\",\r\n            thistle: \"#d8bfd8\",\r\n            tomato: \"#ff6347\",\r\n            turquoise: \"#40e0d0\",\r\n            violet: \"#ee82ee\",\r\n            wheat: \"#f5deb3\",\r\n            white: \"#ffffff\",\r\n            whitesmoke: \"#f5f5f5\",\r\n            yellow: \"#ffff00\",\r\n            yellowgreen: \"#9acd32\"\r\n        };\r\n\r\n        // Maintain drawing state params during gl.save and gl.restore. see saveDrawState() and restoreDrawState()\r\n        var drawState = {}, drawStateStack = [];\r\n\r\n        // A fast simple shallow clone\r\n        function cloneObject(obj) {\r\n            var target = {};\r\n            for (var i in obj) {\r\n                if (obj.hasOwnProperty(i)) {\r\n                    target[i] = obj[i];\r\n                }\r\n            }\r\n            return target;\r\n        }\r\n\r\n        function saveDrawState() {\r\n            var bakedDrawState = {\r\n                fillStyle: [drawState.fillStyle[0], drawState.fillStyle[1], drawState.fillStyle[2], drawState.fillStyle[3]],\r\n                strokeStyle: [drawState.strokeStyle[0], drawState.strokeStyle[1], drawState.strokeStyle[2], drawState.strokeStyle[3]],\r\n                globalAlpha: drawState.globalAlpha,\r\n                globalCompositeOperation: drawState.globalCompositeOperation,\r\n                lineCap: drawState.lineCap,\r\n                lineJoin: drawState.lineJoin,\r\n                lineWidth: drawState.lineWidth,\r\n                miterLimit: drawState.miterLimit,\r\n                shadowColor: drawState.shadowColor,\r\n                shadowBlur: drawState.shadowBlur,\r\n                shadowOffsetX: drawState.shadowOffsetX,\r\n                shadowOffsetY: drawState.shadowOffsetY,\r\n                textAlign: drawState.textAlign,\r\n                font: drawState.font,\r\n                textBaseline: drawState.textBaseline,\r\n                imageSmoothingEnabled: drawState.imageSmoothingEnabled\r\n            };\r\n\r\n            drawStateStack.push(bakedDrawState);\r\n        }\r\n\r\n        function restoreDrawState() {\r\n            if (drawStateStack.length) {\r\n                drawState = drawStateStack.pop();\r\n            }\r\n        }\r\n\r\n        // WebGL requires colors as a vector while Canvas2D sets colors as an rgba string\r\n        // These getters and setters store the original rgba string as well as convert to a vector\r\n        drawState.fillStyle = [0, 0, 0, 1]; // default black\r\n\r\n        Object.defineProperty(gl, \"fillStyle\", {\r\n            get: function () {\r\n                return colorVecToString(drawState.fillStyle);\r\n            },\r\n            set: function (value) {\r\n                drawState.fillStyle = colorStringToVec4(value) || drawState.fillStyle;\r\n            }\r\n        });\r\n\r\n        drawState.strokeStyle = [0, 0, 0, 1]; // default black\r\n\r\n        Object.defineProperty(gl, \"strokeStyle\", {\r\n            get: function () {\r\n                return colorVecToString(drawState.strokeStyle);\r\n            },\r\n            set: function (value) {\r\n                drawState.strokeStyle = colorStringToVec4(value) || drawStyle.strokeStyle;\r\n            }\r\n        });\r\n\r\n        // WebGL already has a lineWidth() function but Canvas2D requires a lineWidth property\r\n        // Store the original lineWidth() function for later use\r\n        gl.$lineWidth = gl.lineWidth;\r\n        drawState.lineWidth = 1.0;\r\n\r\n        Object.defineProperty(gl, \"lineWidth\", {\r\n            get: function () {\r\n                return drawState.lineWidth;\r\n            },\r\n            set: function (value) {\r\n                if (value > 0) {\r\n                    gl.$lineWidth(value);\r\n                    drawState.lineWidth = value;\r\n                }\r\n            }\r\n        });\r\n\r\n        // Currently unsupported attributes and their default values\r\n        drawState.lineCap = \"butt\";\r\n\r\n        Object.defineProperty(gl, \"lineCap\", {\r\n            get: function () {\r\n                return drawState.lineCap;\r\n            },\r\n            set: function (value) {\r\n                drawState.lineCap = value;\r\n            }\r\n        });\r\n\r\n        drawState.lineJoin = \"miter\";\r\n\r\n        Object.defineProperty(gl, \"lineJoin\", {\r\n            get: function () {\r\n                return drawState.lineJoin;\r\n            },\r\n            set: function (value) {\r\n                drawState.lineJoin = value;\r\n            }\r\n        });\r\n\r\n        drawState.miterLimit = 10;\r\n\r\n        Object.defineProperty(gl, \"miterLimit\", {\r\n            get: function () {\r\n                return drawState.miterLimit;\r\n            },\r\n            set: function (value) {\r\n                drawState.miterLimit = value;\r\n            }\r\n        });\r\n\r\n        drawState.shadowOffsetX = 0;\r\n\r\n        Object.defineProperty(gl, \"shadowOffsetX\", {\r\n            get: function () {\r\n                return drawState.shadowOffsetX;\r\n            },\r\n            set: function (value) {\r\n                drawState.shadowOffsetX = value;\r\n            }\r\n        });\r\n\r\n        drawState.shadowOffsetY = 0;\r\n\r\n        Object.defineProperty(gl, \"shadowOffsetY\", {\r\n            get: function () {\r\n                return drawState.shadowOffsetY;\r\n            },\r\n            set: function (value) {\r\n                drawState.shadowOffsetY = value;\r\n            }\r\n        });\r\n\r\n        drawState.shadowBlur = 0;\r\n\r\n        Object.defineProperty(gl, \"shadowBlur\", {\r\n            get: function () {\r\n                return drawState.shadowBlur;\r\n            },\r\n            set: function (value) {\r\n                drawState.shadowBlur = value;\r\n            }\r\n        });\r\n\r\n        drawState.shadowColor = \"rgba(0, 0, 0, 0.0)\";\r\n\r\n        Object.defineProperty(gl, \"shadowColor\", {\r\n            get: function () {\r\n                return drawState.shadowColor;\r\n            },\r\n            set: function (value) {\r\n                drawState.shadowColor = value;\r\n            }\r\n        });\r\n\r\n        drawState.font = \"10px sans-serif\";\r\n\r\n        Object.defineProperty(gl, \"font\", {\r\n            get: function () {\r\n                return drawState.font;\r\n            },\r\n            set: function (value) {\r\n                textCtx.font = value;\r\n                drawState.font = value;\r\n            }\r\n        });\r\n\r\n        drawState.textAlign = \"start\";\r\n\r\n        Object.defineProperty(gl, \"textAlign\", {\r\n            get: function () {\r\n                return drawState.textAlign;\r\n            },\r\n            set: function (value) {\r\n                drawState.textAlign = value;\r\n            }\r\n        });\r\n\r\n        drawState.textBaseline = \"alphabetic\";\r\n\r\n        Object.defineProperty(gl, \"textBaseline\", {\r\n            get: function () {\r\n                return drawState.textBaseline;\r\n            },\r\n            set: function (value) {\r\n                drawState.textBaseline = value;\r\n            }\r\n        });\r\n\r\n        // This attribute will need to control global alpha of objects drawn.\r\n        drawState.globalAlpha = 1.0;\r\n\r\n        Object.defineProperty(gl, \"globalAlpha\", {\r\n            get: function () {\r\n                return drawState.globalAlpha;\r\n            },\r\n            set: function (value) {\r\n                drawState.globalAlpha = value;\r\n            }\r\n        });\r\n\r\n        // This attribute will need to control smoothing of objects drawn.\r\n        drawState.imageSmoothingEnabled = true;\r\n\r\n        Object.defineProperty(gl, \"imageSmoothingEnabled\", {\r\n            get: function () {\r\n                return drawState.imageSmoothingEnabled;\r\n            },\r\n            set: function (value) {\r\n                drawState.imageSmoothingEnabled = !!value;\r\n            }\r\n        });\r\n\r\n        // This attribute will need to set the gl.blendFunc mode\r\n        drawState.globalCompositeOperation = \"source-over\";\r\n\r\n        Object.defineProperty(gl, \"globalCompositeOperation\", {\r\n            get: function () {\r\n                return drawState.globalCompositeOperation;\r\n            },\r\n            set: function (value) {\r\n                drawState.globalCompositeOperation = value;\r\n            }\r\n        });\r\n\r\n        // Need a solution for drawing text that isnt stupid slow\r\n        gl.fillText = function fillText(text, x, y) {\r\n            // if it exist --key\r\n            textCtx.clearRect(0, 0, gl2d.canvas.width, gl2d.canvas.height);\r\n            textCtx.fillStyle = gl.fillStyle;\r\n            textCtx.fillText(text, x, y);\r\n\r\n            gl.drawImage(textCanvas, 0, 0);\r\n        };\r\n\r\n        gl.strokeText = function strokeText() {\r\n        };\r\n\r\n        gl.measureText = function measureText() {\r\n            return 1;\r\n        };\r\n\r\n        var tempCanvas = document.createElement('canvas');\r\n        var tempCtx = tempCanvas.getContext('2d');\r\n\r\n        gl.save = function save() {\r\n            gl2d.transform.pushMatrix();\r\n            saveDrawState();\r\n        };\r\n\r\n        gl.restore = function restore() {\r\n            gl2d.transform.popMatrix();\r\n            restoreDrawState();\r\n        };\r\n\r\n        gl.translate = function translate(x, y) {\r\n            gl2d.transform.translate(x, y);\r\n        };\r\n\r\n        gl.rotate = function rotate(a) {\r\n            gl2d.transform.rotate(a);\r\n        };\r\n\r\n        gl.scale = function scale(x, y) {\r\n            gl2d.transform.scale(x, y);\r\n        };\r\n\r\n        gl.createImageData = function createImageData(width, height) {\r\n            return tempCtx.createImageData(width, height);\r\n        };\r\n\r\n        gl.getImageData = function getImageData(x, y, width, height) {\r\n            var data = tempCtx.createImageData(width, height);\r\n            var buffer = new Uint8Array(width * height * 4);\r\n            gl.readPixels(x, y, width, height, gl.RGBA, gl.UNSIGNED_BYTE, buffer);\r\n            var w = width * 4, h = height;\r\n            for (var i = 0, maxI = h / 2; i < maxI; ++i) {\r\n                for (var j = 0, maxJ = w; j < maxJ; ++j) {\r\n                    var index1 = i * w + j;\r\n                    var index2 = (h - i - 1) * w + j;\r\n                    data.data[index1] = buffer[index2];\r\n                    data.data[index2] = buffer[index1];\r\n                } //for\r\n            } //for\r\n\r\n            return data;\r\n        };\r\n\r\n        gl.putImageData = function putImageData(imageData, x, y) {\r\n            gl.drawImage(imageData, x, y);\r\n        };\r\n\r\n        gl.transform = function transform(m11, m12, m21, m22, dx, dy) {\r\n            gl2d.transform.tr(m11, m12, m21, m22, dx, dy);\r\n        };\r\n\r\n        function sendTransformStack(sp) {\r\n            var stack = gl2d.transform.m_stack;\r\n            for (var i = 0, maxI = gl2d.transform.c_stack + 1; i < maxI; ++i) {\r\n                gl.uniformMatrix3fv(sp.uTransforms[i], false, stack[maxI - 1 - i]);\r\n            } //for\r\n        }\r\n\r\n        gl.setTransform = function setTransform(m11, m12, m21, m22, dx, dy) {\r\n            gl2d.transform.setIdentity();\r\n            gl.transform.apply(this, arguments);\r\n        };\r\n\r\n        gl.fillRect = function fillRect(x, y, width, height) {\r\n            var transform = gl2d.transform;\r\n            var shaderProgram = gl2d.initShaders(transform.c_stack + 2, 0);\r\n\r\n            gl.bindBuffer(gl.ARRAY_BUFFER, gl.rectVertexPositionBuffer);\r\n            gl.vertexAttribPointer(shaderProgram.vertexPositionAttribute, 4, gl.FLOAT, false, 0, 0);\r\n\r\n            transform.pushMatrix();\r\n\r\n            transform.translate(x, y);\r\n            transform.scale(width, height);\r\n\r\n            sendTransformStack(shaderProgram);\r\n\r\n            gl.uniform4f(shaderProgram.uColor, drawState.fillStyle[0], drawState.fillStyle[1], drawState.fillStyle[2], drawState.fillStyle[3]);\r\n\r\n            gl.drawArrays(gl.TRIANGLE_FAN, 0, 4);\r\n\r\n            transform.popMatrix();\r\n        };\r\n\r\n        gl.strokeRect = function strokeRect(x, y, width, height) {\r\n            var transform = gl2d.transform;\r\n            var shaderProgram = gl2d.initShaders(transform.c_stack + 2, 0);\r\n\r\n            gl.bindBuffer(gl.ARRAY_BUFFER, gl.rectVertexPositionBuffer);\r\n            gl.vertexAttribPointer(shaderProgram.vertexPositionAttribute, 4, gl.FLOAT, false, 0, 0);\r\n\r\n            transform.pushMatrix();\r\n\r\n            transform.translate(x, y);\r\n            transform.scale(width, height);\r\n\r\n            sendTransformStack(shaderProgram);\r\n\r\n            gl.uniform4f(shaderProgram.uColor, drawState.strokeStyle[0], drawState.strokeStyle[1], drawState.strokeStyle[2], drawState.strokeStyle[3]);\r\n\r\n            gl.drawArrays(gl.LINE_LOOP, 0, 4);\r\n\r\n            transform.popMatrix();\r\n        };\r\n\r\n        gl.clearRect = function clearRect(x, y, width, height) {\r\n        };\r\n\r\n        var subPaths = [];\r\n\r\n        function SubPath(x, y) {\r\n            this.closed = false;\r\n            this.verts = [x, y, 0, 0];\r\n        }\r\n\r\n        // Empty the list of subpaths so that the context once again has zero subpaths\r\n        gl.beginPath = function beginPath() {\r\n            subPaths.length = 0;\r\n        };\r\n\r\n        // Mark last subpath as closed and create a new subpath with the same starting point as the previous subpath\r\n        gl.closePath = function closePath() {\r\n            if (subPaths.length) {\r\n                // Mark last subpath closed.\r\n                var prevPath = subPaths[subPaths.length - 1], startX = prevPath.verts[0], startY = prevPath.verts[1];\r\n                prevPath.closed = true;\r\n\r\n                // Create new subpath using the starting position of previous subpath\r\n                var newPath = new SubPath(startX, startY);\r\n                subPaths.push(newPath);\r\n            }\r\n        };\r\n\r\n        // Create a new subpath with the specified point as its first (and only) point\r\n        gl.moveTo = function moveTo(x, y) {\r\n            subPaths.push(new SubPath(x, y));\r\n        };\r\n\r\n        gl.lineTo = function lineTo(x, y) {\r\n            if (subPaths.length) {\r\n                subPaths[subPaths.length - 1].verts.push(x, y, 0, 0);\r\n            } else {\r\n                // Create a new subpath if none currently exist\r\n                gl.moveTo(x, y);\r\n            }\r\n        };\r\n\r\n        gl.quadraticApproximateCount = 50;\r\n        gl.quadraticCurveTo = function quadraticCurveTo(hx, hy, x, y) {\r\n            if (subPaths.length) {\r\n                var verts = subPaths[subPaths.length - 1].verts,\r\n                    fromx = verts[verts.length - 4],\r\n                    fromy = verts[verts.length - 3],\r\n                    t, i, tx, ty;\r\n                for (var j = 0; j < gl.quadraticApproximateCount; j++) {\r\n                    t = j / gl.quadraticApproximateCount;\r\n                    i = 1 - t;\r\n                    tx = i * i * fromx + 2 * i * t * hx + t * t * x;\r\n                    ty = i * i * fromy + 2 * i * t * hy + t * t * y;\r\n                    verts.push(tx, ty, 0, 0);\r\n                }\r\n            } else {\r\n                gl.moveTo(x, y);\r\n            }\r\n        };\r\n\r\n        gl.bezierApproximateCount = 50;\r\n        gl.bezierCurveTo = function quadraticCurveTo(h1x, h1y, h2x, h2y, x, y) {\r\n            if (subPaths.length) {\r\n                var verts = subPaths[subPaths.length - 1].verts,\r\n                    fromx = verts[verts.length - 4],\r\n                    fromy = verts[verts.length - 3],\r\n                    t, i, tx, ty;\r\n                for (var j = 0; j < gl.bezierApproximateCount; j++) {\r\n                    t = j / gl.bezierApproximateCount;\r\n                    i = 1 - t;\r\n                    tx = i * i * i * fromx + 3 * i * i * t * h1x + 3 * i * t * t * h2x + t * t * t * x;\r\n                    ty = i * i * i * fromy + 3 * i * i * t * h1y + 3 * i * t * t * h2y + t * t * t * y;\r\n                    verts.push(tx, ty, 0, 0);\r\n                }\r\n            } else {\r\n                gl.moveTo(x, y);\r\n            }\r\n        };\r\n\r\n        gl.arcTo = function arcTo() {\r\n            if (subPaths.length) {\r\n                ;\r\n            } else {\r\n                gl.moveTo(x, y);\r\n            }\r\n        };\r\n\r\n        // Adds a closed rect subpath and creates a new subpath\r\n        gl.rect = function rect(x, y, w, h) {\r\n            gl.moveTo(x, y);\r\n            gl.lineTo(x + w, y);\r\n            gl.lineTo(x + w, y + h);\r\n            gl.lineTo(x, y + h);\r\n            gl.closePath();\r\n        };\r\n\r\n        gl.arcApproximateCount = 100;\r\n        gl.arc = function arc(cx, cy, radius, startAngle, endAngle, anticlockwise) {\r\n            if (subPaths.length) {\r\n                var verts = subPaths[subPaths.length - 1].verts;\r\n\r\n                // startAngle\r\n                var x = cx + radius * Math.cos(startAngle),\r\n                    y = cy + radius * Math.sin(startAngle);\r\n                verts.push(x, y, 0, 0);\r\n\r\n                while (startAngle > Math.PI * 2)\r\n                    startAngle -= Math.PI * 2;\r\n                while (endAngle > Math.PI * 2)\r\n                    endAngle -= Math.PI * 2;\r\n                while (startAngle < -Math.PI * 2)\r\n                    startAngle += Math.PI * 2;\r\n                while (endAngle < -Math.PI * 2)\r\n                    endAngle += Math.PI * 2;\r\n                if (startAngle == endAngle)\r\n                    return;\r\n\r\n                var count = 1 / gl.arcApproximateCount,\r\n                    fixed = gl.arcApproximateCount,\r\n                    t;\r\n                if (anticlockwise) {\r\n                    endAngle -= Math.PI * 2;\r\n                    count = -count;\r\n                }\r\n                for (var i = startAngle; (i > endAngle && anticlockwise) || (i < endAngle && !anticlockwise); i += count) {\r\n                    if (t == (t = (i * fixed | 0) / fixed))\r\n                        continue;\r\n                    x = cx + radius * Math.cos(t);\r\n                    y = cy + radius * Math.sin(t);\r\n                    verts.push(x, y, 0, 0);\r\n                }\r\n            } else {\r\n                gl.moveTo(x, y);\r\n            }\r\n        };\r\n\r\n        function fillSubPath(index) {\r\n            var transform = gl2d.transform;\r\n            var shaderProgram = gl2d.initShaders(transform.c_stack + 2, 0);\r\n\r\n            var subPath = subPaths[index];\r\n            var verts = subPath.verts;\r\n\r\n            gl.bindBuffer(gl.ARRAY_BUFFER, gl.pathVertexPositionBuffer);\r\n            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(verts), gl.STATIC_DRAW);\r\n\r\n            gl.vertexAttribPointer(shaderProgram.vertexPositionAttribute, 4, gl.FLOAT, false, 0, 0);\r\n\r\n            transform.pushMatrix();\r\n\r\n            sendTransformStack(shaderProgram);\r\n\r\n            gl.uniform4f(shaderProgram.uColor, drawState.fillStyle[0], drawState.fillStyle[1], drawState.fillStyle[2], drawState.fillStyle[3]);\r\n\r\n            gl.drawArrays(gl.TRIANGLE_FAN, 0, verts.length / 4);\r\n\r\n            transform.popMatrix();\r\n        }\r\n\r\n        gl.fill = function fill() {\r\n            for (var i = 0; i < subPaths.length; i++) {\r\n                fillSubPath(i);\r\n            }\r\n        };\r\n\r\n        function strokeSubPath(index) {\r\n            var transform = gl2d.transform;\r\n            var shaderProgram = gl2d.initShaders(transform.c_stack + 2, 0);\r\n\r\n            var subPath = subPaths[index];\r\n            var verts = subPath.verts;\r\n\r\n            gl.bindBuffer(gl.ARRAY_BUFFER, gl.pathVertexPositionBuffer);\r\n            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(verts), gl.STATIC_DRAW);\r\n\r\n            gl.vertexAttribPointer(shaderProgram.vertexPositionAttribute, 4, gl.FLOAT, false, 0, 0);\r\n\r\n            transform.pushMatrix();\r\n\r\n            sendTransformStack(shaderProgram);\r\n\r\n            gl.uniform4f(shaderProgram.uColor, drawState.strokeStyle[0], drawState.strokeStyle[1], drawState.strokeStyle[2], drawState.strokeStyle[3]);\r\n\r\n            if (subPath.closed) {\r\n                gl.drawArrays(gl.LINE_LOOP, 0, verts.length / 4);\r\n            } else {\r\n                gl.drawArrays(gl.LINE_STRIP, 0, verts.length / 4);\r\n            }\r\n\r\n            transform.popMatrix();\r\n        }\r\n\r\n        gl.stroke = function stroke() {\r\n            for (var i = 0; i < subPaths.length; i++) {\r\n                strokeSubPath(i);\r\n            }\r\n        };\r\n\r\n        gl.clip = function clip() {\r\n        };\r\n\r\n        gl.isPointInPath = function isPointInPath() {\r\n        };\r\n\r\n        gl.drawFocusRing = function drawFocusRing() {\r\n        };\r\n\r\n\r\n        var imageCache = [], textureCache = [];\r\n\r\n        function Texture(image) {\r\n            this.obj = gl.createTexture();\r\n            this.index = textureCache.push(this);\r\n\r\n            imageCache.push(image);\r\n\r\n            // we may wish to consider tiling large images like this instead of scaling and\r\n            // adjust appropriately (flip to next texture source and tile offset) when drawing\r\n            if (image.width > gl2d.maxTextureSize || image.height > gl2d.maxTextureSize) {\r\n                var canvas = document.createElement(\"canvas\");\r\n\r\n                canvas.width = (image.width > gl2d.maxTextureSize) ? gl2d.maxTextureSize : image.width;\r\n                canvas.height = (image.height > gl2d.maxTextureSize) ? gl2d.maxTextureSize : image.height;\r\n\r\n                var ctx = canvas.getContext(\"2d\");\r\n\r\n                ctx.drawImage(image, 0, 0, image.width, image.height, 0, 0, canvas.width, canvas.height);\r\n\r\n                image = canvas;\r\n            }\r\n\r\n            var GL_FUNCTION = gl.LINEAR;\r\n            var GL_MIPMAP_FUNCTION = gl.LINEAR_MIPMAP_LINEAR;\r\n\r\n            if (!drawState.imageSmoothingEnabled) {\r\n                GL_FUNCTION = gl.NEAREST;\r\n                GL_MIPMAP_FUNCTION = gl.LINEAR_MIPMAP_NEAREST;\r\n            }\r\n\r\n            gl.bindTexture(gl.TEXTURE_2D, this.obj);\r\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\r\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, GL_FUNCTION);\r\n\r\n            // Enable Mip mapping on power-of-2 textures\r\n            if (isPOT(image.width) && isPOT(image.height)) {\r\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, GL_MIPMAP_FUNCTION);\r\n                gl.generateMipmap(gl.TEXTURE_2D);\r\n            } else {\r\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, GL_FUNCTION);\r\n            }\r\n\r\n            // Unbind texture\r\n            gl.bindTexture(gl.TEXTURE_2D, null);\r\n        }\r\n\r\n        gl.drawImage = function drawImage(image, a, b, c, d, e, f, g, h) {\r\n            var transform = gl2d.transform;\r\n\r\n            transform.pushMatrix();\r\n\r\n            var sMask = shaderMask.texture;\r\n            var doCrop = false;\r\n\r\n            //drawImage(image, dx, dy)\r\n            if (arguments.length === 3) {\r\n                transform.translate(a, b);\r\n                transform.scale(image.width, image.height);\r\n            }\r\n\r\n            //drawImage(image, dx, dy, dw, dh)\r\n            else if (arguments.length === 5) {\r\n                transform.translate(a, b);\r\n                transform.scale(c, d);\r\n            }\r\n\r\n            //drawImage(image, sx, sy, sw, sh, dx, dy, dw, dh)\r\n            else if (arguments.length === 9) {\r\n                transform.translate(e, f);\r\n                transform.scale(g, h);\r\n                sMask = sMask | shaderMask.crop;\r\n                doCrop = true;\r\n            }\r\n\r\n            var shaderProgram = gl2d.initShaders(transform.c_stack + 1, sMask);\r\n\r\n            var texture, cacheIndex = imageCache.indexOf(image);\r\n\r\n            if (cacheIndex !== -1) {\r\n                texture = textureCache[cacheIndex];\r\n            } else {\r\n                texture = new Texture(image);\r\n            }\r\n\r\n            if (doCrop) {\r\n                gl.uniform4f(shaderProgram.uCropSource, a / image.width, b / image.height, c / image.width, d / image.height);\r\n            }\r\n\r\n            gl.bindBuffer(gl.ARRAY_BUFFER, gl.rectVertexPositionBuffer);\r\n            gl.vertexAttribPointer(shaderProgram.vertexPositionAttribute, 4, gl.FLOAT, false, 0, 0);\r\n\r\n            gl.bindTexture(gl.TEXTURE_2D, texture.obj);\r\n            gl.activeTexture(gl.TEXTURE0);\r\n\r\n            gl.uniform1i(shaderProgram.uSampler, 0);\r\n\r\n            sendTransformStack(shaderProgram);\r\n            gl.drawArrays(gl.TRIANGLE_FAN, 0, 4);\r\n\r\n            transform.popMatrix();\r\n        };\r\n\r\n        // This enables the user to detect whether they got a webgl-2d context or a 2d context.\r\n        Object.defineProperty(gl, \"isWebGL\", {\r\n            configurable: false,\r\n            enumerable: true,\r\n            writable: false,\r\n            value: true\r\n        });\r\n    };\r\n\r\n    if (typeof module === 'object' && typeof module.exports === 'object') module.exports.WebGL2D = WebGL2D;\r\n    return WebGL2D;\r\n}));\r\n"],"sourceRoot":"/source/"}