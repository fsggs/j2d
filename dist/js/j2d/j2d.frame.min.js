/**
 * J2D (jQuery plugin of the fork j2Ds)
 *
 * @authors Skaner, DeVinterX
 * @license BSD, zlib
 * @version 0.1.8-dev
 */

if (global === undefined) var global = window;
if (typeof define !== 'function' || define.amd) global.J2D = {};

!function(i,n){"function"==typeof define&&define.amd?define("j2d.frame",["vanilla.override"],n):n()}(global,function(){"use strict";var i,n=[],e=[],t={frameLimit:60,frameRun:!1,breakAnimationFrame:!1},o=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(i){t.breakAnimationFrame?t.breakAnimationFrame=!1:window.setTimeout(i.call(i,[Date.now()]),1e3/t.frameLimit)}}(),a=function(){return t.breakAnimationFrame=!0,window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame}(),r=function(){};return r.prototype.start=function(i,o,a){var r={j2d:void 0,frameLimit:t.frameLimit,now:0,deltaTime:0,lastTime:0,sceneStartTime:0,sceneSkipTime:0};if(void 0!==a.frameLimit&&a.frameLimit<=t.frameLimit&&(r.frameLimit=a.frameLimit),void 0===a.j2d)throw"j2d not transported to FrameManager.start(id, engine, {... j2d: j2d ...});";r.j2d=a.j2d,r.interval=1e3/r.frameLimit,r.lastTime=Date.now(),n.add(i,o),e.add(i,r),t.frameRun||this.pulse()},r.prototype.stop=function(i){n.remove(i),e.remove(i)},r.prototype.pulse=function(){this.runMainLoop(Date.now())},r.prototype.runMainLoop=function(i,r){if(void 0===r&&(r=this),n.length<=0&&t.frameRun)return t.frameRun=!1,a(this.runMainLoop);t.frameRun=!0;for(var m in n)if(n.hasOwnProperty(m)&&"function"==typeof n[m]){var d=n[m],u=e[m];u.now=Date.now(),u.j2d.options.deltaTime=u.deltaTime=(u.now-u.lastTime)/100,u.j2d.options.io&&!u.j2d.options.pause&&u.j2d.options.io.update(),100*u.deltaTime>u.interval&&(u.lastTime=u.now-100*u.deltaTime%u.interval,u.j2d.options.pause||(u.j2d.options.deltaTime=u.deltaTime,d(i,u))),u.j2d.options.io&&!u.j2d.options.pause&&u.j2d.options.io.clear()}o(function(i){r.runMainLoop(i,r)})},r.prototype.setDefaultFrameLimit=function(i){60>=i&&i>0&&(t.frameLimit=i)},r.Init=function(){return void 0!==window.J2D?window.instanceFrameManager||(window.instanceFrameManager=new r):i||(i=new r)},void 0!==global.J2D&&(global.FrameManager=r.Init()),r.Init()});
//# sourceMappingURL=j2d.frame.min.map
