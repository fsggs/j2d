{"version":3,"sources":["j2d/j2d.input.js"],"names":["define","$","getKey","object","value","Object","keys","filter","key","InputManager","j2d","this","id","element","data","mouse","startPosition","x","y","currentPosition","previousDistance","distance","viewport","position","enabled","enableAdditionalData","keysPressed","writeMode","timePressed","preventAll","cursor","image","keyMap","FULLSCREEN","KEY_CTRL","KEY_F11","checkKeyMap","e","enableCallback","undefined","manager","keyCode","which","index","hasOwnProperty","isArray","eval","equals","events","onMouseClick","isPlay","hasClass","event","inArray","push","pageX","pageY","timeStamp","preventDefault","splice","indexOf","trigger","onMouseWheel","originalEvent","wheelDelta","fixMouseWheel","mouseWheelCancel","onMouseMove","Math","sqrt","pow","toFixed","onKeyboardPress","char","String","fromCharCode","focus","onTouchTap","touch","touches","changedTouches","onTouchMove","bindEvents","selector","document","on","unbindEvents","off","prototype","init","window","j2dPlugin","pluginInit","update","dX","scene","canvas","offsetWidth","width","dY","offsetHeight","height","offset","left","top","flush","clear","keyPressed","SCROLL_MOUSE_UP","SCROLL_MOUSE_DOWN","enable","disable","load","newKeyMap","oldKeyMap","JSON","stringify","parse","save","setKeys","mapObject","extend","getPressData","keyList","time","Date","now","getMouseMoveDistance","current","previous","checkPressedKeyList","length","isNaN","checkPressedKeyMap","getPosition","vector","vec2df","onNode","layer","visible","options","size","setWriteMode","mode","isWriteMode","setCursorImage","css","toggleCursor","isCursorVisible","KEY_MOUSE_LEFT","KEY_MOUSE_MIDDLE","KEY_MOUSE_RIGHT","KEY_BACKSPACE","KEY_TAB","KEY_ENTER","KEY_SHIFT","KEY_ALT","KEY_PAUSE","KEY_BREAK","KEY_CAPS_LOCK","KEY_ESCAPE","KEY_SPACE_BAR","KEY_PAGE_UP","KEY_PAGE_DOWN","KEY_END","KEY_HOME","KEY_LEFT_ARROW","KEY_UP_ARROW","KEY_RIGHT_ARROW","KEY_DOWN_ARROW","KEY_INSERT","KEY_DELETE","KEY_0","KEY_1","KEY_2","KEY_3","KEY_4","KEY_5","KEY_6","KEY_7","KEY_8","KEY_9","KEY_A","KEY_B","KEY_C","KEY_D","KEY_E","KEY_F","KEY_G","KEY_H","KEY_I","KEY_J","KEY_K","KEY_L","KEY_M","KEY_N","KEY_O","KEY_P","KEY_Q","KEY_R","KEY_S","KEY_T","KEY_U","KEY_V","KEY_W","KEY_X","KEY_Y","KEY_Z","KEY_LEFT_WINDOW_KEY","KEY_RIGHT_WINDOW_KEY","KEY_SELECT_KEY","KEY_NUMPAD_0","KEY_NUMPAD_1","KEY_NUMPAD_2","KEY_NUMPAD_3","KEY_NUMPAD_4","KEY_NUMPAD_5","KEY_NUMPAD_6","KEY_NUMPAD_7","KEY_NUMPAD_8","KEY_NUMPAD_9","KEY_MULTIPLY","KEY_ADD","KEY_SUBTRACT","KEY_DECIMAL_POINT","KEY_DIVIDE","KEY_F1","KEY_F2","KEY_F3","KEY_F4","KEY_F5","KEY_F6","KEY_F7","KEY_F8","KEY_F9","KEY_F10","KEY_F12","KEY_NUM_LOCK","KEY_SCROLL_LOCK","KEY_SEMI_COLON","KEY_EQUAL_SIGN","KEY_COMMA","KEY_DASH","KEY_PERIOD","KEY_FORWARD_SLASH","KEY_GRAVE_ACCENT","KEY_OPEN_BRACKET","KEY_BACK_SLASH","KEY_CLOSE_BRACKET","KEY_SINGLE_QUOTE","KEY_LEFT_COMMAND","KEY_RIGHT_COMMAND"],"mappings":"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","file":"j2d/j2d.input.min","sourcesContent":["/**\r\n * J2D Input Manager\r\n *\r\n * @authors DeVinterX\r\n * @license BSD\r\n * @version 0.1.5\r\n */\r\n\r\ndefine('j2d.input', ['jquery', 'vanilla.override'],\r\n    function ($) {\r\n        \"use strict\";\r\n\r\n        var InputManager = function (j2d) {\r\n            this.j2d = j2d;\r\n\r\n            this.id = j2d.id;\r\n            this.element = j2d.element;\r\n\r\n            this.data = {\r\n                mouse: {\r\n                    startPosition: {\r\n                        x: 0,\r\n                        y: 0\r\n                    },\r\n                    currentPosition: {\r\n                        x: 0,\r\n                        y: 0\r\n                    },\r\n                    previousDistance: 0,\r\n                    distance: 0\r\n                },\r\n                viewport: {\r\n                    position: {\r\n                        x: 0,\r\n                        y: 0\r\n                    }\r\n                },\r\n                enabled: false,\r\n                enableAdditionalData: false,\r\n                keysPressed: [],\r\n                writeMode: false,\r\n                timePressed: 0,\r\n                preventAll: false,\r\n\r\n                cursor: {\r\n                    enabled: false,\r\n                    image: 'auto'\r\n                }\r\n            };\r\n            this.keyMap = {\r\n                //DEBUG_INFO: [[InputManager.key.KEY_CTRL, InputManager.key.KEY_F1], 'j2d.debug.toggleScreen', {}],\r\n                FULLSCREEN: [[InputManager.key.KEY_CTRL, InputManager.key.KEY_F11], 'j2d.scene.toggleFullScreen', {}]\r\n            };\r\n        };\r\n\r\n        var checkKeyMap = function (e, enableCallback) {\r\n            if (enableCallback === undefined) enableCallback = true;\r\n\r\n            var j2d = e.data.manager.j2d,\r\n                manager = e.data.manager,\r\n                keyCode = e.which,\r\n                keyMap = e.data.manager.keyMap;\r\n\r\n            for (var index in keyMap) {\r\n                if (keyMap.hasOwnProperty(index)) {\r\n                    var value = keyMap[index];\r\n                    if (!$.isArray(value[0]) && value[0] === keyCode && !!value[1]) {\r\n                        if (typeof value[1] === 'string') {\r\n                            value[1] = eval('(' + value[1] + ')');\r\n                        }\r\n                        if ((typeof value[1] === 'function') && enableCallback) {\r\n                            value[1](j2d, value[2]);\r\n                        }\r\n                        return true;\r\n                    } else if ($.isArray(value[0])\r\n                        && manager.data.keysPressed.equals(value[0]) && !!value[1]\r\n                    ) {\r\n                        if (typeof value[1] === 'string') {\r\n                            value[1] = eval('(' + value[1] + ')');\r\n                        }\r\n                        if (typeof value[1] === 'function' && enableCallback) {\r\n                            value[1](j2d, value[2]);\r\n                        }\r\n                        return true\r\n                    }\r\n                }\r\n            }\r\n            return false\r\n        };\r\n\r\n        var events = {\r\n            onMouseClick: function (e) {\r\n                var manager = e.data.manager;\r\n                if (!manager.data.enabled || !manager.j2d.isPlay() || !manager.j2d.element.hasClass('active')) return true;\r\n                var keysPressed = manager.data.keysPressed;\r\n                var keyCode = getKey(InputManager.key, e.which) || 'KEY_UNKNOWN_' + e.which;\r\n                var mouse = manager.data.mouse;\r\n\r\n                if (e.data.event !== 2) {\r\n                    if (e.data.event === 0) {\r\n                        if (-1 === $.inArray(InputManager.key[keyCode], keysPressed)) {\r\n                            keysPressed.push(InputManager.key[keyCode]);\r\n\r\n                            if (manager.data.enableAdditionalData) {\r\n                                mouse.startPosition.x = e.pageX;\r\n                                mouse.startPosition.y = e.pageY;\r\n                                mouse.distance = 0;\r\n\r\n                                manager.data.timePressed = e.timeStamp;\r\n                            }\r\n                        }\r\n                        if (checkKeyMap(e, false) || manager.data.preventAll) {\r\n                            e.preventDefault();\r\n                        }\r\n                    } else {\r\n                        if (checkKeyMap(e) || manager.data.preventAll) {\r\n                            e.preventDefault();\r\n                        }\r\n                        if (manager.data.enableAdditionalData) {\r\n                            mouse.previousDistance = mouse.distance;\r\n                            mouse.startPosition.x = 0;\r\n                            mouse.startPosition.y = 0;\r\n                        }\r\n\r\n                        keysPressed.splice(\r\n                            keysPressed.indexOf(InputManager.key[keyCode]), 1\r\n                        );\r\n                    }\r\n                    manager.element.trigger(e.data.event === 0 ?\r\n                            'mouseKeyDown' : 'mouseKeyUp', {keyCode: keyCode}\r\n                    );\r\n                } else {\r\n                    if (checkKeyMap(e, false)) {\r\n                        e.preventDefault();\r\n                    }\r\n                }\r\n            },\r\n\r\n            onMouseWheel: function (e) {\r\n                var manager = e.data.manager;\r\n                if (!manager.data.enabled || !manager.j2d.isPlay() || !manager.j2d.element.hasClass('active')) return true;\r\n                var keysPressed = manager.data.keysPressed;\r\n                var keyCode = (e.originalEvent.wheelDelta / 120 > 0) ?\r\n                    getKey(InputManager.key, 4) : getKey(InputManager.key, 5);\r\n\r\n                e.which = (e.originalEvent.wheelDelta / 120 > 0) ? 4 : 5;\r\n\r\n                if (-1 === $.inArray(InputManager.key[keyCode], keysPressed)) {\r\n                    keysPressed.push(InputManager.key[keyCode]);\r\n                }\r\n\r\n                if (checkKeyMap(e) || manager.data.preventAll) {\r\n                    e.preventDefault();\r\n                    manager.fixMouseWheel();\r\n                }\r\n\r\n                manager.element.trigger('mouseWheel', {keyCode: keyCode});\r\n            },\r\n\r\n            mouseWheelCancel: function (keysPressed, keyCode) {\r\n                keysPressed.splice(\r\n                    keysPressed.indexOf(InputManager.key[keyCode]), 1\r\n                );\r\n            },\r\n\r\n            onMouseMove: function (e) {\r\n                var manager = e.data.manager;\r\n                var mouse = e.data.manager.data.mouse;\r\n\r\n                manager.data.mouse.currentPosition.x = e.pageX;\r\n                manager.data.mouse.currentPosition.y = e.pageY;\r\n\r\n                if (e.data.manager.data.enableAdditionalData) {\r\n                    mouse.distance = Math.sqrt(\r\n                        Math.pow((mouse.currentPosition.x - mouse.startPosition.x), 2)\r\n                        + Math.pow((mouse.currentPosition.y - mouse.startPosition.y), 2)\r\n                    ).toFixed(1);\r\n                }\r\n            },\r\n\r\n            onKeyboardPress: function (e) {\r\n                var manager = e.data.manager;\r\n                if (!manager.data.enabled || !manager.j2d.isPlay() || !manager.element.hasClass('active')) return true;\r\n                var keysPressed = manager.data.keysPressed;\r\n                var keyCode = getKey(InputManager.key, e.which) || 'KEY_UNKNOWN_' + e.which;\r\n                if (e.data.event === 2 && true === manager.data.writeMode) {\r\n                    var char = String.fromCharCode(e.which || e.keyCode);\r\n                    e.preventDefault();\r\n                    manager.element.focus().trigger('keyboardCharPress', {\r\n                        key: e.which || e.keyCode,\r\n                        keyCode: keyCode,\r\n                        char: char\r\n                    });\r\n                }\r\n\r\n                if (e.data.event !== 2 && false === manager.data.writeMode) {\r\n                    if (e.data.event === 0) {\r\n                        if (-1 === $.inArray(InputManager.key[keyCode], keysPressed)) {\r\n                            keysPressed.push(InputManager.key[keyCode]);\r\n                            if (manager.data.enableAdditionalData) {\r\n                                manager.data.timePressed = e.timeStamp;\r\n                            }\r\n                        }\r\n                        if (checkKeyMap(e, false) || manager.data.preventAll) {\r\n                            e.preventDefault();\r\n                        }\r\n                    } else {\r\n                        if (checkKeyMap(e) || manager.data.preventAll) {\r\n                            e.preventDefault();\r\n                        }\r\n\r\n                        keysPressed.splice(\r\n                            keysPressed.indexOf(InputManager.key[keyCode]), 1\r\n                        );\r\n                    }\r\n\r\n                    manager.element.trigger(e.data.event === 0 ?\r\n                            'keyboardKeyDown' : 'keyboardKeyUp', {keyCode: keyCode, key: e.which || e.keyCode}\r\n                    );\r\n                }\r\n\r\n                if (e.data.event !== 2 && true === manager.data.writeMode) {\r\n                    manager.element.trigger(e.data.event === 0 ?\r\n                            'keyboardKeyDown' : 'keyboardKeyUp', {keyCode: keyCode, key: e.which || e.keyCode}\r\n                    );\r\n                }\r\n            },\r\n\r\n            onTouchTap: function (e) {\r\n                var manager = e.data.manager;\r\n                if (!manager.data.enabled || !manager.j2d.isPlay() || !manager.j2d.element.hasClass('active')) return true;\r\n                var keysPressed = manager.data.keysPressed;\r\n                var keyCode = getKey(InputManager.key, e.which + 1) || 'KEY_UNKNOWN_' + e.which;\r\n                var touch = e.originalEvent.touches[0] || e.originalEvent.changedTouches[0];\r\n                var mouse = manager.data.mouse;\r\n\r\n                if (e.data.event === 0) {\r\n                    if (-1 === $.inArray(InputManager.key[keyCode], keysPressed)) {\r\n                        keysPressed.push(InputManager.key[keyCode]);\r\n                        if (manager.data.enableAdditionalData) {\r\n                            mouse.startPosition.x = touch.pageX;\r\n                            mouse.startPosition.y = touch.pageY;\r\n                            mouse.distance = 0;\r\n\r\n                            manager.data.timePressed = e.timeStamp;\r\n                        }\r\n                    }\r\n                    if (checkKeyMap(e, false) || manager.data.preventAll) {\r\n                        e.preventDefault();\r\n                    }\r\n                } else {\r\n                    if (checkKeyMap(e) || manager.data.preventAll) {\r\n                        e.preventDefault();\r\n                    }\r\n\r\n                    if (manager.data.enableAdditionalData) {\r\n                        mouse.previousDistance = mouse.distance;\r\n                        mouse.startPosition.x = 0;\r\n                        mouse.startPosition.y = 0;\r\n                    }\r\n\r\n                    keysPressed.splice(\r\n                        keysPressed.indexOf(InputManager.key[keyCode]), 1\r\n                    );\r\n                }\r\n\r\n                manager.element.trigger(e.data.event === 0 ?\r\n                        'mouseKeyDown' : 'mouseKeyUp', {keyCode: keyCode}\r\n                );\r\n            },\r\n\r\n            onTouchMove: function (e) {\r\n                var touch = e.originalEvent.touches[0] || e.originalEvent.changedTouches[0];\r\n                var mouse = e.data.manager.data.mouse;\r\n\r\n                mouse.currentPosition.x = touch.pageX.toFixed(0);\r\n                mouse.currentPosition.y = touch.pageY.toFixed(0);\r\n\r\n                if (e.data.manager.data.enableAdditionalData) {\r\n                    mouse.distance = Math.sqrt(\r\n                        Math.pow((mouse.currentPosition.x - mouse.startPosition.x), 2)\r\n                        + Math.pow((mouse.currentPosition.y - mouse.startPosition.y), 2)\r\n                    ).toFixed(1);\r\n                }\r\n            }\r\n        };\r\n\r\n        var bindEvents = function (manager) {\r\n            var selector = '[guid=' + manager.id + ']';\r\n\r\n            $(document).on('contextmenu', selector, {manager: manager, event: 2}, events.onMouseClick);\r\n            $(document).on('mousedown', selector, {manager: manager, event: 0}, events.onMouseClick);\r\n            $(document).on('mouseup', selector, {manager: manager, event: 1}, events.onMouseClick);\r\n            $(document).on('mousewheel', selector, {manager: manager}, events.onMouseWheel);\r\n            $(document).on('mousemove', selector, {manager: manager}, events.onMouseMove);\r\n\r\n            $(document).on('keydown', null, {manager: manager, event: 0}, events.onKeyboardPress);\r\n            $(document).on('keyup', null, {manager: manager, event: 1}, events.onKeyboardPress);\r\n            $(document).on('keypress', null, {manager: manager, event: 2}, events.onKeyboardPress);\r\n\r\n            $(document).on('touchstart', selector, {manager: manager, event: 0}, events.onTouchTap);\r\n            $(document).on('touchend', selector, {manager: manager, event: 1}, events.onTouchTap);\r\n            $(document).on('touchmove ', selector, {manager: manager}, events.onTouchMove);\r\n        };\r\n\r\n        var unbindEvents = function (manager) {\r\n            var selector = '[guid=' + manager.id + ']';\r\n\r\n            $(document).off('contextmenu', selector, {manager: manager, event: 1}, events.onMouseClick);\r\n            $(document).off('mousedown', selector, {manager: manager, event: 0}, events.onMouseClick);\r\n            $(document).off('mouseup', selector, {manager: manager, event: 1}, events.onMouseClick);\r\n            $(document).off('mousewheel', selector, {manager: manager}, events.onMouseWheel);\r\n            $(document).off('mousemove', selector, {manager: manager}, events.onMouseMove);\r\n\r\n            $(document).off('keydown', null, {manager: manager, event: 0}, events.onKeyboardPress);\r\n            $(document).off('keyup', null, {manager: manager, event: 1}, events.onKeyboardPress);\r\n            $(document).off('keypress', null, {manager: manager, event: 2}, events.onKeyboardPress);\r\n\r\n            $(document).off('touchstart', selector, {manager: manager, event: 0}, events.onTouchTap);\r\n            $(document).off('touchend', selector, {manager: manager, event: 1}, events.onTouchTap);\r\n            $(document).off('touchmove ', selector, {manager: manager}, events.onTouchMove);\r\n        };\r\n\r\n        InputManager.prototype.init = function () {\r\n            if (!this.data.enabled && window.j2dPlugin.pluginInit) {\r\n                bindEvents(this);\r\n\r\n                this.data.enabled = true;\r\n            }\r\n        };\r\n\r\n        InputManager.prototype.update = function () {\r\n            if (!this.data.enabled) return false;\r\n\r\n            var dX = this.j2d.scene.canvas.offsetWidth / this.j2d.scene.width,\r\n                dY = this.j2d.scene.canvas.offsetHeight / this.j2d.scene.height,\r\n                x = this.data.mouse.currentPosition.x / dX,\r\n                y = this.data.mouse.currentPosition.y / dY;\r\n\r\n            var offset = this.element.offset();\r\n            this.data.viewport.x = this.j2d.scene.viewport.x + x - offset.left;\r\n            this.data.viewport.y = this.j2d.scene.viewport.y + y - offset.top;\r\n        };\r\n\r\n        InputManager.prototype.flush = function () {\r\n            this.data.keysPressed = [];\r\n        };\r\n\r\n        InputManager.prototype.clear = function () {};\r\n\r\n        InputManager.prototype.fixMouseWheel = function () {\r\n            var keyPressed = this.data.keysPressed;\r\n            if (-1 !== $.inArray(InputManager.key.SCROLL_MOUSE_UP, keyPressed)) {\r\n                events.mouseWheelCancel(keyPressed, InputManager.key.SCROLL_MOUSE_UP);\r\n            } else if (-1 !== $.inArray(InputManager.key.SCROLL_MOUSE_DOWN, keyPressed)) {\r\n                events.mouseWheelCancel(keyPressed, InputManager.key.SCROLL_MOUSE_DOWN);\r\n            }\r\n        };\r\n\r\n        InputManager.prototype.enable = function () {\r\n            if (!this.data.enabled) {\r\n                //bindEvents(this);\r\n                this.data.enabled = false;\r\n            }\r\n        };\r\n\r\n        InputManager.prototype.disable = function () {\r\n            if (this.data.enabled) {\r\n                //unbindEvents(this);\r\n                this.data.enabled = false;\r\n            }\r\n        };\r\n\r\n        InputManager.prototype.load = function (newKeyMap) {\r\n            var oldKeyMap = JSON.stringify(this.keyMap);\r\n            this.keyMap = JSON.parse(newKeyMap);\r\n            return oldKeyMap;\r\n        };\r\n\r\n        InputManager.prototype.save = function () {\r\n            return JSON.stringify(this.keyMap);\r\n        };\r\n\r\n        /** +KeyMap Manager **/\r\n        InputManager.prototype.setKeys = function (mapObject) {\r\n            this.keyMap = $.extend(true, {}, this.keyMap, mapObject);\r\n        };\r\n        /** -KeyMap Manager **/\r\n\r\n        var getPressData = function (manager, keyList) {\r\n            if (!manager.data.enableAdditionalData) return true;\r\n            return {\r\n                keyList: keyList,\r\n                time: Date.now() - manager.data.timePressed\r\n            };\r\n        };\r\n\r\n        InputManager.prototype.getMouseMoveDistance = function () {\r\n            if (!this.data.enableAdditionalData) return 0;\r\n            return {current: this.data.mouse.distance, previous: this.data.mouse.previousDistance};\r\n        };\r\n\r\n        /** +Input Checkers **/\r\n        InputManager.prototype.checkPressedKeyList = function (keyList) {\r\n            if ($.isArray(keyList)) {\r\n                if (keyList.length !== this.data.keysPressed.length) {\r\n                    return false;\r\n                } else if (this.data.keysPressed.equals(keyList)) {\r\n                    this.fixMouseWheel();\r\n                    return getPressData(this, keyList);\r\n                }\r\n                this.fixMouseWheel();\r\n                return false;\r\n            }\r\n            //if (!this.data.keysPressed.equals([])) console.log(this.data.keysPressed);\r\n            if (isNaN(keyList)) return false;\r\n            if (-1 !== this.data.keysPressed.indexOf(keyList)) {\r\n                this.fixMouseWheel();\r\n                return getPressData(this, keyList);\r\n            }\r\n            this.fixMouseWheel();\r\n            return false;\r\n        };\r\n\r\n        InputManager.prototype.checkPressedKeyMap = function (key) {\r\n            if (this.keyMap[key] === undefined) return false;\r\n            var keyList = this.keyMap[key][0];\r\n\r\n            return this.checkPressedKeyList(keyList);\r\n        };\r\n\r\n        InputManager.prototype.getPosition = function () {\r\n            return this.j2d.vector.vec2df(this.data.viewport.x + 0.5, this.data.viewport.y + 0.5);\r\n        };\r\n\r\n        InputManager.prototype.onNode = function (id) {\r\n            if (!id.layer.visible) return false;\r\n            return (this.data.viewport.x > id.options.position.x && this.data.viewport.x < id.options.position.x + id.options.size.x) &&\r\n                (this.data.viewport.y > id.options.position.y && this.data.viewport.y < id.options.position.y + id.options.size.y);\r\n        };\r\n        /** -Input Checkers **/\r\n\r\n        /** +Input Write Mode **/\r\n        InputManager.prototype.setWriteMode = function (mode) {\r\n            this.data.writeMode = mode;\r\n        };\r\n\r\n        InputManager.prototype.isWriteMode = function () {\r\n            return !!this.data.writeMode;\r\n        };\r\n        /** -Input Write Mode **/\r\n\r\n        /** +Cursor **/\r\n        InputManager.prototype.setCursorImage = function (image) {\r\n            this.data.cursor.image = 'url(\"' + image + '\"), auto';\r\n            $(this.element).css('cursor', this.data.cursor.image);\r\n        };\r\n\r\n        InputManager.prototype.toggleCursor = function (enable) {\r\n            if (enable !== undefined) {\r\n                this.data.cursor.enable = enable;\r\n            } else {\r\n                this.data.cursor.enable = !this.data.cursor.enable;\r\n            }\r\n\r\n            if (!this.data.cursor.enable) {\r\n                this.data.cursor.image = $(this.j2d.element).css('cursor');\r\n                $(this.element).css('cursor', 'none');\r\n            } else {\r\n                $(this.element).css('cursor', this.data.cursor.image);\r\n            }\r\n        };\r\n\r\n        InputManager.prototype.isCursorVisible = function () {\r\n            return this.data.cursor.enable;\r\n        };\r\n        /** -Cursor **/\r\n\r\n        /** static keys arrayList **/\r\n        InputManager.key = {\r\n            KEY_MOUSE_LEFT: 1,\r\n            KEY_MOUSE_MIDDLE: 2,\r\n            KEY_MOUSE_RIGHT: 3,\r\n\r\n            SCROLL_MOUSE_UP: 4,\r\n            SCROLL_MOUSE_DOWN: 5,\r\n\r\n            KEY_BACKSPACE: 8,\r\n            KEY_TAB: 9,\r\n            KEY_ENTER: 13,\r\n            KEY_SHIFT: 16,\r\n            KEY_CTRL: 17,\r\n            KEY_ALT: 18,\r\n            KEY_PAUSE: 19,\r\n            KEY_BREAK: 19,\r\n            KEY_CAPS_LOCK: 20,\r\n            KEY_ESCAPE: 27,\r\n            KEY_SPACE_BAR: 32,\r\n            KEY_PAGE_UP: 33,\r\n            KEY_PAGE_DOWN: 34,\r\n            KEY_END: 35,\r\n            KEY_HOME: 36,\r\n            KEY_LEFT_ARROW: 37,\r\n            KEY_UP_ARROW: 38,\r\n            KEY_RIGHT_ARROW: 39,\r\n            KEY_DOWN_ARROW: 40,\r\n            KEY_INSERT: 45,\r\n            KEY_DELETE: 46,\r\n            KEY_0: 48,\r\n            KEY_1: 49,\r\n            KEY_2: 50,\r\n            KEY_3: 51,\r\n            KEY_4: 52,\r\n            KEY_5: 53,\r\n            KEY_6: 54,\r\n            KEY_7: 55,\r\n            KEY_8: 56,\r\n            KEY_9: 57,\r\n            KEY_A: 65,\r\n            KEY_B: 66,\r\n            KEY_C: 67,\r\n            KEY_D: 68,\r\n            KEY_E: 69,\r\n            KEY_F: 70,\r\n            KEY_G: 71,\r\n            KEY_H: 72,\r\n            KEY_I: 73,\r\n            KEY_J: 74,\r\n            KEY_K: 75,\r\n            KEY_L: 76,\r\n            KEY_M: 77,\r\n            KEY_N: 78,\r\n            KEY_O: 79,\r\n            KEY_P: 80,\r\n            KEY_Q: 81,\r\n            KEY_R: 82,\r\n            KEY_S: 83,\r\n            KEY_T: 84,\r\n            KEY_U: 85,\r\n            KEY_V: 86,\r\n            KEY_W: 87,\r\n            KEY_X: 88,\r\n            KEY_Y: 89,\r\n            KEY_Z: 90,\r\n            KEY_LEFT_WINDOW_KEY: 91,\r\n            KEY_RIGHT_WINDOW_KEY: 92,\r\n            KEY_SELECT_KEY: 93,\r\n            KEY_NUMPAD_0: 96,\r\n            KEY_NUMPAD_1: 97,\r\n            KEY_NUMPAD_2: 98,\r\n            KEY_NUMPAD_3: 99,\r\n            KEY_NUMPAD_4: 100,\r\n            KEY_NUMPAD_5: 101,\r\n            KEY_NUMPAD_6: 102,\r\n            KEY_NUMPAD_7: 103,\r\n            KEY_NUMPAD_8: 104,\r\n            KEY_NUMPAD_9: 105,\r\n            KEY_MULTIPLY: 106,\r\n            KEY_ADD: 107,\r\n            KEY_SUBTRACT: 109,\r\n            KEY_DECIMAL_POINT: 110,\r\n            KEY_DIVIDE: 111,\r\n            KEY_F1: 112,\r\n            KEY_F2: 113,\r\n            KEY_F3: 114,\r\n            KEY_F4: 115,\r\n            KEY_F5: 116,\r\n            KEY_F6: 117,\r\n            KEY_F7: 118,\r\n            KEY_F8: 119,\r\n            KEY_F9: 120,\r\n            KEY_F10: 121,\r\n            KEY_F11: 122,\r\n            KEY_F12: 123,\r\n            KEY_NUM_LOCK: 144,\r\n            KEY_SCROLL_LOCK: 145,\r\n            KEY_SEMI_COLON: 186,\r\n            KEY_EQUAL_SIGN: 187,\r\n            KEY_COMMA: 188,\r\n            KEY_DASH: 189,\r\n            KEY_PERIOD: 190,\r\n            KEY_FORWARD_SLASH: 191,\r\n            KEY_GRAVE_ACCENT: 192,\r\n            KEY_OPEN_BRACKET: 219,\r\n            KEY_BACK_SLASH: 220,\r\n            KEY_CLOSE_BRACKET: 221,\r\n            KEY_SINGLE_QUOTE: 222,\r\n            KEY_LEFT_COMMAND: 224,\r\n            KEY_RIGHT_COMMAND: 224\r\n        };\r\n\r\n        /** ^ES5+ **/\r\n        function getKey(object, value) {\r\n            return Object.keys(object).filter(function (key) {\r\n                return object[key] === value\r\n            })[0];\r\n        }\r\n\r\n        return InputManager;\r\n    }\r\n);\r\n"],"sourceRoot":"/source/"}