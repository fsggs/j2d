define("j2d.layers",[],function(){"use strict";var t,e=function(e,i){this.parent=e,this.list={},t=i};return e.prototype.getLayer=function(t){return this.list[t]},e.prototype.add=function(e,i){if(this.list[e])return!1;var s={},n=this.parent;return s.layerName=e,s.canvas=document.createElement("canvas"),s.canvas.width=n.scene.width,s.canvas.height=n.scene.height,s.width=n.scene.width,s.height=n.scene.height,n.options.webGL?(t.enable(s.canvas),s.context=s.canvas.getContext("WebGL-2d")):s.context=s.canvas.getContext("2d"),s.context.shadowColor="rgba(0,0,0,0)",s.canvas.style.zIndex=1e3+i,s.canvas.style.position="absolute",s.canvas.style.left="0",s.canvas.style.top="0",s.canvas.id=e,s.opacity=1,s.angle=0,s.visible=1,s.fillColor=!1,s.onContext=function(t){t(this.context)},s.fill=function(t){this.fillColor=t,this.context.fillStyle=t,this.context.fillRect(0,0,this.width,this.height)},s.setOpacity=function(t){this.canvas.style.opacity=t,this.opacity=t},s.getOpacity=function(){return this.opacity},s.setVisible=function(t){t?(this.canvas.style.display="block",this.visible=!0):(this.canvas.style.display="none",this.visible=!1)},s.isVisible=function(){return this.visible},s.setIndex=function(t){this.canvas.style.zIndex=1e3+t},s.clear=function(){this.context.clearRect(0,0,this.width,this.height)},s.clearNode=function(t){t.isLookScene()&&this.context.clearRect(t.pos.x-n.scene.viewport.x,t.pos.y-n.scene.viewport.y,t.size.x,t.size.y)},s.clearRect=function(t,e){this.context.clearRect(t.x-n.scene.viewport.x,t.y-n.scene.viewport.y,e.x,e.y)},s.resize=function(t,e){this.canvas.width=t,this.canvas.height=e,this.width=t,this.height=e,this.fillColor&&(this.context.save(),this.context.fillStyle=this.fillColor,this.context.fillRect(0,0,this.width,this.height),this.context.restore())},this.list[e]=s,n.options.ready&&n.element.append(this.list[e].canvas),s},e});