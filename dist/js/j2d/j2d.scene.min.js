/**
 * J2D (jQuery plugin of the fork j2ds)
 *
 * @authors Skaner, likerRr, DeVinterX
 * @license BSD, zlib
 * @version 0.1.5
 * @see https://github.com/SkanerSoft/J2ds/commit/501b8993fc41960794572dc481a5f2fe492da349
 */

if (global === undefined) var global = window;
if (typeof define !== 'function' || define.amd) global.J2D = {};

!function(e,t){"function"==typeof define&&define.amd?define("j2d.scene",[],t):t()}(global,function(){"use strict";var e=function(e){this.parent=e,this.enableFullscreen=!1,this.layerName="sceneNode",this.layers=parent.layers?parent.layers:{}};return e.prototype.resize=function(e,t){var i=this.parent;this.width=e,this.height=t;for(var n in i.layers.list)i.layers.list.hasOwnProperty(n)&&i.layers.list[n].resize(e,t)},e.prototype.async=function(e,t){setTimeout(e.call(e,t),0)},e.prototype.setGameState=function(e){this.parent.setActiveEngine(e),this.parent.element.trigger("changedGameState")},e.prototype.start=function(e,t){this.parent.options.io&&this.parent.options.io.init(),this.parent.element.trigger("beforeStart"),this.parent.start(e,t),this.parent.element.trigger("afterStart")},e.prototype.fullScreen=function(e){var t=document.getElementById(this.parent.element.attr("id"));void 0===t.requestFullscreen&&(t.requestFullscreen=t.webkitRequestFullscreen||t.webkitRequestFullScreen||t.mozRequestFullScreen||t.msRequestFullscreen),void 0===document.exitFullscreen&&(document.exitFullscreen=document.webkitExitFullscreen||document.webkitCancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen),e?t.requestFullscreen():document.exitFullscreen()},e.prototype.resizeToFullPage=function(e){$("div.canvas[guid]:not(.active)").toggle(e);var t=this.parent,i=this;e?(i.originalWidth=i.width,i.originalHeight=i.height,i.resize(t.device.width,t.device.height),i.enableFullscreen=!0,this.parent.element.width(t.device.width).height(t.device.height).css("margin",0)):(i.resize(i.originalWidth,i.originalHeight),i.enableFullscreen=!1,this.parent.element.width(i.originalWidth).height(i.originalHeight).css("margin",i.originalMargin))},e.prototype.scaleToFullScreen=function(e){$("div.canvas[guid]:not(.active)").toggle(e);var t,i;if(e){for(i in this.parent.layers.list)this.parent.layers.list.hasOwnProperty(i)&&(t=this.parent.layers.list[i].canvas,t.style.width=this.parent.device.width+"px",t.style.height=this.parent.device.height+"px");this.enableFullscreen=!0,this.parent.element.width(this.parent.device.width).height(this.parent.device.height).css("margin",0)}else{for(i in this.parent.layers.list)this.parent.layers.list.hasOwnProperty(i)&&(t=this.parent.layers.list[i].canvas,t.style.width=this.width+"px",t.style.height=this.height+"px");this.enableFullscreen=!1,this.parent.element.width(this.width).height(this.height).css("margin",this.originalMargin)}},e.prototype.toggleFullScreen=function(e,t){void 0===t&&(t={fullscreen:void 0}),!e.scene.enableFullscreen||t.fullscreen?e.scene.fullScreen(!0):e.scene.fullScreen(!1)},e.prototype.setViewPosition=function(e){this.parent.scene.viewport.x=e.x-Math.ceil(this.parent.scene.width/2),this.parent.scene.viewport.y=e.y-Math.ceil(this.parent.scene.height/2)},e.prototype.setViewFocus=function(e,t){this.parent.scene.viewport.x=e.getPosition().x-Math.ceil(this.parent.scene.width/2)+(t?t.x:0),this.parent.scene.viewport.y=e.getPosition().y-Math.ceil(this.parent.scene.height/2)+(t?t.y:0)},e.prototype.viewMove=function(e){this.parent.scene.viewport.x+=e.x,this.parent.scene.viewport.y+=e.y},e.prototype.clear=function(){this.getLayer().clear()},e.prototype.getLayer=function(){return this.parent.layers.getLayer("sceneNode")},e.prototype.init=function(e,t){var i=this.parent;i.element.trigger("beforeInit"),this.width=this.originalWidth=e,this.height=this.originalHeight=t,this.originalMargin=i.element.css("margin"),this.parent.element.width(e).height(t),i.layers.add("sceneNode",0),this.context=i.layers.getLayer("sceneNode").context,this.canvas=i.layers.getLayer("sceneNode").canvas,this.visible=!0,this.cancelClear=!1,this.viewport=i.vector.vec2df(0,0),i.element.trigger("afterInit"),$(window).ready(function(){for(var e in i.layers.list)i.layers.list.hasOwnProperty(e)&&i.element.append(i.layers.getLayer(e).canvas);i.options.ready=!0,i.element.trigger("ready")})},void 0!==window.J2D&&(window.Scene=e),e});
//# sourceMappingURL=j2d.scene.min.map
