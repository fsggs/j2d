/**
 * J2D (jQuery plugin of the fork j2ds)
 *
 * @authors Skaner, likerRr, DeVinterX
 * @license BSD, zlib
 * @version 0.1.5
 * @see https://github.com/SkanerSoft/J2ds/commit/501b8993fc41960794572dc481a5f2fe492da349
 */

if (global === undefined) var global = window;
if (typeof define !== 'function' || define.amd) global.J2D = {};

!function(o,t){"function"==typeof define&&define.amd?define(["jquery"],t):t(o.jQuery)}(global,function(o){"use strict";(void 0===o.localStorage||void 0===o.sessionStorage)&&o.map(["localStorage","sessionStorage"],function(t){var e={cookiePrefix:"fallback:"+t+":",cookieOptions:{path:"/",domain:document.domain,expires:"localStorage"===t?{expires:365}:void 0}};try{o.support[t]=t in window&&null!==window[t]}catch(i){o.support[t]=!1}o[t]=function(i,n){var r=o.extend({},e,o[t].options);return this.getItem=function(e){var i=function(e){return JSON.parse(o.support[t]?window[t].getItem(e):o.cookie(r.cookiePrefix+e))};if("string"==typeof e)return i(e);for(var n=[],s=e.length;s--;)n[s]=i(e[s]);return n},this.setItem=function(e,i){return i=JSON.stringify(i),o.support[t]?window[t].setItem(e,i):o.cookie(r.cookiePrefix+e,i,r.cookieOptions)},this.removeItem=function(e){return o.support[t]?window[t].removeItem(e):o.cookie(r.cookiePrefix+e,null,o.extend(r.cookieOptions,{expires:-1}))},this.clear=function(){if(o.support[t])return window[t].clear();var e=new RegExp("^"+r.cookiePrefix,""),i=o.extend(r.cookieOptions,{expires:-1});document.cookie&&""!==document.cookie&&o.map(document.cookie.split(";"),function(t){e.test(t=o.trim(t))&&o.cookie(t.substr(0,t.indexOf("=")),null,i)})},"undefined"!=typeof i?"undefined"!=typeof n?null===n?this.removeItem(i):this.setItem(i,n):this.getItem(i):this},o[t].options=e});var t=function(o,t){this.storage="sessionStorage"===t?"sessionStorage":"localStorage",this.id=void 0!==o&&"string"==typeof o?o:"xxxxxxxx".replace(/[xy]/g,function(o){var t=16*Math.random()|0,e="x"==o?t:3&t|8;return e.toString(16)})};return t.prototype.load=function(t){return o[this.storage](this.id+"_"+t)},t.prototype.exist=function(t){return!!o[this.storage](this.id+"_"+t)},t.prototype.save=function(t,e){o[this.storage](this.id+"_"+t,e)},t.prototype.loadNode=function(t,e){return e.loadJSON(o[this.storage](this.id+"_"+t))},t.prototype.saveNode=function(t,e){o[this.storage](this.id+"_"+t,e.saveJSON())},void 0!==global.J2D&&(global.Storage=t),t});
//# sourceMappingURL=j2d.storage.min.map
